/* repo: local-health-directories/release-cf-elhd-1352@5.20.0-3546-g76066ab - Package Version: 5.20.0 - 2018-05-30 01:44 pm - User:  */
define("location_validation-lite",["tooltips/1/tooltips","type_ahead"],function(a,b){"use strict";var c,d=(webmd.object(a),webmd.object(b)),e=webmd.url.getHostname(),f="";return e.indexOf("webmd.com")===-1&&(f=e.indexOf("medscape.com")>-1?webmd.url.addLifecycleAndEnv("https://directory.medscape.com"):webmd.url.addLifecycleAndEnv("https://www.webmd.com")),c={usStateList:[{name:"Alabama",abbreviation:"AL",capital:"Montgomery"},{name:"Alaska",abbreviation:"AK",capital:"Juneau"},{name:"Arizona",abbreviation:"AZ",capital:"Phoenix"},{name:"Arkansas",abbreviation:"AR",capital:"Little Rock"},{name:"California",abbreviation:"CA",capital:"Sacramento"},{name:"Colorado",abbreviation:"CO",capital:"Denver"},{name:"Connecticut",abbreviation:"CT",capital:"Hartford"},{name:"Delaware",abbreviation:"DE",capital:"Dover"},{name:"District Of Columbia",abbreviation:"DC",capital:"Washington"},{name:"Florida",abbreviation:"FL",capital:"Tallahassee"},{name:"Georgia",abbreviation:"GA",capital:"Atlanta"},{name:"Hawaii",abbreviation:"HI",capital:"Honolulu"},{name:"Idaho",abbreviation:"ID",capital:"Boise"},{name:"Illinois",abbreviation:"IL",capital:"Springfield"},{name:"Indiana",abbreviation:"IN",capital:"Indianapolis"},{name:"Iowa",abbreviation:"IA",capital:"Des Moines"},{name:"Kansas",abbreviation:"KS",capital:"Topeka"},{name:"Kentucky",abbreviation:"KY",capital:"Frankfort"},{name:"Louisiana",abbreviation:"LA",capital:"Baton Rouge"},{name:"Maine",abbreviation:"ME",capital:"Augusta"},{name:"Maryland",abbreviation:"MD",capital:"Annapolis"},{name:"Massachusetts",abbreviation:"MA",capital:"Boston"},{name:"Michigan",abbreviation:"MI",capital:"Lansing"},{name:"Minnesota",abbreviation:"MN",capital:"Saint Paul"},{name:"Mississippi",abbreviation:"MS",capital:"Jackson"},{name:"Missouri",abbreviation:"MO",capital:"Jefferson City"},{name:"Montana",abbreviation:"MT",capital:"Helena"},{name:"Nebraska",abbreviation:"NE",capital:"Lincoln"},{name:"Nevada",abbreviation:"NV",capital:"Carson City"},{name:"New Hampshire",abbreviation:"NH",capital:"Concord"},{name:"New Jersey",abbreviation:"NJ",capital:"Trenton"},{name:"New Mexico",abbreviation:"NM",capital:"Santa Fe"},{name:"New York",abbreviation:"NY",capital:"Albany"},{name:"North Carolina",abbreviation:"NC",capital:"Raleigh"},{name:"North Dakota",abbreviation:"ND",capital:"Bismarck"},{name:"Ohio",abbreviation:"OH",capital:"Columbus"},{name:"Oklahoma",abbreviation:"OK",capital:"Oklahoma City"},{name:"Oregon",abbreviation:"OR",capital:"Salem"},{name:"Pennsylvania",abbreviation:"PA",capital:"Harrisburg"},{name:"Puerto Rico",abbreviation:"PR",capital:"San Juan"},{name:"Rhode Island",abbreviation:"RI",capital:"Providence"},{name:"South Carolina",abbreviation:"SC",capital:"Columbia"},{name:"South Dakota",abbreviation:"SD",capital:"Pierre"},{name:"Tennessee",abbreviation:"TN",capital:"Nashville"},{name:"Texas",abbreviation:"TX",capital:"Austin"},{name:"Utah",abbreviation:"UT",capital:"Salt Lake City"},{name:"Vermont",abbreviation:"VT",capital:"Montpelier"},{name:"Virginia",abbreviation:"VA",capital:"Richmond"},{name:"Washington",abbreviation:"WA",capital:"Olympia"},{name:"West Virginia",abbreviation:"WV",capital:"Charleston"},{name:"Wisconsin",abbreviation:"WI",capital:"Madison"},{name:"Wyoming",abbreviation:"WY",capital:"Cheyenne"}],loc:{city:"",state:"",zip:"",lat:"",lon:""},options:{form:null,metric:"uk",vertical:!1},defaultLocation:{city:"New York",state:"NY",zip:"",lat:"",lon:""},init:function(a){webmd.debug("=|=|= Location: Initialize",a);var b=this;b.settings=$.extend(b.options,a,!0),b.settings.field=b.settings.field||$("#loc"),b.settings.page=b.settings.page||b.settings.field.closest("form"),"text"===b.settings.field.attr("type")&&(b.typeaheadcs=webmd.object(d),b.typeaheadcs.init({baseurl:webmd.url.getHostname().indexOf("doctor.")>-1?webmd.url.addLifecycleAndEnv("//doctor.webmd.com"):f,name:"locationcs-"+b.settings.field.attr("id"),selector:"#"+b.settings.field.attr("id"),numvalid:!0,params:{s:27,sz:10,metadata:"zip,city,state,county,lat,lon"},select:function(a){b.follow(a)}}),b.typeahead=webmd.object(d),b.typeahead.init({baseurl:webmd.url.getHostname().indexOf("doctor.")>-1?webmd.url.addLifecycleAndEnv("//doctor.webmd.com"):f,name:"location-"+b.settings.field.attr("id"),selector:"#"+b.settings.field.attr("id"),numvalid:!0,params:{s:24,sz:10,metadata:"zip,city,state,county,lat,lon"},select:function(a){b.follow(a)}}),b.settings.field.on("results-returned",function(a,c,d,e){var f,g=0;c.indexOf("locationcs")<0&&(g=1),b.ta||(b.ta=[]),b.ta[g]=e,"undefined"!=typeof b.ta[0]&&"undefined"!=typeof b.ta[1]&&(f=b.ta[0].length>0?b.ta[0]:b.ta[1],b.render(d,f,$(this)))}),b.settings.field.on("clear-type-ahead",function(a){"undefined"!=typeof b.settings.customAnimation?b.settings.customAnimation("close",b.settings.field.siblings(".typeahead.location")):$("#locationtypeahead").slideUp("fast",function(){$(this).closest("form").find("select").css("visibility","visible")})}))},error:function(a,b){webmd.debug("=|=|= Location: Public Error",a,b),this._error(a,b)},find:function(a){webmd.debug("=|=|= Location: Geo Locate",a);var b,c=this;"undefined"!=typeof pd_loc&&"internal"!==pd_loc.zip&&""!==pd_loc.zip?c.update(pd_loc):navigator.geolocation?(navigator.geolocation.getCurrentPosition(function(b){webmd.debug("=|=|= Location: User Located: ",b),c._fetchLocation(b.coords.latitude,b.coords.longitude,a)},function(b){webmd.debug("=|=|= Location: ERROR: User doesn't want to share.",b),a&&a.error&&a.error("ERROR: User doesn't want to share.")}),$("html").hasClass("browserFF")&&(b=setTimeout(function(){!c.loc.zip&&a&&a.error&&a.error("ERROR: User doesn't want to share or didn't see the prompt.")},2e3))):(webmd.debug("=|=|= Location: ERROR: Browser does not support geolocation."),a&&a.error&&a.error("ERROR: Browser does not support geolocation."))},follow:function(a,b){webmd.debug("=|=|= Location: Follow Type-Ahead",a);var c=this,d=a.data("location").split(","),e={city:d[0],state:d[1],zip:d[2],lat:d[3],lon:d[4],s:null};c.t&&clearTimeout(c.t),b&&b.preventDefault(),c.settings.field.trigger("clear-type-ahead"),c._update(e)},render:function(a,b,c){webmd.debug("=|=|= Location: Render Type-Ahead",a,b,c);var d,e=this,f=c.outerWidth()-2,g=$('<div id="locationtypeahead" class="typeahead location location-'+e.settings.field.attr("id")+" locationcs-"+e.settings.field.attr("id")+'" />'),h=$('<ul id="loc_list" data-metrics-module="'+e.settings.metric+'-lo-ta" />'),i='<li><a href="javascript://" data-location="{city},{state},{zip},{lat},{lon}" data-metrics-link="{i}">{loc}</a></li>',j=function(a,b){var c,d=function(a,b,c){var d,e,f;return f=b.toLowerCase().indexOf(c.toLowerCase()),d=a.toLowerCase().indexOf(c.toLowerCase()),a.indexOf("<strong>")>-1&&"<strong>".indexOf(c.toLowerCase())>-1&&(d=a.toLowerCase().split("</strong>")[a.toLowerCase().split("</strong>").length-2].length+9*(a.toLowerCase().split("</strong>").length-1)+a.toLowerCase().split("</strong>")[a.toLowerCase().split("</strong>").length-1].indexOf(c.toLowerCase())),e=d+c.length,(0===f||1===f)&&b.toString().indexOf("<strong>")<0?a.substring(0,d)+"<strong>"+a.substring(d,e)+"</strong>"+a.substring(e):a};return $(a.replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){c=this,$(b.replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){this.length>0&&(a=d(a,c,this.toString()),c=d(c,c,this.toString())),this.indexOf("'/")>-1&&$(this.toString().replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){this.length>0&&(a=d(a,c,this.toString()),c=d(c,c,this.toString()))})})}),a};e.ta=[],$(b).each(function(b,c){c.zip||(isNaN(c.id)?c.zip="":c.zip=c.id),c.i=b+1,c.loc=j(String(c.city+", "+c.state+" "+c.zip),a),d=webmd.substitute(i,c),h.append(d)}),c.siblings(".typeahead.location").length>0?c.siblings(".typeahead.location").find("ul").html(h.html()):(g.append(h),g.css({display:"none",width:f+"px"}),e.settings.vertical?(g.addClass("vertical"),g.css({bottom:Number(c.closest("form").outerHeight()-c.position().top)+"px",left:c.position().left+"px"})):g.css({top:Number(c.position().top+c.outerHeight())+"px",left:c.position().left+"px"}),c.after(g)),c.siblings(".typeahead.location:hidden").length>0&&c.siblings(".typeahead.location").find("li").length>0?("undefined"!=typeof e.settings.customAnimation?e.settings.customAnimation("open",c.siblings(".typeahead.location")):c.siblings(".typeahead.location").slideDown("fast"),c.trigger("render-type-ahead")):c.siblings(".typeahead.location").find("li").length>0&&"undefined"!=typeof e.settings.customAnimation?e.settings.customAnimation("open",c.siblings(".typeahead.location")):c.siblings(".typeahead.location").find("li").length<1&&(webmd.debug("Trigger"),c.trigger("clear-type-ahead")),c.siblings(".typeahead.location").find("a").off().on("click",function(a){"undefined"!=typeof e.settings.customAnimation?e.settings.customAnimation("close",c.siblings(".typeahead.location")):c.siblings(".typeahead.location").slideUp("fast"),e.follow($(this),a)})},reset:function(){this.loc={city:"",state:"",zip:"",lat:"",lon:"",s:null},$(this.settings.field).trigger("location-reset")},update:function(a){webmd.debug("=|=|= Location: Public Update"),this._update(a)},validateField:function(a,b,c){webmd.debug("=|=|= Location: Validate Field",a,b,c);var d,e,f,g,h=this,i="",j="",k="",l="The location you tried did not return a result. Please enter a valid 5-digit ZIP Code.",m="Please enter a valid 5-digit ZIP Code.",n=a,o="";if(n.attr("placeholder")!==n.val()&&(o=$.trim(n.val().replace(/,/g," "))),!(o.length&&o.length>1&&"text"===n.attr("type")))return"state"===n.attr("id")?(j=n.val(),i=h._getStateCapital(j),h._verify({loc:{city:i,state:j},success:function(){h.submitting=!1},error:function(a){return b||(h._error(n,l),n.focus()),h.submitting=!1,!1}}),!0):(h._error(n,m),h.submitting=!1,!1);if(!isNaN(parseFloat(o))&&isFinite(o)&&(k=o),!k){for(d=o.split(" "),e=0;e<d.length;e++)""===d[e]&&d.splice(e,1);for(e=d.length-1;e>0;e--)f=h._getStateAbbreviation($.trim(d[e])),""!==f?(d.splice(e,1),j=f):isNaN(d[e])||(k=d[e],d.splice(e,1));if(j||(g=$.trim(d[d.length-2]+" "+d[d.length-1]),f=h._getStateAbbreviation(g),""!==f&&(j=f,d.splice(d.length-2,2))),i=d.join(" ").toLowerCase(),!j||!i)return h._error(n,l),h.submitting=!1,!1}if("undefined"!=typeof k&&k!==h.loc.zip||"undefined"!=typeof i&&i.toLowerCase()!==h.loc.city.toLowerCase()&&"undefined"!=typeof j&&j.toLowerCase()!==h.loc.state.toLowerCase()||"undefined"!=typeof i&&i.toLowerCase()!==h.loc.city.toLowerCase()&&"undefined"!=typeof j&&j.toLowerCase()===h.loc.state.toLowerCase())webmd.debug("=|=|= Location: VERIFY"),h._verify({loc:{city:i,state:j,zip:k},success:function(){h.submitting=!1},error:function(a){return b||(h._error(n,l),n.focus()),h.submitting=!1,!1}});else if(!c&&h.settings.revert&&("undefined"!=typeof k&&k===h.loc.zip||"undefined"!=typeof i&&i.toLowerCase()===h.loc.city.toLowerCase()&&"undefined"!=typeof j&&j.toLowerCase()===h.loc.state.toLowerCase()))webmd.debug("=|=|= Location: SAME LOCATION"),h.settings.revert();else{if(!c||!h.settings.revert)return!0;h.settings.revert()}},_error:function(a,b){webmd.debug("=|=|= Location: Error Tooltip",a,b),a.data("wtip")?($(".perr .wtip-content").html(b),a.webmdTooltip("show")):a.on("keyup blur",function(a){$(this).val().length>0&&13!==a.keyCode&&$(this).trigger("hidetooltip")}).webmdTooltip({classType:"perr",content:{text:b||null},show:{when:{event:""},ready:!0},hide:{when:{event:"hidetooltip"}}})},_fetchLocation:function(a,b,c){webmd.debug("=|=|= Location: Get Location Info",a,b,c);var d,e,f,g=this;$.ajax({url:"https://api.tiles.mapbox.com/v3/webmd.map-c3xkh4lq/geocode/"+b+","+a+".jsonp",dataType:"jsonp",jsonpCallback:"grid",success:function(c){webmd.debug("=|=|= Location: User Located, refined: ",c),c=c.results[0],"United States of America"===c[c.length-1].name||"United States"===c[c.length-1].name?(webmd.debug("=|=|= Location: Get Location Info: UPDATE",c),$.each(c,function(a,b){switch(b.type){case"city":d=b.name;break;case"province":e=b.name;break;case"zipcode":f=b.name}}),g._update({city:d,state:g._getStateAbbreviation(e),zip:f,lat:a,lon:b})):webmd.debug("=|=|= Location: ERROR: User Located, outside of USA: ",c)},error:function(a,b,d){webmd.debug("=|=|= Location: ERROR: AJAX: ",a,b,d),c&&c.error&&c.error("ERROR: AJAX: "+a+" | "+b+" | "+d)}})},_getStateAbbreviation:function(a){webmd.debug("=|=|= Location: Get State Abbreviation",a);var b=2===a.length?"abbreviation":"name",c=$.grep(this.usStateList,function(c){return c[b].toLowerCase()===a.toLowerCase()});return 1===c.length?c[0].abbreviation:""},_getStateCapital:function(a){webmd.debug("=|=|= Location: Get State Capital",a);var b=2===a.length?"abbreviation":"name",c=$.grep(this.usStateList,function(c){return c[b].toLowerCase()===a.toLowerCase()});return 1===c.length?c[0].capital:""},_update:function(a){webmd.debug("=|=|= Location: Update/Set Location",a);var b=this;"object"==typeof a&&(this.loc=webmd.object(this.loc,a),b.submitting=!1,!this.loc.zip||this.loc.city&&this.loc.state?this.loc.s?(b.returned=!1,b.settings.field.trigger("hidetooltip").trigger("location-update",a),b.settings.field.closest("form").trigger("location-update",a),$('.lhd-finder form input[name="loc"]').trigger("hidetooltip").trigger("location-update",a),$(".lhd-finder form").trigger("location-update",a)):this._verify():this._verify({loc:{zip:this.loc.zip}}))},_verify:function(a){webmd.debug("=|=|= Location: Verify Location Info",a);var b=this,c=webmd.url.getHostname().indexOf("doctor.")>-1?webmd.url.addLifecycleAndEnv("//doctor.webmd.com"):f,d=c+"/api/directories/Service.svc/geolocation?city={city}&state={state}&zip={zip}";a||(a={}),!a.loc&&b.loc?a.loc=b.loc:a.loc||(a.loc=b.defaultLocation),webmd.object.exists("loc.city",a)&&"winston salem"===a.loc.city.toLowerCase()&&(a.loc.city="Winston-Salem"),$.ajax({url:webmd.substitute(d,{city:a.loc.city||"",state:a.loc.state||"",zip:a.loc.zip||""}),dataType:"json",success:function(c){c=c.data,c&&c.City&&c.State?(webmd.debug("=|=|= Location: Verify Location Info: UPDATE",c),c.City===b.loc.city&&c.State===b.loc.state&&c.Zip===b.loc.zip&&b.loc.s?$(b.settings.form[0]).trigger("location-update",a):b._update({city:c.City||"",state:c.State||"",zip:c.Zip||"",lat:c.Latitude||"",lon:c.Longitude||"",s:c.DMAId||"none"}),a.success&&a.success(c)):a.error?a.error(c):b.settings?(webmd.debug("=|=|= Location: Verify Location Info: AJAX",b.settings),b.validateField(b.settings.field)):webmd.debug("=|=|= Location: Verify Location Info: ERROR",c)},error:function(b,c,d){webmd.debug("=|=|= Location: Geocode API call failed: ",c,d,b),a&&a.error&&a.error({jqXHR:b,textStatus:c,errorThrown:d})}})}},webmd.object(c)}),define("type_ahead",function(){"use strict";var a;return a={results:[],init:function(a){webmd.debug("=+=+= Type-Ahead: Initialize",a);var b,c,d,e=this,f={name:"default",num:3,numvalid:!1,parsequery:function(a){return{q:a}},selector:".type-ahead",trigger:"keyup focus focusin",url:"/api/qrl/LookupService.ashx",dataType:"json",params:{sz:5,q:"",metadata:""}};e.settings=$.extend(f,a,!0),e.$el=$(e.settings.selector),e.results[e.settings.name]=[],$(e.settings.selector).on(e.settings.trigger+" type-ahead",function(a){$(this).val().length<1?($(this).attr("autocomplete","off"),$(this).trigger("clear-type-ahead")):"undefined"!=typeof e.query&&$(this).val().toLowerCase().length>0&&$(this).val().toLowerCase()===e.query.toLowerCase()?e.$el.trigger("results-returned",[e.settings.name,e.query,e.results[e.settings.name][e.query]]):!webmd.object.exists("settings.params.s",e)||e.query&&$(this).val().toLowerCase()===e.query.toLowerCase()?$(this).val().toLowerCase()===e.query.toLowerCase()&&$(this).siblings(".typeahead."+e.settings.name+":hidden").length>0&&e.results[e.settings.name][e.query.toLowerCase()].length>0&&($(this).siblings(".typeahead."+e.settings.name+":hidden").slideDown("fast"),$(this).siblings(".typeahead."+e.settings.name+":hidden").closest("form").find("select").css("visibility","hidden")):(e.t&&clearTimeout(e.t),$(this).val().replace(/[^a-zA-Z0-9]/g," ").length>=e.settings.num||e.settings.numvalid&&!isNaN($(this).val())&&$(this).val().length>=1?(b=e.settings.parsequery($(this).val()),e.t=setTimeout(function(){e.get(b)},500)):$(this).trigger("clear-type-ahead"))}),$(e.settings.selector).on("blur",function(){c=this,e.stay||(d=setTimeout(function(){$(c).trigger("clear-type-ahead")},500))}),$(e.settings.selector).data("key")||$(e.settings.selector).on("keydown",function(a){if(40===a.which)e.stay=!0,e.move(1);else if(38===a.which)e.stay=!0,e.move(-1);else if(27===a.which)$(this).trigger("clear-type-ahead");else if((13===a.which||32===a.which)&&$(this).siblings(".typeahead."+e.settings.name).find("a.highlight").length>0)return a.preventDefault(),e.settings.select&&e.settings.select($(this).siblings(".typeahead."+e.settings.name).find("a.highlight"),a),e.settings.special&&e.settings.special(a),!1}).attr("data-key","true")},fetch:function(a){webmd.debug("=+=+= Type-Ahead "+(this.settings.name||"uk")+": Fetch",a,this.settings);var b=this;return b.index=-1,b.request&&b.request.abort(),b.query=webmd.url.getParam("q",a),b.results[b.settings.name][b.query]?(b.render(b.results[b.settings.name][b.query]),!1):void(b.request=$.ajax({url:a,dataType:b.settings.dataType,success:function(a){a=b.parse(a),b.results[b.settings.name][b.query]||(b.results[b.settings.name][b.query]=a),b.render(a)},error:function(a,c,d){webmd.debug("=+=+= Type-Ahead "+(b.settings.name||"uk")+": API call failed: ",b.query,c,d,a),b.results[b.settings.name][b.query]=[],b.render([])}}))},get:function(a){webmd.debug("=+=+= Type-Ahead "+(this.settings.name||"uk")+": Get",a,this.settings);var b=this,c=$.extend(b.settings.params,a,!0),d=b.settings.baseurl+b.settings.url;b.settings.parseparams&&(c=b.settings.parseparams(c)),c.s?($.each(c,function(a,b){d=webmd.url.setParam(a,b,d)}),b.fetch(d)):(webmd.debug("=+=+= Type-Ahead "+(b.settings.name||"uk")+": ERROR: No source",c),b.$el.trigger("results-returned",[b.settings.name,b.query,[]]))},move:function(a){webmd.debug("=+=+= Type-Ahead: Move Selection",a,this.index);var b=this;"undefined"==typeof b.index&&(b.index=-1),b.index=b.index+a,b.index>=$(".typeahead."+b.settings.name+" li:not(.hidden) a").length?b.index=0:b.index<0&&(b.index=$(".typeahead."+b.settings.name+" li:not(.hidden) a").length-1),$(b.settings.selector).siblings(".typeahead."+b.settings.name).find("a").removeClass("highlight"),$(b.settings.selector).siblings(".typeahead."+b.settings.name).find("li:not(.hidden) a:eq("+b.index+")").addClass("highlight")},parse:function(a){webmd.debug("=+=+= Type-Ahead "+(this.settings.name||"uk")+": Parse",a);var b=this,c=a.types.length>0?a.types[0].references:[];return b.settings.parseresult&&(c=b.settings.parseresult(c)),c},render:function(a){webmd.debug("=+=+= Type-Ahead "+(this.settings.name||"uk")+": Render",a);var b=this;b.$el.trigger("results-returned",[b.settings.name,b.query,a])}},webmd.object(a)}),define(["location_validation-lite"],function(a){var b,c=webmd.object(a);return b={resultsdata:"",tries:0,init:function(a){webmd.debug("=$=$= Physician Directory Auto Search: Initialize 6/12/2014 3:00 PM",a);var b,c=this,d={id:"",specialist:"Physician",name:"pdsearch",number:2,promo:"1",toggle:!0,target:".pd-search",template:'<div class="pd-search-rr promo-{promo}"><h5><a href="//doctor.webmd.com" onclick="return sl(this,\'\',\'{metric}_logo\');"><span class="jawsonly">WebMD Physician Directory</span></a></h5><h4>{specialist}&nbsp;in<br /><span class="location"><a class="loc">{location}</a><form name="geolocation" class="hidden"><input type="text" id="{inputid}" class="location" maxlength="255" name="loc" tabindex="2" value="{fullLocation}" autocomplete="off" placeholder="Enter Zip Code or City, State" data-key="false"><input type="submit" tabindex="3" value="" /></form></span></h4><div class="promo-results"><ul></ul><div class="promo-footer"><a href="{query}" onclick="return sl(this,\'\',\'{metric}_more\');" rel="nofollow">More {specialist}</a></div></div></div>',resulttemplate:"<li{addclass}><a href=\"{url}\" onclick=\"return sl(this,'','{metric}_{i}');\">{name}</a><br />{city}, {state} {zip}</li>",metric:"pd-wdgt-nrby",css:"/webmd/consumer_assets/site_images/amd_modules/pdmodules/1/auto-search.css",url:"/api/directories/Service.svc/ProviderSearch"};webmd.debug("!!=================================",s_topic,typeof s_topic),c.sensitiveTopic(a.sensitiveOverride)?webmd.debug("=$=$= Physician Directory Auto Search: SENSITIVE TOPIC: Abort",s_topic):(c.settings||(c.settings=[]),b=$.extend(d,a,!0),c.settings[b.name]=b,c.template=c.settings[b.name].template,c.resulttemplate=c.settings[b.name].resulttemplate,c.metric=c.settings[b.name].metric,c.$el=$(c.settings[b.name].target),c.settings[b.name].promo=Math.floor(4*Math.random()+1),c.location(null,null,function(){c.get(c.settings[b.name])}))},addQuery:function(a,b){return a=this.specialty(a,b),a=webmd.url.setParam("pagesize",3*b.number,a),a=webmd.url.setParam("distance","5000",a),this.loc&&(this.loc.state&&this.loc.city&&(a=webmd.url.setParam("city",this.loc.city,a),a=webmd.url.setParam("state",this.loc.state,a)),this.loc.zip&&(a=webmd.url.setParam("zip",this.loc.zip,a))),a},distance:function(a){return parseInt(100*a,10)/100},fullName:function(a){var b="";return a.FirstName.length>0&&(b+=a.FirstName+" "),a.MiddleName.length>0&&(b+=a.MiddleName+". "),a.LastName.length>0&&(b+=a.LastName),$.each(a.Degrees,function(){b+=", "+this}),b},get:function(a,b){webmd.debug("=$=$= Physician Directory Auto Search: Get",a,a.target);var c=this,d=c.addQuery(a.url,a).replace("preview.","");c.loc?$.ajax({url:d,dataType:"json",success:function(d){webmd.debug("=$=$= Physician Directory Auto Search: Results:",d),c.submitting=!1,d=d.data,d&&d.Providers&&!b?c.render(a,d):d&&d.Providers?c.results(c.randomProviders(a,d.Providers)):(webmd.debug("=$=$= Physician Directory Auto Search: ERROR: No Results:",d),c.$el.hide())},error:function(a,b,d){webmd.debug("=$=$= Physician Directory Auto Search: ERROR: AJAX: Results",a,b,d),c.submitting=!1,c.$el.hide()}}):c.location(null,null,function(){c.get(a)})},getCSS:function(a){webmd.debug("=$=$= Physician Directory Auto Search: Get CSS",a),a.indexOf("http")<0&&(a=image_server_url+a),webmd.load({css:a})},getLocation:function(a,b){webmd.debug("=$=$= Physician Directory Auto Search: Get Location",a);var c,d=this,e={city:"New York",state:"NY",zip:"10001",lat:"",lon:"",s:501};$.ajax({url:"/api/directories/Service.svc/location",dataType:"json",success:function(f){webmd.debug("=$=$= Physician Directory Auto Search: Data",f),"fail"===f.status||""===f.data.City||""===f.data.State||""===f.data.Zip?d.location(e,a,b):(c=f.data,d.location({city:c.City,state:c.State,zip:c.Zip,lat:c.Latitude,lon:c.Longitude,s:c.DMAId},a,b))},error:function(c,f,g){webmd.debug("=$=$= Physician Directory Auto Search: ERROR: AJAX: Location",c,f,g),d.location(e,a,b)}})},location:function(a,b,c){webmd.debug("=$=$= Physician Directory Auto Search: Location",a,b);var d=this;b||(b=d.$el?d.$el.find("input[name=loc]"):$(d.settings.target).find("input[name=loc]")),a&&a.city&&a.state&&a.zip||d.loc&&d.loc.city&&d.loc.state&&d.loc.zip||!(d.tries<10)?(a&&a.city&&a.state&&a.zip&&(d.loc=a),b.val(d.loc.city+", "+d.loc.state+" "+d.loc.zip),c&&c()):(d.tries++,d.getLocation(b,c))},moreQuery:function(a,b,c){webmd.debug(c.QueryData.Specialty);var d=this;return a=d.addQuery(a,b),a=webmd.url.deleteParam("pagesize",a),a=webmd.url.deleteParam("distance",a),a=webmd.url.deleteParam("topic",a),a=webmd.url.deleteParam("sc",a),c.QueryData.Specialty&&(a=webmd.url.setParam("sd",c.QueryData.Specialty.Id,a),a=webmd.url.setParam("tname",c.QueryData.Specialty.ClinicalName,a)),a},randomProviders:function(a,b){webmd.debug("=$=$= Physician Directory Auto Search: Random Results",a,b,b.length);var c,d,e=[];if(b.length>a.number)for(d=0;d<a.number;d++)c=Math.floor(Math.random()*b.length),b[c]?(e.push(b[c]),b.splice(c,1)):d--;else e=b;return e},render:function(a,b){webmd.debug("=$=$= Physician Directory Auto Search: Render Module",a,b);var d=this,e=d.randomProviders(a,b.Providers),f={specialist:a.specialist,promo:a.promo,spid:a.id,inputid:"l-"+a.name,location:d.titleCase(d.loc.city)+", "+d.loc.state.toUpperCase(),fullLocation:d.titleCase(d.loc.city)+", "+d.loc.state.toUpperCase()+" "+d.loc.zip,zip:d.loc.zip,metric:d.metric,query:d.moreQuery(webmd.url.addLifecycleAndEnv("//doctor.webmd.com/results").replace("preview.",""),a,b)};a.css&&d.getCSS(a.css),d.$el.hide(),e.length>0&&("Physicians"!==f.specialist&&"Physician"!==f.specialist||null===b.QueryData.Specialty||(f.specialist=b.QueryData.Specialty.PracticingName),f.specialist.lastIndexOf("s")!==f.specialist.length-1&&(f.specialist+="s"),d.loc.city.length>17&&(d.loc.city.length<21?f.location=d.loc.city:f.location="Your Area"),d.sensitiveTopic()?webmd.debug("=$=$= Physician Directory Auto Search: SENSITIVE TOPIC: Abort 2",s_topic):(d.$el.append(webmd.substitute(d.template,f)),wmdPageLink(d.metric+"_"+a.promo),d.results(e),d.locModule||(d.locModule=webmd.object(c),d.locModule.init({form:d.$el.find("form"),field:d.$el.find("form .location"),metric:d.metric,mobile:d.mobile,revert:function(){a.toggle&&(d.$el.find(".location a").removeClass("hidden"),d.$el.find(".location form").addClass("hidden"))},callback:{error:function(a){d.mobile&&d.locModule.reset()}}})),d.$el.find(".location a").on("click",function(b){wmdPageLink(d.metric+"_lct"),a.toggle&&($(this).addClass("hidden"),d.$el.find("form").removeClass("hidden"))}),d.$el.find(".location form input[type=text]").on("blur",function(a){clearTimeout(d.locModule.t),d.locModule.validateField($(this).find("input[type=text]"),!1,!0)}),d.$el.find(".location form").on("submit",function(a){a.preventDefault(),d.locModule.validateField($(this).find("input[type=text]"),!1,!0)}),d.$el.find(".location form").on("location-update",function(b){webmd.debug("================================== update location!!!!!",a.name,this);var e,f=d.$el.find(".promo-footer a").attr("href");d.submitting||(d.submitting=!0,a.toggle&&$(this).addClass("hidden"),d.loc=d.locModule.loc,e=d.loc.city+", "+d.loc.state,d.loc.city.length>17&&(c=d.loc.city.length<21?d.loc.city:"Your Area"),d.$el.find(".location a").html(e).removeClass("hidden"),d.$el.find(".location input[type=text]").val(d.loc.city+", "+d.loc.state+" "+d.loc.zip),f=webmd.url.setParam("city",d.loc.city,f),f=webmd.url.setParam("state",d.loc.state,f),f=webmd.url.setParam("zip",d.loc.zip,f),d.$el.find(".promo-footer a").attr("href",f),d.get(a,!0))})))},results:function(a){webmd.debug("=$=$= Physician Directory Search: Build Results",a);var b,c,d,e=this,f=e.$el.find(".promo-results ul"),g=0,h=function(){g++,e.loc&&e.loc.city?(clearInterval(e.i),$.each(a,function(a){d=this.PracticeLocations?this.PracticeLocations[0].Profile.Location:this.Practices?this.Practices[0].Location:{City:"",State:"",Zip:""},c={i:a+1,name:e.fullName(this.Profile),distance:e.distance(this.Distance),s:1===Number(e.distance(this.Distance))?"":"s",city:this.PracticeLocations[0].Profile.Location.City,state:this.PracticeLocations[0].Profile.Location.State,zip:this.PracticeLocations[0].Profile.Location.Zip,metric:e.metric,addclass:"",url:e.url(this.Profile,this.PracticeLocations[0].Profile)},1===c.i?c.addclass=' class="first odd"':c.i%2!==0&&(c.addclass=' class="odd"'),b=webmd.substitute(e.resulttemplate,c),f.append(b)}),e.sensitiveTopic()?(webmd.debug("=$=$= Physician Directory Auto Search: SENSITIVE TOPIC: Abort 3",s_topic),e.$el.remove()):(f.find("li").on("click",function(){wmdTrack($(this).find("a").attr("onclick").split("'")[3]),window.location.href=$(this).find("a").attr("href")}),e.$el.show())):g>3&&clearInterval(e.i)};f.html(""),e.i=setInterval(h,300)},sensitiveTopic:function(a){return"undefined"!=typeof ovverride&&(this.sensitiveOverride=a),"true"!==this.sensitiveOverride&&("undefined"!=typeof s_topic&&""!==s_topic&&Number(s_topic)>6999&&Number(s_topic)<8e3)},specialty:function(a,b){return a=b.id?webmd.url.setParam("sd",b.id,a):b.condition?webmd.url.setParam("sc",b.condition,a):"undefined"!=typeof s_topic&&""!==s_topic?webmd.url.setParam("topic",s_topic,a):webmd.url.setParam("sd","37",a)},titleCase:function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},url:function(a,b){var c="https://doctor.webmd.com/doctor/";return a.FirstName.length>0&&(c+=a.FirstName.replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()),a.LastName.length>0&&(c+="-"+a.LastName.replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()),a.Degrees.length>0&&a.Degrees[0].length>0&&(c+="-"+a.Degrees[0].toLowerCase()),a.Id.length>0&&(c+="-"+a.Id.toLowerCase()),c+="-overview?lid="+b.IntId,webmd.url.addLifecycleAndEnv(c).replace("preview.","")}},webmd.object(b)});