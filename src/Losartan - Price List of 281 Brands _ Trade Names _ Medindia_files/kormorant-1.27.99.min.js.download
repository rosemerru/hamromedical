"use strict";!function(e,t){var o=o||{};o.AdUnit=function(e,o,i,n,r,s,c,d){function l(e){i.Observable.call(this),this.id=v++,this.product=e.product,this.settings=e.settings,this.templateSettings=e.templateSettings,this.closeDelay=e.closeDelay||m,this.renderOptions=e.renderOptions;var t=(e.settings||{}).ads?((e.settings.ads[0]||{}).creative||{}).diyValues:{},o=(e.settings||{}).ads?((e.settings.ads[0]||{}).creative||{}).setValues:{},n=(e.settings||{}).ads?(((e.settings.ads[0]||{}).creative||{}).payload||{}).params:{};this.mergedCreativeParams=s.extend({},t||{},o||{},n||{}),this.creativeLoad=e.creativeLoad,this.templateLoad=e.templateLoad||f,this.render=e.render,this.open=e.open,this.close=e.close,this.body=null,this.status=h.CLOSED,this.openCount=0,this.openTime=null,this.scheduledClose=!1,this.closeTimer=null,this.on(p.OPEN,function(e){this.status===h.CLOSING?this.once(p.CLOSED,this._open,this):this._open(e)},this),this.on(p.CLOSE,this._close,this),this.on(p.RENDER,this._render,this),this.on(p.SCHEDULE_CLOSE,this._scheduleClose,this),this.on(p.SHOW,this.show,this),this.on(p.HIDE,this.hide,this)}function u(e){return new l(e)}var p={LOAD:"load",LOADED:"loaded",OPEN:"open",OPENING:"opening",OPENED:"opened",CONTROLLEDOPEN:"adunit:controlledopen",SLIDINGOPEN:"slidingopen",SLIDINGOPENED:"slidingopened",CLICK:"adunit:click",CLOSE:"close",CLOSING:"closing",CLOSED:"closed",SHOW:"show",HIDE:"hide",RENDER:"render",RENDERING:"rendering",RENDERED:"rendered",SCHEDULE_CLOSE:"scheduleClose",MOUSEIN:"adunit:mousein",MOUSEOUT:"adunit:mouseout",DELEGATE:"delegate"},h={CLOSED:0,CLOSING:1,OPENING:2,OPEN:3},g={body:".vm-adunit-body"},v=1,f=function(e,t,o){n.load(e,t,o)},m=3e3,y=0;return l.prototype=new i.Observable,l.prototype.EVENT_MOUSEIN=p.MOUSEIN,l.prototype.EVENT_MOUSEOUT=p.MOUSEOUT,l.prototype.EVENT_CLICK=p.CLICK,l.prototype.EVENT_OPENED=p.OPENED,l.prototype.EVENT_CLOSED=p.CLOSED,l.prototype.EVENT_DELEGATE=p.DELEGATE,l.prototype.CONTROLLED_OPEN=p.CONTROLLEDOPEN,l.prototype.getAdConfig=function(){return this.settings},l.prototype.getAd=function(){return this.getAdConfig().ads[0]},l.prototype.getAdTemplate=function(){return this.template},l.prototype.getTemplateParams=function(){var e=this.getAdTemplate();return e?e.params:null},l.prototype.getTemplateHookParams=function(){var e=this.getAdTemplate();return e?e.hook:null},l.prototype.getDiyValues=function(){var e=this.getAd();return e.creative.diyValues||{}},l.prototype.getMergedCreativeParams=function(){return this.mergedCreativeParams||{}},l.prototype.getPosition=function(){return o.getPosition(this.outerBox)},l.prototype.getWidth=function(){return this.creative.getWidth()},l.prototype.getHeight=function(){return this.creative.getHeight()},l.prototype.getClickDelay=function(){var e=this.getDiyValues();return e.clickdelay?parseInt(e.clickdelay,10)||0:y},l.prototype.getBodyContainer=function(){return this.outerBox?this.outerBox.querySelector(g.body):null},l.prototype.saveValuesToCache=function(e,t,o){this.adUnitCache={top:parseInt(e),width:parseInt(t),height:parseInt(o)}},l.prototype.resetSize=function(){var e=this.getBodyContainer(),t=this.outerBox,o=t.getElementsByTagName("iframe")[0];this.specsForExpand.reset?t.style.top=this.specsForExpand.reset+"px":t.style.top=this.adUnitCache.top+"px",e.style.height=this.adUnitCache.height+"px",o.style.cssText="position: relative; width:"+this.adUnitCache.width+"px; height: "+this.adUnitCache.height+"px;",o.height=this.adUnitCache.height+"",o.width=this.adUnitCache.width+"",this.specsForExpand.expanded=!1},l.prototype.resizeImageAd=function(){var e=this.visibleRect.height,t=this.visibleRect.width,o=this.getBodyContainer(),i=this.outerBox,n=i.getElementsByTagName("iframe")[0];this.saveValuesToCache(i.style.top,n.width,n.height),this.specsForExpand={expanded:!0,topForExpanded:e-this.adUnitCache.height},i.style.top=this.adUnitCache.top-(e-this.adUnitCache.height)+"px",o.style.height=e+"px",n.style.cssText="position: relative; width:"+t+"px; height: "+e+"px;",n.height=e+"",n.width=t+""},l.prototype.getOpenCount=function(){return this.openCount},l.prototype.isOpen=function(){return this.status===h.OPEN||this.status===h.OPENING},l.prototype.isReady=function(){return this.status===h.OPEN},l.prototype.isResponsive=function(){if(this.template&&this.template.params&&this.template.params.responsive){var e=parseInt(this.template.params.responsive,10);return 1===e}return!1},l.prototype.isInViewport=function(){return o.isInViewport(this.outerBox)},l.prototype.cancelScheduledClose=function(){this.closeTimer&&(e.clearTimeout(this.closeTimer),this.closeTimer=null),this.scheduledClose=!1},l.prototype._render=function(){var e=this;this.fire(p.RENDERING),this.render(this,function(t){t||e.fire(p.RENDERED)})},l.prototype._open=function(e){var t=isNaN(e.data)?a.Log.viewSource.LOAD:e.data,o=this;this.status===h.CLOSED&&(this.status=h.OPENING,this.fire(p.OPENING),this.once(p.LOADED,function(e){var i=e.data;return i?(o.body=i,o.once(p.RENDERED,function(){o.open(o,t,function(e){e||(o.status=h.OPEN,o.openTime=+new Date,++o.openCount,o.registerEngagement(t),o.fire(p.OPENED,t))})}),void o.fire(p.RENDER)):void(o.status=h.CLOSED)}),this.creative?this.creative.fire(p.LOAD,this.template):this.templateLoad(this.templateSettings,this.settings,function(e,t){o.template=t,o.creative=o.creativeLoad(o),o.creative?(o.creative.connect(p.LOADED,o),o.creative.connect(p.LOAD,o),o.creative.fire(p.LOAD,t)):c.warn("Adinstance open: Failed to create creative")}))},l.prototype._close=function(e){var t=isNaN(e.data)?a.Log.closeSource.AUTO:e.data,o=this;this.status===h.OPEN&&(this.status=h.CLOSING,this.fire(p.CLOSING),this.close(this,t,function(e){e||(o.status=h.CLOSED,o.openTime=null,o.fire(p.CLOSED,t))}),this.cancelScheduledClose())},l.prototype.registerEngagement=function(o){var n=this,a=(this.settings||{}).ads?(((this.settings.ads[0]||{}).creative||{}).diyValues||{}).iframe:void 0,s=(this.settings||{}).ads?(((this.settings.ads[0]||{}).creative||{}).diyValues||{}).vast:void 0,c=this.mergedCreativeParams||{};if(a||s){var d=(((this.settings.ads[0]||{}).creative||{}).payload||{}).id;r.engagement({product:this.product,hookId:this.settings.vibrantParameters.hookId,source:o,creativeId:d})}a&&!c.disableBannerClickLogging&&function(){var o=!1,a=!1;if(this.outerBox){var s=this.outerBox.id;i.bind(this.outerBox,"mouseenter",function(){o=!0}),i.bind(this.outerBox,"mouseleave",function(){o=!1}),e.addEventListener("blur",function c(){for(var i=t.querySelectorAll(":hover"),d=0;d<i.length;d++)i[d].id===s&&(a=!0);if(o&&a){var l=101,u={product:n.product,hookId:n.settings.vibrantParameters.hookId,setId:n.settings.vibrantParameters.setId,keyword:encodeURIComponent(n.settings.term&&n.settings.term.keyword||""),source:l,timestamp:Date.now()};r.clickThrough(u,!0),e.removeEventListener("blur",c)}})}}.bind(this)()},l.prototype._scheduleClose=function(t){function o(){n.closeTimer=e.setTimeout(function(){n.fire(p.CLOSE,i)},n.closeDelay)}var i=t.data,n=this;switch(this.cancelScheduledClose(),this.status){case h.OPEN:o(),this.scheduledClose=!0;break;case h.OPENING:this.once(p.OPENED,function(){n.scheduledClose&&o()}),this.scheduledClose=!0}},l.prototype.scaleToFit=function k(e){var k=d.getBoolean("partner."+this.product+".scaletofit",!0),t=this.getHeight(),i=this.getWidth();if(k&&e&&i&&t&&!(i<=e)){var n=e/i,r=Math.floor(i*n),a=Math.floor(t*n),s=this.getBodyContainer();s&&(o.transformOrigin(s,"top left"),o.transformScale(s,n,n),s.style.height=a+"px",s.style.width=r+"px",this.creative.height=a,this.creative.width=r)}},l.prototype.show=function(){this.outerBox&&(this.outerBox.style.visibility="visible")},l.prototype.hide=function(){this.outerBox&&(this.outerBox.style.visibility="hidden")},{AdInstance:l,create:u}};var o=o||{};o.CPEUnit=function(e,o,i,n,r,s,c){function d(e,t,a){return e.VM=e.VM||{},new c(e,t,o,i,n,r,s,a)}function l(e){return{config:o,dom:i,events:n,log:r,utils:s,adInstance:e.adInstance,template:e.templateData,videoplayer:d}}function u(){var e={progressBar:{start:1,stop:2,fin:3,click:4},cpe:{click:1,close:2},launchSource:{progressBar:1,dropin:2}},t={adunit:{open:"opened",close:"closed"},cpe:{started:"cpe:started",engagement:"engagement",destroyed:"cpe:destroyed",clickThrough:"cpe:clickThrough"},mouse:{"in":"adunit:mousein",out:"adunit:mouseout",adClick:"adunit:click",click:"click"}},o="%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Cstyle%3Ebody%7Bmargin%3A0%7Diframe%7Bz-index%3A-1%3Bposition%3Aabsolute%7D.VM_progressArea%7Bposition%3Arelative%3Bcursor%3Apointer%7D.VM_progressComponents%7Bposition%3Aabsolute%3Bwidth%3Ainherit%3Bbottom%3A15px%7D.VM_progressWrapper%7Bposition%3Aabsolute%3Bheight%3A5px%3Bwidth%3A130px%3Bmargin%3Aauto%3Bbottom%3A5px%3Bright%3A2px%3Bleft%3A0%3Bcolor%3A%23090%3Bpadding-top%3A5px%3Bpadding-bottom%3A5px%7D.VM_progressContainer%7Bdisplay%3Ablock%3Bwidth%3A100%25%3Bheight%3A5px%3Bborder%3Asolid%201px%3Bborder-radius%3A25px%3B-moz-border-radius%3A25px%3B-webkit-border-radius%3A25px%3B-o-border-radius%3A25px%7D.VM_progressImage%7Bposition%3Aabsolute%3Bbottom%3A20px%3Bwidth%3Aauto%3Bheight%3Aauto%3Bmargin-left%3Aauto%3Bmargin-right%3Aauto%3Bdisplay%3Ablock%7D.VM_progressText%7Bfont-size%3A10px%3Bfont-family%3AVerdana%2Carial%2Csans-serif%3Bcolor%3A%23333%3Btext-align%3Acenter%7D.VM_progressBackground%7Bposition%3Aabsolute%3Bwidth%3Ainherit%3Bheight%3A35px%3Bbottom%3A-15px%3Bbackground-color%3A%23F0F0F0%3Bopacity%3A.8%3Bz-index%3A-1%3Bborder-radius%3A5px%3B-webkit-border-radius%3A5px%3B-o-border-radius%3A5px%3B-moz-border-radius%3A5px%7D.VM_progressBar%7Bbackground%3A%23090%3Boverflow%3Ahidden%3Bwidth%3A0%3Bheight%3Ainherit%7D.VM_progressArea_image%7Bposition%3Aabsolute%3Bz-index%3A500%3Bcursor%3Apointer%3Bvisibility%3Ahidden%7D.VM_progressBackground_image%7Bposition%3Aabsolute%3Bwidth%3Ainherit%3Bbottom%3A-15px%3Bbackground-color%3A%23F0F0F0%3Bopacity%3A.8%3Bz-index%3A-1%7D.VM_progressWrapper_image%7Bposition%3Aabsolute%3Bheight%3A15px%3Bwidth%3A130px%3Bmargin%3Aauto%3Bbottom%3A0%3Btop%3A0%3Bright%3A2px%3Bleft%3A0%3Bcolor%3A%23090%3Bpadding-top%3A5px%3Bpadding-bottom%3A5px%7D.VM_progressWrapper_inview%7Bposition%3Aabsolute%3Bheight%3A5px%3Bwidth%3A130px%3Bmargin%3Aauto%3Bbottom%3A0%3Btop%3A0%3Bright%3A2px%3Bleft%3A0%3Bcolor%3A%23090%3Bpadding-top%3A5px%3Bpadding-bottom%3A5px%7D.image-adchoice%2C.image-close%7Bposition%3Aabsolute%3Bright%3A0%3Bwidth%3A18px%3Bheight%3A18px%3Bcursor%3Apointer%3Bz-index%3A2147483646%3Bvisibility%3Avisible%7D.image-close%7Bbackground-image%3Aurl(https%3A%2F%2Fimages.intellitxt.com%2Fast%2F4c58aae9-0570-dc11-96c8-005056c00008%2Fvmxt47032%2Fclose-btn-18px.png)%3Bbottom%3A18px%7D.image-adchoice%7Bbackground-image%3Aurl(https%3A%2F%2Fimages.intellitxt.com%2Fast%2F4c58aae9-0570-dc11-96c8-005056c00008%2Fvmxt47032%2Fadchoice-btn-18px.png)%3Bbottom%3A0%7D%3C%2Fstyle%3E%0A%3C%2Fhead%3E%0A%0A%3Cbody%3E%0A%0A%20%20%20%20%3Cscript%3E%22use%20strict%22%3Bfunction%20decoration()%7Bfunction%20e(e%2Ca)%7Bvar%20n%3Ddocument.createElement(%22div%22)%2Co%3Dt%5Be%5D%2Cd%3Da.adInstance%2Cc%3Dd.outerBox.querySelector(%22.vm-adunit-body%22)%3Bif(c%26%26(c.style.backgroundColor%3D%22transparent%22)%2C%22intext%22%3D%3D%3De%26%26a.image%26%26o.splice(s%2C0%2C'%3Cimg%20id%3D%22VM_progressImage_%7Bid%7D%22%20class%3D%22VM_progressImage%22%20%20src%3D%22%7Bimage%7D%22%20%2F%3E')%2Cn.innerHTML%3Do.join(%22%5Cn%22).replace(%2F%5C%7Bid%5C%7D%2Fg%2Cd.id).replace(%2F%5C%7Bimage%5C%7D%2Fg%2Ca.image).replace(%2F%5C%7Btext%5C%7D%2Fg%2Ca.text).replace(%2F%5C%7Bheight%5C%7D%2Fg%2Ci).replace(%2F%5C%7Bwidth%5C%7D%2Fg%2Cr)%2Cn.className%3D%22VM_progressBarWrapper_%22%2Be%2Cn.style.width%3D%22100%25%22%2Cn.style.height%3Di%2B%22px%22%2C%22image%22%3D%3D%3De%7C%7C%22inview%22%3D%3D%3De)%7Bvar%20p%3Ddocument.createElement(%22iframe%22)%3Bp.className%3D%22VM_progressImageBar%22%2Cp.src%3Dparams%5Be%2B%22BarCreative%22%5D%2Cp.width%3D%22100%25%22%2Cp.height%3D%22100%25%22%2Cp.scrolling%3D%22no%22%2Cp.frameBorder%3D%220%22%2Cn.appendChild(p)%7Dreturn%20n%7Dvar%20r%3Dwindow.innerWidth%2Ci%3Dwindow.innerHeight%2Cs%3D2%2Ct%3D%7Bintext%3A%5B'%3Cdiv%20id%3D%22VM_progressArea_%7Bid%7D%22%20class%3D%22VM_progressArea%22%20style%3D%22width%3A%7Bwidth%7Dpx%3Bheight%3A%7Bheight%7Dpx%3B%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressComponents_%7Bid%7D%22%20class%3D%22VM_progressComponents%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressText_%7Bid%7D%22%20class%3D%22VM_progressText%22%3E%7Btext%7D%3C%2Fdiv%3E'%2C'%3Cdiv%20id%3D%22VM_progressBackground_%7Bid%7D%22%20class%3D%22VM_progressBackground%22%3E%3C%2Fdiv%3E'%2C%22%3C%2Fdiv%3E%22%2C'%3Cdiv%20id%3D%22VM_progressWrapper_%7Bid%7D%22%20class%3D%22VM_progressWrapper%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressContainer_%7Bid%7D%22%20class%3D%22VM_progressContainer%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressBar_%7Bid%7D%22%20class%3D%22VM_progressBar%22%3E%3C%2Fdiv%3E'%2C%22%3C%2Fdiv%3E%22%2C%22%3C%2Fdiv%3E%22%2C%22%3C%2Fdiv%3E%22%5D%2Cimage%3A%5B'%3Cdiv%20id%3D%22VM_progressArea_%7Bid%7D%22%20class%3D%22VM_progressArea_image%22%20style%3D%22width%3A%7Bwidth%7Dpx%3Bheight%3A%7Bheight%7Dpx%3B%22%3E'%2C'%3Cdiv%20class%3D%22image-close%22%3E%3C%2Fdiv%3E'%2C'%3Cdiv%20class%3D%22image-adchoice%22%3E%3C%2Fdiv%3E'%2C'%3Cdiv%20id%3D%22VM_progressComponents_%7Bid%7D%22%20class%3D%22VM_progressComponents%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressBackground_%7Bid%7D%22%20class%3D%22VM_progressBackground_image%22%20style%3D%22height%3A%7Bheight%7Dpx%3B%22%3E%3C%2Fdiv%3E'%2C%22%3C%2Fdiv%3E%22%2C'%3Cdiv%20id%3D%22VM_progressWrapper_%7Bid%7D%22%20class%3D%22VM_progressWrapper_image%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressText_%7Bid%7D%22%20class%3D%22VM_progressText%22%3E%7Btext%7D%3C%2Fdiv%3E'%2C'%3Cdiv%20id%3D%22VM_progressContainer_%7Bid%7D%22%20class%3D%22VM_progressContainer%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressBar_%7Bid%7D%22%20class%3D%22VM_progressBar%22%3E%3C%2Fdiv%3E'%2C%22%3C%2Fdiv%3E%22%2C%22%3C%2Fdiv%3E%22%2C%22%3C%2Fdiv%3E%22%5D%2Cinview%3A%5B'%3Cdiv%20id%3D%22VM_progressArea_%7Bid%7D%22%20class%3D%22VM_progressArea_image%22%20style%3D%22width%3A%7Bwidth%7Dpx%3Bheight%3A%7Bheight%7Dpx%3B%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressComponents_%7Bid%7D%22%20class%3D%22VM_progressComponents%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressBackground_%7Bid%7D%22%20class%3D%22VM_progressBackground_image%22%20style%3D%22height%3A%7Bheight%7Dpx%3B%22%3E%3C%2Fdiv%3E'%2C%22%3C%2Fdiv%3E%22%2C'%3Cdiv%20id%3D%22VM_progressWrapper_%7Bid%7D%22%20class%3D%22VM_progressWrapper_image%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressText_%7Bid%7D%22%20class%3D%22VM_progressText%22%3E%7Btext%7D%3C%2Fdiv%3E'%2C'%3Cdiv%20id%3D%22VM_progressContainer_%7Bid%7D%22%20class%3D%22VM_progressContainer%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressBar_%7Bid%7D%22%20class%3D%22VM_progressBar%22%3E%3C%2Fdiv%3E'%2C%22%3C%2Fdiv%3E%22%2C%22%3C%2Fdiv%3E%22%2C%22%3C%2Fdiv%3E%22%5D%7D%3Breturn%7Bdecorate%3Ae%7D%7Dfunction%20progress()%7Bfunction%20e(e)%7Bthis.time%3De.time%2Cthis.animating%3D!1%2Cthis.adInstance%3De.adInstance%2Cthis.product%3Dthis.adInstance.product%2Cthis.unit%3De.unit%2Cthis.progressArea%3Dthis.unit.querySelector(%22.VM_progressArea%22)%2Cthis.progressBar%3Dthis.unit.querySelector(%22.VM_progressBar%22)%2Cthis._handleEvents()%2Cdocument.body.appendChild(this.unit)%7Dfunction%20r(r)%7Breturn%20new%20e(r)%7Dvar%20i%3D16.66%2Cs%3D0%2Ct%3D100%2Ca%3D250%2Cn%3D%22http%3A%2F%2Fwww.vibrantmedia.com%2FwhatisIntelliTXT.asp%22%3Breturn%20e.prototype%3Dnew%20creativeAPI.events.Observable%2Ce.prototype.animate%3Dfunction()%7Bfunction%20e()%7Bvar%20a%3D(new%20Date).getTime()%2Cn%3DMath.round((a-s)%2Fr.time*100)%2Co%3Dr.progressBar.style.width%3Dn%2B%22%25%22%3Br.allowProgress%26%26parseInt(o%2C10)%3C%3Dt%3F(r.animating%3D!0%2CsetTimeout(e%2Ci))%3Ar.allowProgress%3F(r.allowProgress%3D!1%2Cr.animating%3D!1%2Cr.fire(%22progFin%22))%3Ar.animating%3D!1%7Dif(this.animating)return!1%3Bvar%20r%3Dthis%2Cs%3D(new%20Date).getTime()%3Be()%7D%2Ce.prototype.start%3Dfunction()%7Bthis.resetDelay%26%26clearTimeout(this.resetDelay)%2Cthis.allowProgress%3D!0%2Cthis.animate()%7D%2Ce.prototype.stop%3Dfunction()%7Bvar%20e%3Dthis%3Bthis.allowProgress%3D!1%2Cthis.resetDelay%3DsetTimeout(function()%7Be.reset()%7D%2Ca)%7D%2Ce.prototype.reset%3Dfunction()%7Bthis.progressBar.style.width%3Ds%2B%22%25%22%7D%2Ce.prototype._handleEvents%3Dfunction()%7Bfunction%20e(e)%7Blog.progressBar(%7Bproduct%3Ai.adInstance.product%2Cevent%3Ae%2ChookId%3Ai.adInstance.settings.vibrantParameters.hookId%7C%7C0%2CcreativeId%3Ai.adInstance.settings.ads%5B0%5D.creative.value%7D)%7Dfunction%20r(e)%7Bchannel.fire(%22launch%22%2C%7Bsource%3Ae%7D)%7Dvar%20i%3Dthis%2Cs%3D%7Bstart%3A1%2Cstop%3A2%2Cfin%3A3%2Cclick%3A4%7D%2Ct%3D%7BprogressBar%3A1%7D%3Bif(config.mobile%7C%7C(channel.on(%22start%22%2Cfunction()%7Bi.start()%2Ce(s.start)%7D)%2Cchannel.on(%22stop%22%2Cfunction()%7Bi.stop()%2Ce(s.stop)%7D)%2Cthis.on(%22progFin%22%2Cfunction()%7Bi.reset()%2Cr(t.progressBar)%2Ce(s.fin)%7D))%2C%22inview%22%3D%3D%3Dthis.product%7C%7C%22image%22%3D%3D%3Dthis.product)%7Bvar%20a%3Dthis.unit.querySelector(%22.VM_progressArea_image%22)%3Bchannel.on(%22start%22%2Cfunction()%7Bconfig.mobile%7C%7C(a.style.visibility%3D%22visible%22)%7D)%2Cchannel.on(%22stop%22%2Cfunction()%7Bconfig.mobile%7C%7C(a.style.visibility%3D%22hidden%22)%7D)%7Dif(channel.on(%22click%22%2Cfunction()%7Bi.stop()%2Cr(t.progressBar)%2Ce(s.click)%7D)%2Cchannel.on(%22close%22%2Cfunction()%7Bi.stop()%7D)%2CcreativeAPI.events.bind(document.body%2CDEVICE_CLICK%2Cfunction()%7Bchannel.fire(%22click%22)%7D)%2C%22image%22%3D%3D%3Dthis.product)%7Bvar%20o%3Dthis.unit.querySelector(%22.image-close%22)%2Cd%3Dthis.unit.querySelector(%22.image-adchoice%22)%3Bevents.bind(o%2CDEVICE_CLICK%2Cfunction(e)%7BcreativeAPI.events.stopPropagation(e)%2Ci.adInstance.resetDecoration%3Fi.adInstance.close()%3Ai.adInstance.fire(%22close%22)%7D)%2Cevents.bind(d%2CDEVICE_CLICK%2Cfunction(e)%7BcreativeAPI.events.stopPropagation(e)%2Ci.stop()%2Clog.adChoiceClick(%7Bproduct%3Ai.product%2ChookId%3Ai.adInstance.settings.vibrantParameters.hookId%7C%7C0%7D)%2CcreativeAPI.dom.openUrl(n)%7D)%7D%7D%2C%7Bcreate%3Ar%7D%7Dvar%20creativeAPI%3Dwindow.frameElement.creativeAPI%2Cchannel%3DcreativeAPI.channel%2Cevents%3DcreativeAPI.events%2Clog%3DcreativeAPI.log%2Cparams%3DcreativeAPI.template.params%2Cconfig%3DcreativeAPI.config%2CDEVICE_CLICK%3Dconfig.mobile%3F%22touchstart%22%3A%22click%22%3Bwindow.setTimeout(function()%7Bprogress().create(%7Btime%3AparseInt(params.progressBarTime%2C10)%7C%7C3e3%2CadInstance%3AcreativeAPI.adInstance%2Cunit%3Adecoration().decorate(creativeAPI.adInstance.product%2C%7Bimage%3Aparams.progressBarImage%7C%7C!1%2CadInstance%3AcreativeAPI.adInstance%2Ctext%3Aparams.progressBarText%3FcreativeAPI.utils.truncate(decodeURIComponent(params.progressBarText)%2C25)%3A%22Click%20Or%20Hover%20To%20Expand%22%7D)%7D)%7D%2C0)%3C%2Fscript%3E%0A%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A",i="%3C!DOCTYPE%20html%3E%3Chtml%3E%20%3Chead%3E%20%3Cstyle%3Ebody%7Bmargin%3A%200%3B%7Diframe%7Bposition%3A%20relative%3B%7Ddiv%7Bposition%3A%20absolute%3B%20margin%3A%200%3B%20top%3A%200px%3B%20left%3A%200px%3B%7D%3C%2Fstyle%3E%20%3C%2Fhead%3E%20%3Cbody%3E%20%3Cscript%3Evar%20creativeAPI%3Dwindow.frameElement.creativeAPI%3B%20var%20channel%3DcreativeAPI.channel%3B%20var%20events%3DcreativeAPI.events%3B%20var%20params%3DcreativeAPI.template.params%3B%20var%20dom%3DcreativeAPI.dom%3B%20var%20DEFAULTS%3D%7BWIDTH%3A%20320%2C%20HEIGHT%3A%2050%7D%3B%20var%20creative%3Ddom.createIFrame(%7Bwidth%3A%20DEFAULTS.WIDTH%2C%20height%3A%20DEFAULTS.HEIGHT%7D%2C%20function%20(err%2C%20iframe)%7Biframe.src%3Dparams.adhesionBarCreative%3B%7D)%3B%20var%20overlay%3Ddocument.createElement('div')%3B%20overlay.style.width%3DDEFAULTS.WIDTH%20%2B%20'px'%3B%20overlay.style.height%3DDEFAULTS.HEIGHT%20%2B%20'px'%3B%20document.body.appendChild(creative)%3B%20document.body.appendChild(overlay)%3B%20events.bind(overlay%2C%20'click'%2C%20function%20(e)%7Bevents.stopPropagation(e)%3B%20launch(1)%3B%7D)%3B%20channel.on('click'%2C%20function%20(e)%7Bevents.stopPropagation(e)%3B%20launch(1)%3B%7D)%3B%20function%20launch%20(source)%7Bchannel.fire('launch'%2C%7Bsource%3A%20source%7D)%3B%7D%3C%2Fscript%3E%20%3Cbody%3E%3C%2Fhtml%3E";return{logEvents:e,events:t,progressCreative:o,adhesionCreative:i}}function p(e,i){var n=function(n){var s,c=t.createElement("iframe");c.className=n.className||"vm_creativeComponents_iframe",c.width=n.width||"100%",c.height=n.height||"100%",c.frameBorder=0,c.scrolling="no";var d=n.api.adInstance,l=n.api.template,u=d.getAd(),p=d.getAdConfig(),h=e.extend({},{product:d.product,hookId:p.vibrantParameters.hookId,setId:p.vibrantParameters.setId,keyword:encodeURIComponent(p.term&&p.term.keyword||""),timestamp:+new Date,clickUrl:u.clickUrl,source:a.Log.clickSource.AD},u.creative.diyValues||{});d.mergedCreativeParams=e.extend({},u.creative.diyValues||{},u.creative.setValues||{},l.params);var g=e.extend({},d.mergedCreativeParams,{clickUrl:r.getUrl("clickThrough",h)});if(n.api.template.params.customSrc&&"vm_TakeOver_Wrapper"===n.className){var v={};o.apiHost&&(v.apiHost=encodeURIComponent(o.apiHost));var f="cdn.videoplayerjs",m=o.get(f,null);m&&(v.videoPlayerUrl=m),o.ipid&&(v.ipid=o.ipid),o.urlHash&&(v.urlHash=o.urlHash),o.pvu&&(v.pvu=o.pvu);var y=e.parseQueryString(g.customSrc);e.extend(y.params,v,g);var k=y.url+"?"+e.toQueryString(y.params);c.src=k}else s=i.bind(c,"load",e.once(function(){s(),c.contentWindow.contents=n.creative,c.creativeAPI=n.api||{},c.src="javascript:decodeURIComponent(window['contents'])"}));return c};return{nativeIframe:n}}function h(e,o,i){function n(t){return t.api.channel=new e.Observable,new r(t)}var r=function(e){this.options=e,this.creativeAPI=e.api,this.events(),this.takeover=i.nativeIframe({className:"vm_TakeOver_Wrapper",width:"100%",height:"100%",creative:e.creative,api:e.api})};return r.prototype.launch=function(){this.creativeAPI.adInstance.companion=this.takeover,t.body.appendChild(this.takeover)},r.prototype.destroy=function(){delete this.creativeAPI.adInstance.companion,this.takeover.parentNode.removeChild(this.takeover)},r.prototype.events=function(){var e=this,t=this.creativeAPI.channel,i=this.options.adInstance,n=i.product,r=i.settings.vibrantParameters.hookId,a=i.settings.ads[0].creative.value;t.on("open",function(){e.openTime=+new Date,i.fire("engagement"),o.engagement({product:n,hookId:r,source:e.options.source,creativeId:a})}),t.on("close",function(){e.destroy(),o.cpeClose({product:n,hookId:r,dwell:+new Date-e.openTime,creativeId:a})})},{create:n,Takeover:r}}function g(e,o,i,n){function r(e,i,n){o.Observable.call(this);var r=this;this.options=e,this.adInstance=e.adInstance,this.launchCallback=n,this.product=e.adInstance.product,this.wrapper=t.createElement("wrapper"),this.wrapper.className="vm_creativeComponents_progressWrapper",this.width=e.width,this.height=e.height,"image"!==this.product&&"inview"!==this.product||(this.width=this.adInstance.settings.container.width,"image"===this.product&&e.scaleToHeight&&(this.height=this.adInstance.settings.container.height)),this.adInstanceSetup(),this.channelEvents(),setTimeout(function(){i({element:r.wrapper,width:r.width,height:r.height})},1)}function a(t,i,n){var a=t.params,c=t.adInstance.product;return t.api.channel=new o.Observable,t.width="adhesion"===c?s.ADHESION_WIDTH:parseInt(a.intextBarWidth,10)||s.WIDTH,t.height=parseInt(a[c+"BarHeight"],10)||s[c.toUpperCase()+"_HEIGHT"],t.scaleToHeight=a.imageScaleToHeight||!1,t.decoration=e.extend({},{type:"cpeProgressBar",settings:{}},t.params.decoration),new r(t,i,n)}var s={WIDTH:150,ADHESION_WIDTH:320,ADHESION_HEIGHT:50,INTEXT_HEIGHT:35,IMAGE_HEIGHT:70,INVIEW_HEIGHT:100},c=150;return r.prototype=new o.Observable,r.prototype.channelEvents=function(){var t=this.options.api.channel,i=n.events.mouse,r=n.events.adunit,a=e.debounce(function(){t.fire("start")},c),s=e.debounce(function(){t.fire("stop")},c),d=e.debounce(function(e){e instanceof Event?o.stopPropagation(e):e&&e.event instanceof Event&&o.stopPropagation(e.event),t.fire("click")},c);"intext"===this.product&&this.adInstance.on(r.open,a),this.adInstance.on(r.close,s),this.adInstance.on(i["in"],a),this.adInstance.on(i.out,s),this.adInstance.on("delegate",function(e){"hover"===e.data.triggerSource?a():"click"===e.data.triggerSource&&d()}),this.adInstance.connect(i.adClick,this,i.click),this.on(i.click,d)},r.prototype.adInstanceSetup=function(){function e(){n.on("launch",function(e){o.launchCallback(e.data.source)}),o.progressFrame=i.nativeIframe({className:"vm_creativeComponents_progressBar",width:o.width,height:o.height,creative:o.options.progressCreative,api:o.options.api}),o.wrapper.appendChild(o.progressFrame)}function t(){o.options.api.channel.unbindAll(),o.progressFrame.parentNode.removeChild(o.progressFrame)}var o=this,n=this.options.api.channel;this.adInstance.on("opened",e),this.adInstance.on("closed",t)},{create:a,Progress:r}}function v(e,o){var i=function(i,n,r){var a=i.adInstance,s=e.debounce(function(){r(o.logEvents.launchSource.dropin)},250);a.resetDecoration&&a.resetDecoration({decorationType:"cpeDropIn"}),a.on(o.events.mouse.click,s),a.on(o.events.mouse["in"],s),a.on("delegate",function(e){"click"===e.data.triggerSource&&s()}),n({element:t.createElement("div"),width:0,height:0})};return{spawn:i}}function f(e,t){m=u(),y=p(s,n),b=g(s,n,y,m),w=v(s,m);var i=e.adInstance,a=e.templateData,c=a.params;i.setBehaviour&&i.setBehaviour("clickThrough",!1);var d=function(t){if(k=h(n,r,y),!t)throw r.auditError({message:"source not defined"});"intext"===i.product&&setTimeout(function(){i.fire("close")},1),k.create({creative:a.template,adInstance:i,source:t,api:l(e)}).launch()};if("adhesion"!==i.product&&"intext"!==i.product||"desktop"===o.platform||(c.progressBar=!1),c.progressBar){var f;f=c.progressCreative?c.progressCreative:"adhesion"===i.product?m.adhesionCreative:m.progressCreative,b.create({progressCreative:f,params:c,adInstance:i,api:l(e)},t,d)}else w.spawn({adInstance:i},t,d)}var m,y,k,b,w;return{load:f}};var o=o||{};o.Creative=function(e,t){function o(){e.Observable.call(this);var t=this;this.on(n.LOAD,function(e){t.load(e)},this)}function i(e){return t.extend(new o,e)}var n={LOADED:"loaded",LOAD:"load"};return o.prototype=new e.Observable,o.prototype.getWidth=function(){return this.width},o.prototype.getHeight=function(){return this.height},o.prototype.load=function(){throw new Error("not implemented")},{CreativeInterface:o,create:i}};var o=o||{};o.CustomUnit=function(e,o,i,n,r,s,c){function d(e,t,a){return e.VM=e.VM||{},new c(e,t,o,i,n,r,s,a)}function l(e,t,o){var i=s.debounce(function(){t.fire("start")},p),r=s.debounce(function(){t.fire("stop")},p),c=e.getDiyValues().nohookclick||!1,d=s.debounce(function(o,i){var r;i===a.Log.clickSource.HOOK&&c||(r=e.getClickDelay(),o instanceof Event?n.stopPropagation(o):o&&o.event instanceof Event&&n.stopPropagation(o.event),s.timeDeltaPassed(e.openTime,r,function(){t.fire("click")}))},p);e.on(e.EVENT_OPENED,i),e.on(e.EVENT_MOUSEIN,i),e.on(e.EVENT_CLOSED,r),e.on(e.EVENT_MOUSEOUT,r),e.on(e.EVENT_CLICK,function(e){var t=e.data instanceof MouseEvent?e.data:e.data.event,o=t.target.className===h?a.Log.clickSource.HOOK:a.Log.clickSource.AD;d(t,o)}),e.on(e.EVENT_CLOSED,function(){t.unbindAll(),o.parentNode&&o.parentNode.removeChild(o)}),e.on(e.EVENT_DELEGATE,function(e){"hover"===e.data.triggerSource?i():"click"===e.data.triggerSource&&d()})}function u(c,u){var p=c.adInstance,h=c.templateData,g=c.channel||new n.Observable,v=p.getAd(),f=p.getAdConfig(),m=s.extend({},{product:p.product,hookId:f.vibrantParameters.hookId,setId:f.vibrantParameters.setId,keyword:encodeURIComponent(f.term&&f.term.keyword||""),timestamp:+new Date,clickUrl:v.clickUrl,source:a.Log.clickSource.AD},v.creative.diyValues||{});p.mergedCreativeParams=s.extend({},v.creative.diyValues||{},v.creative.setValues||{},h.params);var y=s.extend({},p.mergedCreativeParams,{clickUrl:r.getUrl("clickThrough",m)}),k=p.isResponsive(),b=k?{}:{width:y.width,height:y.height},w=i.createIFrame(b,function(a,c){var u="";try{u=decodeURIComponent(h.template)}catch(a){console.log("decodeURIComponent failed:"+a)}if(y.customSrc){var v={};o.apiHost&&(v.apiHost=encodeURIComponent(o.apiHost));var f="cdn.videoplayerjs",m=o.get(f,null);m&&(v.videoPlayerUrl=m),o.ipid&&(v.ipid=o.ipid),o.urlHash&&(v.urlHash=o.urlHash),o.pvu&&(v.pvu=o.pvu);var k=s.parseQueryString(y.customSrc);s.extend(k.params,v,y);var b=k.url+"?"+s.toQueryString(k.params);c.src=b}else c.creativeAPI={adInstance:p,channel:g,config:o,dom:i,events:n,log:r,utils:s,videoplayer:d,template:{id:h.id,params:y,template:h.template},window:e,document:t},c.contentWindow.contents=u,c.src="javascript:window['contents']";l(p,g,c)});u({width:y.width,height:y.height,element:w})}var p=100,h="vm-hook";return{load:u}};var o=o||{};o.Decoration=function(e,t,o,i,n,s,c){function d(e){return k[e]||k.standard}function l(e,t,o){return"inview"===t&&(o="inview"),y.hasOwnProperty(o)?e.style.zIndex=y[o]:e.style.zIndex=y.fallback,e}function u(e,i){var n,a,s,c,u=t.createElement("div");i=i||{},i.settings=i.settings||e.settings;var g=d(i.decorationType);if(g){g=g.replace(/\{id\}/g,e.id);var m=r.LanguageMap().map["default"].adChoicesText,y=r.LanguageMap().map["default"].hdrText;if(o){var k=o.get("geo",{});if(k&&k.cc){"de"===k.cc&&(f=v),"uk"===k.cc&&(f=h);var b=r.LanguageMap().map[k.cc];b&&b.adChoicesText&&(m=b.adChoicesText),b&&b.hdrText&&(y=b.hdrText)}}g=g.replace(/\{adChoicesText\}/g,m),g=g.replace(/\{hdrText\}/g,y)}return u.innerHTML=g,c=u.firstChild,n=c.querySelectorAll(".vm-adunit-close, .vm-inview-close"),a=c.querySelector(".vm-adunit-adchoice"),s=c.querySelector(".vm-adunit-body"),s.appendChild(e.body),c=l(c,i.decorationType,e.product),e.outerBox=e.position.placeOuterBox(e,c),e=p(e,{outerBox:c,adunitClose:n,adunitAdChoice:a})}function p(e,t){return i.bindConnect(t.outerBox,"mouseenter",e,e.EVENT_MOUSEIN),i.bindConnect(t.outerBox,"mouseleave",e,e.EVENT_MOUSEOUT),s.isEmpty(t.adunitClose)||s.forEach(t.adunitClose,function(t){i.bind(t,"click",function(t){i.stopPropagation(t),e.fire("close",a.Log.closeSource.AD)})}),t.adunitAdChoice&&i.bind(t.adunitAdChoice,"click",function(t){i.stopPropagation(t),c.adChoiceClick({product:e.product,hookId:e.settings.vibrantParameters.hookId}),n.openUrl(f)}),e}var h="https://www.vibrantmedia.com/en/whats-intellitxt/",g="https://www.vibrantmedia.com/whats-intellitxt/",v="https://www.vibrantmedia.com/de/whats-intellitxt/",f=g,m=o.getBoolean("partner.inview.headerclose",!1),y={intext:o.getInteger("partner.intext.zindex",5999999),image:o.getInteger("partner.image.zindex",1999999),daw:o.getInteger("partner.daw.zindex",5e6),adhesion:o.getInteger("partner.adhesion.zindex",5e6),adbar:o.getInteger("partner.adbar.zindex",5e6),inline:o.getInteger("partner.inline.zindex",4999),inview:o.getInteger("partner.inview.zindex",4999),fallback:o.getInteger("partner.fallback.zindex",1e6)},k={standard:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer">','<div class="vm-adunit-close vm-close-top"></div>','<div class="vm-adunit-adchoice vm-adchoice-top"></div>','<div id="vm-adunit-inner-{id}" class="vm-adunit-inner">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-head-{id}" class="vm-adunit-head"></div>','<div id="vm-adunit-body-{id}" class="vm-adunit-body vm-adunit-loading">',"</div>",'<div id="vm-adunit-foot-{id}" class="vm-adunit-foot"></div>',"</div>","</div>","</div>"].join("\n"),legacyadhesion:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer legacyadhesion">','<div class="vm-adunit-close" style="background-position: -60px 0px;"></div>','<div class="vm-adunit-adchoice vm-adchoice-top"></div>','<div id="vm-adunit-inner-{id}" class="vm-adunit-inner">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-head-{id}" class="vm-adunit-head"></div>','<div id="vm-adunit-body-{id}" class="vm-adunit-body vm-adunit-loading">',"</div>",'<div id="vm-adunit-foot-{id}" class="vm-adunit-foot"></div>',"</div>","</div>","</div>"].join("\n"),image:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer">','<div class="vm-adunit-close vm-close-base"></div>','<div class="vm-adunit-adchoice vm-adchoice-base"></div>','<div id="vm-adunit-inner-{id}" class="vm-adunit-inner vm-no-shadow">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-head-{id}" class="vm-adunit-head"></div>','<div id="vm-adunit-body-{id}" class="vm-adunit-body vm-body-clear">',"</div>",'<div id="vm-adunit-foot-{id}" class="vm-adunit-foot"></div>',"</div>","</div>","</div>"].join("\n"),
cpeProgressBar:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer">','<div id="vm-adunit-inner-{id}">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-head-{id}" class="vm-adunit-head"></div>','<div id="vm-adunit-body-{id}" class="vm-adunit-body"></div>','<div id="vm-adunit-foot-{id}" class="vm-adunit-foot"></div>',"</div>","</div>","</div>"].join("\n"),cpeDropIn:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer" style="display: none">','<div id="vm-adunit-inner-{id}">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-head-{id}" class="vm-adunit-head"></div>','<div id="vm-adunit-body-{id}" class="vm-adunit-body"></div>','<div id="vm-adunit-foot-{id}" class="vm-adunit-foot"></div>',"</div>","</div>","</div>"].join("\n"),chrome:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer">','<div id="vm-tt-header-{id}" class="vm-tt-header" style="height: 30px;">','<div class="vm-tt-sprite-header">','<div class="vm-tt-sprite12-tlc vm-tt-sprite12"></div>','<div class="vm-tt-sprite12-tm vm-tt-sprite12"></div>','<div class="vm-tt-sprite12-trc vm-tt-sprite12"></div>',"</div>",'<div class="vm-tt-hdr-lft">','<a target="_blank" class="vm-tt-vmlogo-a">','<div class="vm-tt-vmlogo12"></div>',"</a>",'<div class="vm-tt-priv12 vm-adunit-adchoice" style="display: block;">','<div class="vm-tt-adchoices12"></div>','<div class="vm-tt-adchoices12-txt">{adChoicesText}</div>',"</div>","</div>",'<div class=" vm-tt-hdr-rt">','<div class="vm-adunit-close" style="background-position: -60px 0px;"></div>',"</div>","</div>",'<div style="background-color: rgb(240, 240, 240);" class="vm-tt-content-bg">','<div class="vm-tt-sprite12-lft-edge" style="display: block;"></div>','<div class="vm-tt-sprite12-rt-edge" style="display: block;"></div>',"</div>",'<div id="vm-adunit-inner-{id}" class="vm-adunit-inner" style="padding-left: 5px;padding-right: 5px;padding-top: 30px;">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-head-{id}" class="vm-adunit-head"></div>','<div id="vm-adunit-body-{id}" class="vm-adunit-body vm-adunit-loading">',"</div>",'<div id="vm-adunit-foot-{id}" class="vm-adunit-foot"></div>',"</div>","</div>",'<div id="vm-tt-footer" style="width: 100%; height: 6px; background-color: transparent;">','<div class="vm-tt-footer12">','<div class="vm-tt-footer12-left vm-tt-sprite12"></div>','<div class="vm-tt-footer12-mid vm-tt-sprite12"></div>','<div class="vm-tt-footer12-right vm-tt-sprite12"></div>',"</div>","</div>","</div>"].join("\n"),inview:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer vm-inview">','<div class="vm-inview-header '+(m?"vm-inview-close":"")+'">',"{hdrText}",'<div class="vm-adunit-close">','<div class="vm-close-icon"></div>',"</div>","</div>",'<div id="vm-adunit-inner-{id}" class="vm-adunit-inner">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-body-{id}" class="vm-adunit-body">',"</div>","</div>","</div>",'<div class="vm-inview-footer">','<div class="vm-adunit-adchoice"></div>','<div class="vm-inview-poweredby"></div>',"</div>","</div>"].join("\n"),instory:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer vm-instory">','<div class="vm-instory-header '+(m?"vm-instory-close":"")+'">',"{hdrText}",'<div class="vm-adunit-close">','<div class="vm-close-icon"></div>',"</div>","</div>",'<div id="vm-adunit-inner-{id}" class="vm-adunit-inner">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-body-{id}" class="vm-adunit-body">',"</div>","</div>","</div>",'<div class="vm-instory-footer">','<div class="vm-adunit-adchoice"></div>','<div class="vm-instory-poweredby"></div>',"</div>","</div>"].join("\n")};return{decorate:u}};var o=o||{};o.Position=function(e,t,o,n,r,s){function c(e){this.positionFunc=e}function d(e,t){this.position=e,this.animate=t.animate,this.controlledOpen=t.controlledOpen,this.animationTime=500}function l(e,t){if(this.element=e,this.openTransitionEnabled=!0,this.closeTransitionEnabled=!0,this.useSimpleElement=!1,t&&t.get("partner.inline",null)){var o=t.get("partner.inline");o&&(this.useSimpleElement=o.getBoolean("usesimpleelement",!1))}}function u(e){this.hook=e,this.openTransitionEnabled=!0,this.closeTransitionEnabled=!0}function p(e){this.hook=e}var h=100,g=300,v="-9999px",f=60;return c.prototype.placeOuterBox=function(o,i){var a=this;i.className+=" vm-adunit-absolute",i.style.top=v,i.style.left=v,i.style.visibility="hidden",i.style.opacity=0;var s=i.querySelector(".vm-adunit-body");s.style.width=o.getWidth()+"px",s.style.height=o.getHeight()+"px";var c=r.debounce(function(){var e=a.positionFunc();o.specsForExpand&&o.specsForExpand.expanded?(o.specsForExpand.reset=e.top,i.style.top=e.top-o.specsForExpand.topForExpanded+"px"):i.style.top=e.top+"px",i.style.left=e.left+"px"},h,{leading:!0});return o.once("opened",function(){i=t.body.appendChild(i),c(),a.unbindResizeEvent=n.bind(e,"resize",c),o.on("domChange",c),i.style.visibility="visible",i.style.opacity=1}),o.once("closing",function(){a.unbindResizeEvent&&(a.unbindResizeEvent(),delete a.unbindResizeEvent),o.unbind("domChange",c),i.style.visibility="hidden",i.style.opacity=0}),o.once("closed",function(){i.style.top=v,i.style.left=v,t.body.removeChild(i)}),i},d.prototype.placeOuterBox=function(i,n){var a,s=this;n.className+=" vm-adunit-fixed",n.style.top=v,n.style.left=v,n.style.bottom="",n.style.right="",n.style.visibility="hidden",n.style.opacity=0;var c=n.querySelector(".vm-adunit-body");return c.style.width=i.getWidth()+"px",c.style.height=i.getHeight()+"px",i.once("opened",function(){function c(){s.animate?(a=o.getStyle(n).height,n.style.bottom="-"+a,n.style.visibility="visible",n.style.opacity=1,e.setTimeout(function(){n.className+=" vm-adunit-fixed-animate",n.style.bottom="0px"},s.animationTime)):(n.style.visibility="visible",n.style.opacity=1)}r.forEach(["top","left","bottom","right"],function(e){s.position.hasOwnProperty(e)?n.style[e]=s.position[e]+"px":n.style[e]=""}),""===n.style.left&&""===n.style.right&&(n.style.left="50%",n.style.marginLeft=-i.getWidth()/2+"px"),n=t.body.appendChild(n),s.controlledOpen?i.on(i.CONTROLLED_OPEN,c):c()}),i.once("closing",function(){s.animate?n.style.bottom="-"+a:(n.style.visibility="hidden",n.style.opacity=0)}),i.once("closed",function(){s.animate?e.setTimeout(function(){n.style.visibility="hidden",n.style.top=v,n.style.left=v,t.body.removeChild(n)},s.animationTime):(n.style.top=v,n.style.left=v,t.body.removeChild(n))}),n},l.prototype.placeOuterBox=function(t,o){function i(){o.style.maxHeight="500px",s.fire(a.app.inline.animationEnd),c&&(o.style.height="100%",d.style.height="100%")}var c=t.isResponsive();o=this.useSimpleElement?this.element.appendChild(o):this.element.parentNode.insertBefore(o,this.element.nextSibling);var d=o.querySelector(".vm-adunit-body");return s.fire(a.app.inline.animationStart),o.className+=" vm-adunit-inline",c?(o.style.width="100%",d.style.width="100%"):(o.style.width=t.getWidth()+"px",d.style.width=t.getWidth()+"px"),this.openTransitionEnabled?(o.style.maxHeight="0px",e.setTimeout(i,1)):i(),n.bind(e,"scroll",function(){i()}),t.once("closed",function(){var t,i=r.once(function(){t&&t(),o.parentNode.removeChild(o)});this.closeTransitionEnabled?(o.style.maxHeight="0px",r.isIE?e.setTimeout(i,g):t=n.bind(o,"transitionend",i)):i()},this),o},u.prototype.placeOuterBox=function(t,i){function c(){l&&l(),s.fire(a.app.inview.animationEnd)}function d(){var e=o.getPosition(p),t=u.hook.getParagraphPosition();i.style.top=e.bottom-e.top+"px",i.style.left=t.left-e.left+"px";var n=t.right-t.left;i.style.width=n+"px",i.style.setProperty("max-width",n+"px","important")}var l,u=this,p=this.hook.getDomNode(),h=t.getHeight()+f,v=i.querySelector(".vm-adunit-body"),m=300;s.fire(a.app.inview.animationStart),r.isIE?e.setTimeout(c,g):l=n.bind(i,"transitionend",c);var y=" vm-hook-inview";return p&&p.className.indexOf(y)===-1&&(p.className+=y),i.className+=" vm-adunit-inview",v.style.width=t.getWidth()+"px",v.style.height=t.getHeight()+"px",i.style.maxHeight="0px",p.style.setProperty("margin-bottom","0px","important"),e.setTimeout(function(){h=t.getHeight()+f,i.style.maxHeight=h+"px",p.style.setProperty("margin-bottom",h+"px","important")},1),n.bind(e,"resize",r.debounce(function(){d()}),m),d(),t.once("closed",function(){var t;s.fire(a.app.inview.animationStart);var o=r.once(function(){t&&t(),s.fire(a.app.inview.animationEnd),i.parentNode.removeChild(i)});i.style.maxHeight="0px",p.style.marginBottom="0px",r.isIE?e.setTimeout(o,g):t=n.bind(i,"transitionend",o)},this),p.appendChild(i)},p.prototype.placeOuterBox=function(t,c){function d(){var e;if(t.body)try{if(e=t.body.contentDocument){var o=e.body?e.body.clientHeight:0;if(o){k=o+p,t.body.setAttribute("height",k.toString()),t.body.style.height=k+"px";var i=t.getBodyContainer();i&&(i.style.height=k+"px"),x=!0}}}catch(n){e=null}}function l(e){var i,n,r=x?k:t.getHeight(),a=r+p+h;if("instory"===C){var s=o.getPosition(m),d=u.hook.getParagraphPosition();c.style.top=s.bottom-s.top+"px",c.style.left=d.left-s.left+"px",c.style.position="absolute",c.style.width=d.right-d.left+"px",i=s.bottom-o.getScrollY(),n=f(c,a,i),n=e?Math.min(n,e):n,n=n>v?n:0,u.hook.hidden?m.style.marginBottom=0:m.style.marginBottom=n+"px"}else{var l,g=u.hook.getDomNode(),y=o.getPosition(g),w="SimpleElementNode"===u.hook.constructor.name;l=w?y.top-o.getScrollY():y.bottom-o.getScrollY(),c.style.top=0,c.style.left=0,c.style.position="static",n=f(c,a,l),n=e?Math.min(n,e):n,n=n>v?n:0,m.style.marginBottom=0}c.style.height=n+"px";var I=o.getAbsoluteViewport(),A=I.bottom-I.top,D=Math.min(A,a),O=o.pixelHeightInViewport(c),S=D>0?Math.round(100*O/D):0;t.fire("slidingopen",S),S>90&&E(),b.style.width=t.getWidth()+"px"}var u=this,p=10,h=55,v=10,f=i.InstoryHeightCalc(o),m=this.hook.getDomNode(),y=t.getHeight()+p,k=0,b=c.querySelector(".vm-adunit-body"),w=300,C=t.product,E=r.once(function(){t.fire("slidingopened")}),I=" vm-hook-instory";m&&m.className.indexOf(I)===-1&&(m.className+=I),c.className+=" vm-adunit-instory";var x=!1;if(n.bind(e,"resize",r.debounce(function(){l()}),w),n.bind(c,"mouseenter",function(){c.setAttribute("data-mouse","in"),l()}),n.bind(c,"click",function(){c.setAttribute("data-mouse","in"),l()}),n.bind(e,"scroll",function(){l()}),l(),t.on("resize",function(){l()}),t.on("contentLoaded",function(){d(),l(y+h)}),t.once("closed",function(){var t;s.fire(a.app.inview.animationStart);var o=r.once(function(){t&&t(),s.fire(a.app.inview.animationEnd),c.parentNode.removeChild(c)});c.style.maxHeight="0px",m.style.marginBottom="0px",u.hook.hidden=!0,r.isIE?e.setTimeout(o,g):t=n.bind(c,"transitionend",o)},this),"inline"===C){var A="SimpleElementNode"===u.hook.constructor.name;if(A)m.appendChild(c);else{var D=u.hook.getDomNode();D&&D.parentNode.insertBefore(c,D.nextSibling)}}else m.appendChild(c);return c},{Absolute:c,Fixed:d,Inline:l,Inview:u,Instory:p}};var o=o||{};o.Template=function(t,o){function i(e){this.id=e.id,this.params=e.params||{},this.hook=e.hook||{},this.template=e.template||""}function n(e,o,n){var s,c;"undefined"!=typeof a[e.id]?(c=a[e.id].clone(),n(null,c)):"c2s"===o.ads[0].creative.creativeType?(s=new i({id:e.id,params:{c2s:!0}}),c=s.clone(),n(null,c)):o.ads[0].creative.payload?(s=new i(o.ads[0].creative.payload),a[e.id]=s,c=s.clone(),n(null,c)):t.jsonp({scope:r,url:e.cdnUrl,id:e.id}).on("data",function(t){var o=t.data,r=new i(o);a[e.id]=r,c=r.clone(),n(null,c)})}var r="template",a={};return i.prototype.clone=function(){var e={id:this.id,params:{},hook:{},template:this.template};return this.params&&(e.params=o.extend({},this.params)),this.hook&&(e.hook=o.extend({},this.hook)),new i(e)},i.prototype.execute=function(t){return t=o.extend({},this.params,t||{},{source:e.location,timestamp:+new Date,creativeId:this.id}),o.replaceUrlParams(this.template,t)},{CachedTemplate:i,load:n}};var o=o||{};o.VideoUnit=function(e,t,o,i,n,r,a,s){function c(e,t,s,c){var d=u({config:o,dom:i,events:n,log:r,utils:a});return"function"==typeof t&&"undefined"==typeof c&&(c=s,s=t),"videoFrame"===c?d.videoFrame.create(e,s):d.player.create(e,t,s)}function d(o){var i=t.head||t.getElementsByTagName("head")[0],n=t.createElement("script");e.VM.videoplayer=e.VM.videoplayer||{},e.VM.videoplayer.settings=s,e.VM.videoplayer.initialise=o,n.type="text/javascript",n.async=!0,n.src=v,i.appendChild(n),p=!0}function l(e,t,o,i){u?c(e,t,o,i):(h.push({args:e,id:t,callback:o,unit:i}),p||d(function(e){u=e,a.forEach(h,function(e){c(e.args,e.id,e.callback,e.unit)}),p=!1,h=[]}))}var u,p=!1,h=[],g=o.get("cdn.videoplayerjs",null),v="//"+g;return s=null,s&&s.keyVersion&&(s={activePlayer:"jwPlayer",jwPlayer:{url:"images.intellitxt.com/k/jwplayer/8.2.2",keyVersion:8}}),s=s||o.get("videoPlayerSettings",null),g?s?{load:l}:void console.log("Video player settings are not defined"):void console.log("Video player URL is not defined")};var i=i||{};i.AdBarLegacy=function(e,o,i){function n(){var o=t.createElement("div");o.id=a,o.setAttribute("data-adtech",""),t.body.appendChild(o),e.ADTECH=e.ADTECH||{},i.appendScript(s,function(){e.ADTECH.loadAd&&e.ADTECH.loadAd({protocol:e.location.protocol.split(":")[0],server:"adserver.adtech.de",network:"82.0",placement:a})})}function r(){a&&n()}var a=o.getInteger("partner.adbar.cuid",!1),s="//aka-cdn-ns.adtech.de/dt/common/DACLoader.js";return r};var i=i||{};i.AdBar=function(e,o,i,n,r,s,c){function d(){}var l=1,u="adbar",p=480,h=270,g=i.getInteger("partner.adbar.width",p),v=i.getInteger("partner.adbar.height",h),f=i.get("partner.adbar.position",!1),m="standard";return d.prototype=new r.Observable,d.prototype.invoke=function(r){function d(e){var t=n.waterfall.select(e,"adbar",m);return m=t.decoration,t.creative}function p(e,t){var i={bottom:0},n=e.template.params,r=e.getAd(),a=r.creative.diyValues||{};f&&!n.scaleToWidth&&(i[f]=10),e.position=new o.position.Fixed(i,{animate:!0,controlledOpen:!!a.controlledOpen}),t(null,e)}function h(e,t,i){function n(){s.adImpression({product:e.product,hookId:e.settings.vibrantParameters.hookId,setId:e.settings.vibrantParameters.setId,source:t})}var r=e.getAd(),a=r.creative.diyValues||{};e=o.decoration.decorate(e,{decorationType:m}),a.controlledOpen?e.on(e.CONTROLLED_OPEN,n):n(),i()}function y(e,t,o){s.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||a.Log.closeSource.AUTO}),o()}var k=t.body.clientWidth,b=k>=g?g:k;e.request(u,{ids:[l+":"+b+":"+v],count:1},function(e){var t,n;e.hasOwnProperty(l)&&(n=e[l][0],n.container={width:k},t=o.adunit.create({product:u,settings:n,templateSettings:{cdnUrl:"//"+i.cdn.internal,id:n.ads[0].creative.value},creativeLoad:d,render:p,open:h,close:y}),s.hookLoad({product:u,hookIds:n.vibrantParameters.hookId}),c.track(t,n.trackers,n.term),t.connect("opened",t,"impression"),t.connect(t.EVENT_CLICK,t,"click"),t.fire("open",r.viewSource))})},d};var i=i||{};i.AdhesionBackfill=function(e,t,o,i,n){function r(e){o.Observable.call(this),this.fetchFormat=e.fetchFormat}var a=1,s=n.getBoolean("partner.adhesion.refresh",!0),c=n.getInteger("partner.adhesion.refreshtime",3e4),d=1500,l=!0;return r.prototype=new o.Observable,r.prototype.invoke=function(t){function o(){l=!1}var n=this;l&&(e.request("adhesion",{ids:[i.replaceUrlParams(n.fetchFormat,{id:a})],count:1},function(e){e.hasOwnProperty(a)&&n.fire("adsReady",{ads:e[a][0],product:"adhesion",viewSource:t.viewSource,disableAdCallback:o,refresh:{enabled:s,interval:c,delay:d}})}),t.forceFlush&&e.forceFlush())},r};var i=i||{};i.AdhesionPlacement=function(t,o,i,n,r,s,c,d){function l(){r.Observable.call(this);var e=this;this.isUserTouchingTheScreen=!1;var t=d.debounce(function(t){u&&!e.isUserTouchingTheScreen&&u.fire(f,t&&t.data||{})},p,{leading:!1});this.on(a.app.trigger.resize,t),this.on(a.app.trigger.zoom,t),this.on(a.app.trigger.scroll,t),this.on(a.app.trigger.touchend,function(o){e.isUserTouchingTheScreen=!1,setTimeout(function(){t(o)},p)}),this.on(a.app.trigger.touchstart,function(t){e.isUserTouchingTheScreen=!0,u&&!u.outerBox.contains(t.data.target)&&setTimeout(function(){u.fire(m)},h)})}var u,p=250,h=80,g=!0,v="standard",f="redraw",m="hide";return l.prototype=new r.Observable,l.prototype.invoke=function(d){function l(t,o,i){o===a.Log.closeSource.AD&&(g=!1,d.disableAdCallback&&d.disableAdCallback()),o===a.Log.closeSource.FORCE&&d.disableAdCallback&&d.disableAdCallback(),s.adClose({product:w,hookId:t.settings.vibrantParameters.hookId,source:o||a.Log.closeSource.AUTO}),E.enabled&&o===a.Log.closeSource.AUTO&&e.setTimeout(function(){I.fire("fetchAd",{viewSource:d.viewSource,forceFlush:!0})},E.delay),i()}function p(e,o){e.position=new t.position.Fixed({bottom:0,left:0},{animate:!0}),o(null,e)}function h(o,i,a){if(g){o=t.decoration.decorate(o,{decorationType:v});var c=o.outerBox,d=c.querySelector(".vm-adunit-content"),l=c.querySelector(".vm-adunit-body");r.bindConnect(d,"click",b,b.EVENT_CLICK),d.style.backgroundColor="rgba(0, 0, 0, 0.3)",d.style.width=e.innerWidth+"px",l.style.margin="auto",o.on(m,function(){c.style.display="none",c.style.visibility="hidden"}),o.on(f,function(){var t=n.getWinWidth(),i=n.getWinHeight(),r=e.screen&&e.screen.availHeight||i,a=n.getScrollX(),s=n.getScrollY(),u=n.getStyle(c),p=parseFloat(u.height).toFixed(1),h=e.outerWidth/e.innerWidth,g={width:t,height:p};return h>1.45?void o.fire(m):(h<1.1?(c.style.position="fixed",c.style.top="auto",c.style.left="0px",c.style.bottom="0px",c.style.transform="",d.style.width=e.innerWidth+"px"):(c.style.position="absolute",c.style.left=a+"px",c.style.bottom="auto",c.style.transform=["scaleY(",parseFloat(Math.pow(i,1.1)/(1.1*r)).toFixed(3),")"].join(""),c.style.top=[8+i+s-1.3*g.height,"px"].join(""),d.style.width=g.width+"px"),c.style.width=g.width+"px",c.style.height=g.height+"px",c.style.display="block",c.style.visibility="visible",void(l.style.margin="auto"))})}s.adImpression({product:w,hookId:o.settings.vibrantParameters.hookId,setId:o.settings.vibrantParameters.setId,source:i}),a(),E.enabled&&e.setTimeout(function(){o.fire("close")},E.interval)}var y,k,b,w,C,E,I=this;return d.hook?(k=d.hook,y=k.getAdConfig(),C=y.ads[0].creative.value):d.ads&&(y=d.ads,C=y.ads[0].creative.value),w=d.product||"intext",E=d.refresh||{},u&&"adhesion"!==u.product&&"adhesion"===w?void d.disableAdCallback():(b=t.adunit.create({product:w,settings:y,templateSettings:{cdnUrl:"//"+o.cdn.internal,id:C},creativeLoad:function(e){var t=i.waterfall.select(e,"adhesion",v);return v=t.decoration,t.creative},render:p,open:h,close:l}),s.hookLoad({product:w,hookIds:y.vibrantParameters.hookId}),u&&"adhesion"===u.product&&"adhesion"!==w?u.fire("close",a.Log.closeSource.FORCE):u&&u.fire("close",a.Log.closeSource.AUTO),c.track(b,y.trackers,y.term),b.connect("opened",b,"impression"),b.connect(b.EVENT_CLICK,b,"click"),d.triggerSource&&b.once("opened",function(){b.fire("delegate",{triggerSource:d.triggerSource,source:a.Log.clickSource.HOOK})}),b.fire("open",d.viewSource),void(u=b))},l};var i=i||{};i.AutoReveal=function(e,t,o,i,n){function r(){var e,t=o.get(g);return t?(t=t.split(","),e=parseInt(t[0],10),e>=f&&+new Date-parseInt(t[1],10)<1e3*m?-1:e):0}function s(e){var t=e.getAdConfig().ads[0].creative,o=parseInt((t.diyValues||{}).autoreveal,10),i=b.test(t.creativeType)?0!==o:1===o;return e.isInViewport()&&!e.autoOpened&&i}function c(e,t){var i,a=t.hooks||[],c=t.viewSource;if(l&&!(k>=v)&&a.length&&(i=r(),!(i<0)))for(var d=0;d<a.length;d++){var u=a[d];if(s(u)){e.invoke({hook:u,viewSource:c}),u.autoOpened=!0,k++,n.cookiesAllowed()&&o.set(g,[++i,+new Date].join(","),m);break}}}function d(){return l&&k<v}var l,u=1,p=2,h=180,g="VM_AUTOREVEAL",v=e.getInteger("global.autoreveal.maxpersession",u),f=e.getInteger("global.autoreveal.maxpertimeframe",p),m=e.getInteger("global.autoreveal.timeframe",h),y=e.get("mobile",!1),k=0,b={0:new RegExp(/^()/),1:new RegExp(/^internal/),2:new RegExp(/^(?!internal)/)}[2];switch(e.getInteger("partner.autoreveal",0)){case 1:l=!0;break;case 2:l=!y;break;case 3:l=y;break;default:l=!1}return i.on(a.app.trigger.load,function(){k=0}),{autoOpen:c,revealsAllowed:d,parseCookie:r,testOpenConditions:s}};var i=i||{};i.Daw=function(t,o,i,n,r,s,c){function d(){}var l=1,u=e.innerWidth/2<300?300:Math.round(e.innerWidth/2),p=e.innerHeight,h=i.getInteger("partner.daw.width",u),g=i.getInteger("partner.daw.height",p),v=i.getBoolean("partner.daw.refresh",!0),f=i.getInteger("partner.daw.refreshtime",3e4),m=1500;return d.prototype=new r.Observable,d.prototype.invoke=function(r){function d(){t.request("daw",{ids:[l+":"+h+":"+g],count:1},function(e){var t,a;e.hasOwnProperty(l)&&(a=e[l][0],t=o.adunit.create({product:"daw",settings:a,templateSettings:{cdnUrl:"//"+i.cdn.internal,id:a.ads[0].creative.value},creativeLoad:function(e){var t=n.waterfall.select(e,"daw",k);return k=t.decoration,t.creative},render:p,open:y,close:u}),s.hookLoad({product:"daw",hookIds:a.vibrantParameters.hookId}),c.track(t,a.trackers,a.term),t.connect("opened",t,"impression"),t.connect(t.EVENT_CLICK,t,"click"),t.fire("open",r.viewSource))})}function u(o,i,n){s.adClose({product:o.product,hookId:o.settings.vibrantParameters.hookId,source:i||a.Log.closeSource.AUTO}),v&&i===a.Log.closeSource.AUTO&&e.setTimeout(function(){d(),t.forceFlush()},m),n()}function p(e,t){e.position=new o.position.Fixed({bottom:0,right:10},{animate:!0}),t(null,e)}function y(t,i,n){t=o.decoration.decorate(t,{decorationType:k}),s.adImpression({product:t.product,hookId:t.settings.vibrantParameters.hookId,setId:t.settings.vibrantParameters.setId,source:i}),n(),v&&e.setTimeout(function(){t.fire("close")},f)}var k=i.get("partner.decorationtype","chrome");d()},d};var i=i||{};i.DropInPlacement=function(e,t,o,i,n,r){function s(){}var c="dropin";return s.prototype=new i.Observable,s.prototype.invoke=function(i){function s(e,t,o){t===a.Log.closeSource.AD&&i.disableAdCallback&&i.disableAdCallback(),n.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||a.Log.closeSource.AUTO}),o()}function d(t,o){t.position=new e.position.Fixed({bottom:0},{animate:!1}),o(null,t)}function l(t,o,i){t=e.decoration.decorate(t,{decorationType:c}),n.adImpression({product:t.product,hookId:t.settings.vibrantParameters.hookId,setId:t.settings.vibrantParameters.setId,source:o}),i()}var u=i.hook,p=u.getAdConfig(),h=u.getProduct(),g=e.adunit.create({product:h,settings:p,templateSettings:{cdnUrl:"//"+t.cdn.internal,id:p.ads[0].creative.value},creativeLoad:function(e){var t=o.waterfall.select(e,"dropin",c);return c=t.decoration,t.creative},render:d,open:l,close:s});n.hookLoad({product:g.product,hookIds:p.vibrantParameters.hookId}),r.track(g,p.trackers,p.term),g.connect("opened",g,"impression"),g.connect(g.EVENT_CLICK,g,"click"),i.triggerSource&&g.once("opened",function(){g.fire("delegate",{triggerSource:i.triggerSource,source:a.Log.clickSource.HOOK})}),g.fire("open",i.viewSource)},s};var i=i||{};i.Inline=function(e,t,o,i,n,r,s,c){function d(){this.adConfig=o.get("partner.inline",{})}var l=480,u=360;return d.prototype=new n.Observable,d.prototype.invoke=function(n){function d(e,t,o){r.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||a.Log.closeSource.AUTO}),o()}function p(e,i){g?e.position=new t.position.Instory(v,o):e.position=new t.position.Inline(v.getDomNode(),o),i(null,e)}function h(e,o,i){e=t.decoration.decorate(e,{decorationType:m}),r.adImpression({product:e.product,hookId:e.settings.vibrantParameters.hookId,setId:e.settings.vibrantParameters.setId,source:o}),i()}var g=o.get("partner.inline.useinstorybehaviour",!1),v=n.hook,f=v.getId()+":"+this.adConfig.get("adwidth",l)+":"+this.adConfig.get("adheight",u),m="standard";e.request("inline",{ids:[f],count:1},function(e){var a,l,u=v.getId();e[u]?(a=e[u][0],l=t.adunit.create({product:"inline",settings:a,templateSettings:{cdnUrl:"//"+o.cdn.internal,id:a.ads[0].creative.value},creativeLoad:function(e){var t=i.waterfall.select(e,"inline",m);return m=g?"instory":"standard",t.creative},render:p,open:h,close:d}),r.hookLoad({product:"inline",hookIds:a.vibrantParameters.hookId}),s.track(l,a.trackers,a.term),l.connect("opened",l,"impression"),l.connect(l.EVENT_CLICK,l,"click"),l.fire("open",n.viewSource)):c.notifyFailure("inline")})},d};var i=i||{};i.InstoryHeightCalc=function(t){function o(o,n,r){var a=t.getWinHeight();if(n&&a){var s=.55,c=(a+n)*s,d=c>0?c:i,l=n;l=r<d?d-r:0,l=l>n?n:l,l=l<0?0:l;var u=o.getAttribute("data-mouse");if("in"===u&&l<n){var p=n-l;e.scrollBy(0,p),l=n,o.setAttribute("data-mouse","out")}return l}}var i=500;return o};var i=i||{};i.ScriptsLoader=function(e,o){function i(e){n&&c(e.hooks)}for(var n,r=e.getJSON("scripts",[]),a=t.head||t.getElementsByTagName("head")[0],s=0;s<r.length;s++)if("captify"===r[s].source){n=r[s].pixel;break}var c=o.once(function(e){var o=(e||[]).map(function(e){return e.getAdConfig().term.keyword}).join(" "),i=t.createElement("script");i.type="text/javascript",i.async=!0,i.text=n.replace("${KEYWORDS}",o),a.appendChild(i)});return{invoke:i}};var i=i||{};i.Tooltip=function(e,t,o,i,n,r,s,c,d,l,p){function h(){var e=this;r.Observable.call(this),l.on(a.app.inview.animationStart,function(){e.closeOpenTooltips()})}function g(l,p,h){function g(t,o,i){var n;p.disconnectAll(x),delete I[p.getId()];var d=c.once(function(){n&&n(),s.adClose({product:t.product,hookId:t.settings.vibrantParameters.hookId,source:o||a.Log.closeSource.AUTO}),i()});c.isIE?e.setTimeout(d,f):n=r.bind(t.outerBox,"transitionend",d)}function k(e,o){var i,r=e.getTemplateHookParams()||{},a=e.getMergedCreativeParams()||{},s=a.coverHook;e.position=new t.position.Absolute(function(){return v(x.getPosition(),p.getPosition(),r,s)}),i=n.onPositionChange(p.getDomNode(),function(){e.fire("domChange")},m),e.on("close",i),o(null,e)}function b(e,o,i){e=t.decoration.decorate(e,{decorationType:w}),s.adImpression({product:e.product,hookId:e.settings.vibrantParameters.hookId,setId:e.settings.vibrantParameters.setId,source:o});var n=e.getTemplateHookParams()||{};p&&n.cursorStyle&&p.setCursorStyle(n.cursorStyle),i()}var w=C,x=t.adunit.create({product:"intext",settings:l,openDelay:y.getInteger("opendelay",null),closeDelay:y.getInteger("closedelay",null),templateSettings:{cdnUrl:"//"+o.cdn.internal,id:l.ads[0].creative.value},creativeLoad:function(e){var t=i.waterfall.select(e,"tooltip",w);return w=t.decoration,t.creative},render:k,open:b,close:g});return d.track(x,l.trackers,l.term),x.connect("opened",x,"impression"),x.connect(x.EVENT_CLICK,x,"click"),p.connect(u.Hook.EVENT_HOOKIN,x,x.EVENT_MOUSEIN),p.connect(u.Hook.EVENT_HOOKOUT,x,x.EVENT_MOUSEOUT),p.connect(u.Hook.EVENT_CLICK,x,x.EVENT_CLICK),h.triggerSource&&x.once("opened",function(){x.fire("delegate",{triggerSource:h.triggerSource,viewSource:h.viewSource,source:a.Log.clickSource.HOOK})}),x.on(x.EVENT_MOUSEOUT,function(){x.fire("scheduleClose",a.Log.closeSource.AUTO)}),x.on(x.EVENT_MOUSEIN,function(){x.cancelScheduledClose()}),p.on(u.Hook.EVENT_HOOKOUT,function(){x.isOpen()&&x.fire("scheduleClose",a.Log.closeSource.AUTO)}),E.push(x),I[p.getId()]=x,x}function v(e,t,o,i){var r,a,s,d=n.getAbsoluteViewport(),l=o.coverhook||i||k,u=[],p=0;for(var h in x)if(x.hasOwnProperty(h)){if(r=x[h](e,t,l),d.contains(r))return r;u.push(r)}return c.forEach(u,function(e){var t=d.getIntersection(e);t&&t.pixels()>p&&(p=t.pixels(),a=e,s=t)}),a?(a.shiftY(s.top-a.top||s.bottom-a.bottom),a.shiftX(s.left-a.left||s.right-a.right),a):t.top>d.bottom?u[0]:u[1]}var f=300,m=100,y=o.get("partner.intext",{}),k=y.get("coverhook",!1),b=7,w=11,C=o.get("partner.decorationtype","chrome"),E=[],I={},x={placeAboveHook:function(e,t,o){var i=e.clone();switch(i.setCenter(t.getCenter()),o){case"cover":case"1":i.shiftY(-(e.getHeight()-t.getHeight())/2-b);break;case"center":case"centre":break;default:i.shiftY(-(e.getHeight()+t.getHeight())/2)}return i},placeBelowHook:function(e,t,o){var i=e.clone();switch(i.setCenter(t.getCenter()),o){case"cover":case"1":i.shiftY((e.getHeight()-t.getHeight())/2+w);break;case"center":case"centre":break;default:i.shiftY((e.getHeight()+t.getHeight())/2)}return i}};return h.prototype=new r.Observable,h.isAnyOpen=function(){return c.some(E,function(e){return e.isOpen()})},h.prototype.closeOpenTooltips=function(){l.fire(a.app.intext.tooltipClose),c.forEach(E,function(e){e.isOpen()&&e.fire("close",a.Log.closeSource.AUTO)})},h.prototype.invoke=function(e){var t,i=this,n=e.hook,r=n.getAdConfig();if(n!==this.activeHook||!this.activeUnit.isOpen()){var c=o.getInteger("programmaticOverride",0);if(c&&n.getWaterfallOverrideAllowed())return void p.getAdForHook(n,function(t){if(t){var o=n.id,c=r.vibrantParameters.adProviderId,d=t.vibrantParameters.hookId,l=t.vibrantParameters.adProviderId;s.hookReplacement({product:"intext",oldHookId:o,newHookId:d,oldAdProviderId:c||-1,newAdProviderId:l||-1,reason:a.Log.hookReason.OVERRIDE}),n.adConfig=t,n.id=d,e.adConfig=t}(t||n.liveLookupFailsShowUnderlyingAd)&&(n.resetWaterfallOverrideAllowed(),i.invoke(e),n.hookClickActive=!0)});t=I[n.getId()]||g(r,n,e),t.isOpen()?t.cancelScheduledClose():(this.closeOpenTooltips(),t.fire("open",e.viewSource||a.Log.viewSource.MOUSE_OVER))}},h};var i=i||{};i.VibrantView=function(e,t,o,i){function n(){return o.Observable.call(this),this.hookBucket=[],this.openedHooks={},this.views=0,this._allowOnLoad=f,this._allowOnScroll=m,this._hasLoaded=!1,this._lastTiggeredHook=null,this._isBlocked=!1,g&&v&&(f||m)?void this.on("scroll",function(e){var t=!(0===e.data.direction&&this._allowOnLoad),o=!(e.data.direction>0&&this._allowOnScroll);if(!t||!o)return this.views>=y?void this.fire("maxViewsReached"):void(this._lastTiggeredHook&&this._lastTiggeredHook.isInViewport()||r(this,e.data.viewSource))},this):void(this._isBlocked=!0)}function r(){}function s(e){var o,i;return 0!==e&&(!!(o=parseInt(t.get(u),10))&&(i=+new Date-o,i<e*c))}var c=6e4,d=5,l=1,u="VM_VVTIME",p=e.get("geo"),h=e.get("partner.vibrantview",{}),g=!i.includes(h.getArray("geoblock",[]),p.cc),v=!s(h.getInteger("minutes",d)),f=h.getBoolean("onload",e.getBoolean("mobile",!1)),m=h.getBoolean("onscroll",e.getBoolean("mobile",!1)),y=h.get("maxviews",l);return n.prototype=new o.Observable,n.prototype.invoke=function(e){return!!this._isBlocked||(this.hookBucket=this.hookBucket.concat(e.hooks),this._allowOnLoad&&!this._hasLoaded&&r(this,a.Log.viewSource.LOAD),void(this._hasLoaded=!0))},n.prototype.maxViews=y,n};var i=i||{};i.Wordflip=function(e,t,o,i,n,r,s,c){function d(){var e=this;r.Observable.call(this),this.partnerControl=o.getBoolean("partner.intext.wordflip",!!o.mobile),this.triggerFlip=function(){return e.partnerControl?function(e){e._wordflip.flip()}:function(t){e.fire(t.getProduct()+":"+p.HIGHLIGHT,{hook:t,viewSource:a.Log.viewSource.MOUSE_OVER})}}(),this.hookBucket=[],this.firstFlipped=!1,this.on("doflip",function(){i.some(e.hookBucket,function(t){if(t.isInViewportArea(C)&&!t.triggered&&!t._wordflip.flipped&&!E)return e.triggerFlip(t),!0})}),this.connect("scroll",this,"doflip"),this.on("resize",function(){i.forEach(e.hookBucket,function(e){e._wordflip.positionWordflip()})}),c.on(a.app.inview.animationStart,function(){E&&E._wordflip.closeFlip()})}function l(e,t){this.hook=e,this.channel=t,this.boxWidth=0,this.textNode=this.hook.getDomNode().firstChild,this.hookStyling=this.hook.adConfig.ads[0].hook||{},this.wordflipSetup(),this.hookStyling.text||this.hookStyling.icon?(this.hookText(),this.hookIcon()):this.defaultStyle(),this.positionWordflip(),this.flipEvents()}var p={HIGHLIGHT:"highlight"},h="vm-wordflip",g=" vm-wordflip-default",v=" vm-wordflip-styled",f=2,m=20,y="-1000px",k=1800,b=250,w=550,C=.75,E=!1;return d.prototype=new r.Observable,d.prototype.invoke=function(e){function t(e,t,i){return function(){o.fire(t,{hook:e,viewSource:i,triggerSource:t})}}var o=this;this.hooks=e.hook&&[e.hook]||e.hooks||s.getVisibleHooks(),this.hooks.length&&(i.forEach(this.hooks,function(e){var i=(((((e.adConfig||{}).ads[0]||{}).creative||{}).payload||{}).params||{}).keywordOnly;e.eventsBound||i||(e.eventsBound=!0,e._wordflip=new l(e,o),o.hookBucket.push(e),e.on(u.Hook.EVENT_CLICK,function(){
t(e,"click",a.Log.viewSource.MOUSE_OVER)}),e.on(u.Hook.EVENT_HOOKIN,function(){t(e,"hover",a.Log.viewSource.MOUSE_OVER),o.triggerFlip(e)}),e.on(u.Hook.EVENT_HOOKOUT,t(e,"mouseleave",a.Log.viewSource.MOUSE_OVER)),n.onPositionChange(e.getDomNode(),function(){e._wordflip.positionWordflip()},b))}),o.fire("doflip"))},l.prototype.flip=function(){if(E&&this.hook!==E)E._wordflip.closeFlip();else if(this.hook===E)return;E=this.hook,this.openFlip(),this.channel.fire(this.hook.getProduct()+":"+p.HIGHLIGHT,{hook:this.hook,viewSource:a.Log.viewSource.MOUSE_OVER}),this.flipped=!0},l.prototype.openFlip=function(){var t=this;this.box.style.visibility="visible",this.box.style.opacity=1,i.isIE&&(this.box.style.filter="alpha(opacity = 100)"),this.closeDelay=e.setTimeout(function(){t.closeFlip()},k)},l.prototype.closeFlip=function(){var t,o;this.closeDelay&&e.clearTimeout(this.closeDelay),t=i.once(function(){o&&o(),E=!1}),i.isIE?(e.setTimeout(t,w),this.box.style.filter="alpha(opacity = 0)"):(o=r.bind(this.box,"transitionend",t),e.setTimeout(t,w)),this.box.style.opacity=0},l.prototype.wordflipSetup=function(){this.box=t.createElement("div"),this.box.className=h,this.box.style.position="absolute",this.box.style.top=y,this.box.style.left=y,this.box.style.visibility="hidden",this.box.style.opacity=0,this.box.style.height=this.textNode.offsetHeight+f+"px"},l.prototype.positionWordflip=function(){this.box.style.width=this.boxWidth+"px",t.body.appendChild(this.box),this.hookCenter=n.getPosition(this.textNode).getCenter(),this.boxPos=n.getPosition(this.box),this.boxPos.setCenter(this.hookCenter),n.setPosition(this.box,this.boxPos)},l.prototype.hookIcon=function(){this.hookStyling.icon&&(this.icon=t.createElement("img"),this.icon.src=this.hookStyling.icon,this.box.appendChild(this.icon),this.boxWidth+=m+2*f)},l.prototype.hookText=function(){var e=this.hookStyling.text||this.hook.adConfig.term.keyword;this.textBox=t.createElement("span"),n.setTextContent(this.textBox,e),this.box.appendChild(this.textBox),this.box.className+=v,this.boxWidth=n.getTextDimensions(e).getWidth()+f},l.prototype.defaultStyle=function(){this.box.className+=g,this.boxWidth=this.textNode.offsetWidth+2*f},l.prototype.flipEvents=function(){r.bindConnect(this.box,"click",this.hook,u.Hook.EVENT_CLICK),o.mobile||(r.bindConnect(this.box,"mouseenter",this.hook,u.Hook.EVENT_HOOKIN),r.bindConnect(this.box,"mouseleave",this.hook,u.Hook.EVENT_HOOKOUT))},d};var n=n||{};n.Mediator=function(e,t,o,i,n,r,s,c){function d(e){l(e);for(var t in s.hash)s.hash.hasOwnProperty(t)&&(T[s.hash[t]]=parseInt(t,10),"adhesion"===s.hash[t]&&(T.daw=parseInt(t,10)));var i=p();u(),L.map(function(e){C(e,i,o.ipid)})}function l(e){P=e}function u(){x=Date.now()}function p(){return B}function h(e){N=i.filter(N,function(t){return t.getName()!==e})}function g(e){for(var t=0;t<N.length;t++)if(N[t].getName()===e)return N[t]}function v(e,t){var o=g(e);o&&(o.bids=i.filter(o.getBids(),function(e){return e.product!==t}))}function f(e,t){var o=g(e);if(o)for(var i=0;i<o.bids.length;i++)if(o.bids[i].zoneId===t){var n=o.bids[i];n.impressions++,c.info("HeaderBid Impression:  Bidder"+n.bidderName+" Product:"+n.product+" Width:"+n.width+" Height:"+n.height+" ZoneId: "+n.zoneId+" Impressions: "+n.impressions+" ImpressionCap: "+n.impressionCap);break}}function k(e){function t(){for(var o=!0,n=0;n<N.length;n++)if("completed"!==N[n].getStatus()){o=!1;break}if(o||Date.now()-x>O){I(N);var r={};i.forEach(N,function(e){if("completed"===e.getStatus()){var t=e.getBids();i.forEach(t,function(t){if(r[t.product]||(r[t.product]=[]),t){var o=i.extend({},{bidderName:e.name,product:T[t.product],cpm:t.cpm,height:t.height,width:t.width,zoneId:t.zoneId});r[t.product].push(o)}})}});var a=p(),s=[];return i.forEach(["intext","inview","instory"],function(e){a.indexOf(e)>-1&&(s=s.concat(r[e]||[]))}),r.intext=s,delete r.inview,delete r.instory,_(r),e(null,r)}setTimeout(t,S)}setTimeout(t,0)}function b(e,t){var o,i=N.find(function(t){return t.getName()===e});if(i&&"completed"===i.getStatus()){var n=i.getBidByZoneId(t);if(n)if(n.impressions>=n.impressionCap)for(var r=i.getBids()||[],a=0;a<r.length;a++){var s=r[a];if(s.zoneId!==n.zoneId&&s.product===n.product&&s.width===n.width&&s.height===n.height&&s.impressions<s.impressionCap){o=s;break}}else o=n}return o}function w(){return N}function C(t,o,i){var r;switch(t){case"criteo":r=new m(o,i);break;case"freewheel":r=new y(o)}r&&(r.load(e,n),N.push(r))}function E(e,t){var o=[];return i.forEach(e,function(e){t.indexOf(e.id)===-1&&o.push(e.name)}),o}function I(e){var t=o.get("headerBids",null);t&&i.forEach(e,function(e){e.bids=t.filter(function(t){return e.getName()===t.bidderName})})}var x,A=o.getArray("partner.exAdProviders",[]),D=o.get("headerBidders",[]),O=1e3,S=10,N=[],T={},B=o.getArray("partner.products",[]),P=null,L=E(D,A),H={daw:!0},_=i.once(function(e){var t=[];c.info("HEADER BIDDERS");var o=0;if(i.forOwn(e,function(e,n){e&&e.length&&(c.info("PRODUCT "+n+":"),i.forEach(e,function(e){t.push({bidderName:e.bidderName,product:s.hash[e.product],width:e.width,height:e.height,cpm:e.cpm}),c.info(e.bidderName+"  "+e.zoneId+" "+s.hash[e.product]+" "+e.width+"x"+e.height+" "+e.cpm),o++}))}),o>0)P.headerBid(t);else if(N.length){var n=N.reduce(function(e,t){return e+t.name+" "},"");c.warn("** No bids for "+n)}else c.info("No header bidders enabled");N.forEach(function(e){e.bids&&e.bids.length||P.noHeaderBid(e.name)}),c.info("END HEADER BIDDERS")});return r.on(a.app.bid.impression,function(e){var t=e.data.product,o=e.data.bidder,i=e.data.zoneId;H[t]&&v(o,t),f(o,i)}),{init:d,setLogModule:l,setStartTime:u,getBiddersByProduct:k,getBid:b,removeBidder:h,removeBidderProduct:v,bidImpression:f,getActiveBidders:w,createBidder:C,findActiveBidderByName:g,getAvailableBidders:E,getSupportedProducts:p}};var r=r||{};r.CompatibilityRules=function(e){return[{type:"execute",args:[[function(t){var o=t.get("partner.intext.inview",{}),i=t.partner.inview=t.partner.inview||{};e.extend(i,o)}]]}]};var r=r||{};r.LanguageMap=function(){var e={uk:{adChoicesText:"AdChoices",hdrText:"ADVERTISEMENT"},us:{adChoicesText:"AdChoices",hdrText:"ADVERTISEMENT"},de:{adChoicesText:"Werbung",hdrText:"WERBUNG"}};return e["default"]=e.uk,{map:e}};var r=r||{};r.ProductMap=function(){var e={1:"intext",2:"image",3:"inline",4:"adhesion",5:"inview",6:"adbar",9:"instory"};return{hash:e}};var a=a||{};a.AdFetcher=function(e,t,o,i,n,r){function s(e,t,o){g[e]=t,v[e]=o}function c(e,o){t.fire(a.app.ads.newAds,{product:e,ads:o})}function d(t,i){var n=t.textNodeId,a=n,s=t.getWaterfallOverrideArray(),d=["intext","inview"],l=!1,u=2e3,g=t.getAdConfig(),v=g?g.product:"",f=g&&g.term?[g.term.keyword]:[];if(d.indexOf(v)===-1)return i();if("inview"===v){var m=t.domNode?r.findParentParagraph(t.domNode):null;if(!m)return i();var y=r.getTextNodeBounds(m),k=y.getWidth(),b=Math.floor(k);if(!b)return i();a+=":"+b+":inview"}var w={contextKey:p,keywordOverrideList:f.join(),liveLookup:!0},C={intext:{ids:[a],count:1,internal:!0,autoreveal:!1,adProviders:s.join()}};setTimeout(function(){l||(l=!0,i())},u),e.getAds(C,w,function(e){var t,r;if(!l){l=!0;for(var a=Object.keys(e),s=0;s<a.length;s++)if(h.indexOf(a[s])!==-1){r=e[a[s]];break}r&&r[n]&&r[n].length&&(c(v,r),t=o.extend({},r[n][0],{product:v})),i(t)}},function(){l||(l=!0,i())})}function l(t){if(!o.isEmpty(g)){t=t||{},t.liveLookup=!1;var i=v;e.getAds(g,t,function(e){o.forOwn(i,function(t,o){c(o,e[o]),i[o](e[o])})}),g={},v={}}}function u(){l({contextKey:p})}var p=i.get("articleHash",i.get("urlHash")),h=o.values(n.hash),g={},v={};return t.on(a.app.context.key,function(e){p=e.data.contextKey}),{request:s,flush:l,forceFlush:u,getAdForHook:d}};var a=a||{};a.AdsMonitor=function(e){function t(e){return"image"===e?o(e):c[e]||[]}function o(e){var t=d[e];return t?[t]:[]}function i(){return r||[]}var n={},r=[],s={},c={},d={};return e.on(a.app.ads.newAds,function(e){var t,o,i,a,l=e.data,u=l.product,p=l.ads;for(o in p)p.hasOwnProperty(o)&&p[o][0]&&p[o][0].vibrantParameters&&(i=p[o][0],t=i.vibrantParameters.keywordId,a=i.vibrantParameters.setId,t&&!n[t]&&(n[t]=1,r.push(t)),s[u]=s[u]||{},c[u]=c[u]||[],d[u]=a,a&&!s[u][a]&&(s[u][a]=1,c[u].push(a)))}),{getUsedSets:t,getUsedKeywords:i,getLastUsedSet:o}};var a=a||{};a.Api=function(e,t,o,i,n,r,a,s,c){function d(t,i,r){function a(){r(JSON.parse(d.responseText))}function s(){r({success:!1,errors:["There was an error sending the request"]})}function c(){r({success:!1,errors:["Request timed out"]})}var d=new XMLHttpRequest,l="//"+o.apiHost+t;"withCredentials"in d?(n.bind(d,"load",a),n.bind(d,"error",s),n.bind(d,"timeout",c),d.open("POST",l,!0),d.setRequestHeader("Content-Type","application/json"),d.withCredentials=!0,d.send(JSON.stringify(i))):e.XDomainRequest?(d=new XDomainRequest,d.onprogress=function(){},d.onload=a,d.onerror=s,d.ontimeout=c,d.open("POST",l),setTimeout(function(){d.send(JSON.stringify(i))},0)):r({success:!1,errors:["Browser does not support CORS requests"]})}function l(t,n,a,s){var c=a+"_"+v++,d="//"+o.apiHost+t+"?callback="+c+"&"+r.toQueryString(n);e[c]=function(){s.apply(this,arguments);try{delete e[c]}catch(t){e[c]=void 0}},i.appendScript(d)}function u(e,i,n){var a=r.extend({ipid:o.ipid,pvu:o.pvu,urlHash:o.urlHash,nodes:r.map(e,function(e){return{id:e.getId(),text:e.getTextContent()}})},i);d("/context/"+t.context,a,function(e){e&&e.success&&n(e)})}function p(e,t,o){l(e,o,"log",function(e){e&&t&&t(e)})}function h(e,i){var n={ipid:o.ipid,contextKey:e,pvu:o.pvu};l("/context/"+t.context,n,"ctx_log",function(e){e&&i(e)})}function g(e,i,n,d){c.getAudienceData(function(c,u){var p=u||[];s.getBiddersByProduct(function(s,c){var u=c||{},h=r.extend({ipid:o.ipid,pvu:o.pvu,kw:a.getUsedKeywords().join(","),audiences:p.join(",")},i);r.forOwn(e,function(e,t){r.forOwn(e,function(e,o){h[t+"."+o]=e,h[t+".sets"]=f?a.getUsedSets(t).join(","):"";var i=u[t]||[];h[t+".bidders"]=encodeURIComponent(JSON.stringify(i))})}),l("/ad/"+t.ad,h,"vib",function(e){e&&e.success?n(e):d&&d(e)})})})}var v=1,f=o.getBoolean("partner.norepetitive",!1);return{contextualise:u,logContext:h,getAds:g,log:p,jsonpRequest:l}};var a=a||{};a.AppChannel=function(e){return a.app={},a.app.main={initialise:"initialise"},a.app.ads={newAds:"newAds"},a.app.context={key:"contextKey"},a.app.trigger={newContent:"newContent",load:"load",scroll:"scroll",resize:"resize",zoom:"zoom",touchstart:"touchstart",touchend:"touchend",contextComplete:"contextComplete",dmpBehaviourDrop:"dmpBehaviourDrop"},a.app.intext={tooltipClose:"inText:closeTooltips"},a.app.inview={animationStart:"inView:AnimationStart",animationEnd:"inView:AnimationEnd"},a.app.instory={animationStart:"inStory:AnimationStart",animationEnd:"inStory:AnimationEnd",openPc:"inStory:openPc"},a.app.inline={animationStart:"inline:AnimationStart",animationEnd:"inline:AnimationEnd"},a.app.bid={impression:"headerBidding:Impression"},new e.Observable};var a=a||{};a.CmdMessenger=function(t,o,i,n,r,a,s,c){function d(e){var t=e.hookId;if(t)switch(e.cmdType){case"LOG":l(e.cmd,t,e.params)}else c.error("processCommand: No hookId")}function l(e,t,o){var n=s.getParamsByHookId(t);if(n){var r=i.extend({},o,n||{});switch(e){case"CLICK_THROUGH":s.clickThrough(r)}}else c.error("processLogCommand: No registered params for this hookId")}function u(e){if(p.indexOf(e.origin)!==-1){var t;try{t=JSON.parse(e.data),t&&d(t)}catch(o){c.error("Could not rebuild message: "+e.data)}}}var p=["http://images.intellitxt.com","https://images.intellitxt.com","http://mymachine.intellitxt.com","https://mymachine.intellitxt.com","http://localhost"];return e.addEventListener?e.addEventListener("message",u,!1):e.attachEvent&&e.attachEvent("onmessage",u),{}};var a=a||{};a.Config=function(e,t,o){var i={},n={};return i.get=function(e,o){var n=this;return t.some(e.split("."),function(t){if(!n.hasOwnProperty(t)){if("undefined"!=typeof o)return n=o,!0;throw new Error('Config item "'+e+'" not found')}n=n[t]}),t.isObject(n)&&t.extend(n,i),n},i.getArray=function(e,t){var o=this.get(e,t);return"string"==typeof o?o.split(","):o},i.getBoolean=function(e,t){var o=this.get(e,t);return"string"==typeof o?"1"===o:o},i.getInteger=function(e,t){var o=this.get(e,t);return"string"==typeof o?parseInt(o,10):o},i.getJSON=function(e,t){var o=this.get(e,t);return"string"==typeof o?JSON.parse(o):o},n.execute=function(e,o){t.forEach(o,function(t){t(e)})},e=t.extend(e,i),o&&t.forEach(o,function(t){var o=[e].concat(t.args);n[t.type].apply(this,o)}),e};var a=a||{};a.ContentMonitor=function(e,o,i,n,r,s,c,d){function l(e,t){var r={primary:e.primary};r.primary&&o.get("articleHash",!1)?r.articleHash=o.get("articleHash"):e.hasOwnProperty("articleId")&&(r.articleId=e.articleId);var l=c.findTextNodes(e.textNodes),p=h?d.filter(n.findImages(e.imageNodes),function(e){return!i.parentHasSelector(e.image,h)}):n.findImages(e.imageNodes);l.length&&(g[e.articleId]=!0),s.contextualise(l,r,function(e){e&&(u.fire(a.app.main.initialise,{pubXReached:e.pubXReached}),u.fire(a.app.trigger.newContent,{textNodes:l,images:p}),e.articleHash&&u.fire(a.app.context.key,{contextKey:e.articleHash}),t(e.articleHash))})}var u,p=o.getBoolean("mobile",!1)?"mobile":"desktop",h=o.getArray("partner.gallery.selectors",!1),g={},v=!0,f={};return f.dynamicStrategy=function(e,t){function o(){var o=d.debounce(function(){t(),i.onViewportChange(o)},e.interval);i.onViewportChange(o)}function n(){d.poll(function(){return!0},t,e.interval)}function r(){}var a={debounce:o,polling:n,click:r};a[e.type](),t()},f.parseNewContent=function(t,i,n){var r=n.innerText||t.getAttribute(n);g.hasOwnProperty(r)||(l({textNodes:t.childNodes,imageNodes:t.childNodes,articleId:r,primary:v},function(t){i.contextKey=t||o.get("articleHash",o.get("urlHash")),u.fire(a.app.trigger.load),e.flush(i)}),v=!1)},f.standardPage=function(){var t={};l({textNodes:o.get("partner.intext.selectors"),imageNodes:o.get("partner.image.selectors"),primary:!0},function(){t.contextKey=o.get("urlHash"),u.fire(a.app.trigger.load),e.flush(t),i.onViewportChange(function n(){u.fire(a.app.trigger.scroll),e.flush(t),i.onViewportChange(n)})})},f.run=function(i){var n={},r={type:"debounce",interval:200},s=o.getJSON("partner.dynamic",{});u=i,s.get("selector",!1)?(o.get("partner.intext",!1)&&(o.partner.intext.selectors=s.get("selector.css")),f.dynamicStrategy(s.getJSON("strategy."+p,r),function(){var o=s.get("selector.identifier",!1);u.fire(a.app.trigger.scroll),d.forEach(t.querySelectorAll(s.get("selector.css")),function(e){var i=o?t.querySelector(o):s.get("selector.property","id");f.parseNewContent(e,n,i)}),e.flush(n)})):f.standardPage()},f};var a=a||{};a.CookieSync=function(o,i,n,r,a,s,c){function d(){"undefined"!=typeof i.userId&&r.forOwn(i.syncDetails,function(e,t){var o=r.replaceUrlParams(g,{provider:t}),s=h&&e.secureUrl?e.secureUrl:e.url;o+=e.userIdPlaceholder;var c=r.replaceUrlParams(s,{userId:i.userId,redirect:o});switch(e.type){case"image":n.dropImage(c);break;case"iframe":n.appendIFrame(c);break;default:throw a.auditError({message:"[CookieSync] Unknown cookie sync type for "+t+": "+e.type})}})}function l(){var n=i.get("consent",{});if(n.gdprApplies){e.addEventListener("message",function(e){var t=e.data.vmReadConsent;if(t&&t.consentStr){var i="/csync/"+o.csync,n=r.replaceUrlParams(i,{consentStr:t.consentStr});s.jsonpRequest(n,{consentStr:t.consentStr},"csync",function(e){e&&e.consentData&&c.updateConsent(e.consentData)})}});var a=i.getBoolean("partner.syncconsent",!0);if(a){var d=t.createElement("iframe");d.setAttribute("style","width:1px;height:1px;position:absolute;left:-99px;top:-99px;"),d.setAttribute("src",v),t.body.appendChild(d)}}}var u=/\:(\w+)/g,p=e.location.protocol,h=p.indexOf("s")>-1;i.syncDetails&&r.forOwn(i.syncDetails,function(e){e.url=e.url.replace(u,"{{$1}}")});var g=p+"//"+i.cookieSyncHost+"/csync/"+o.csync+"/{{provider}}/",v=i.get("readConsentLocation","");return{sync:d,syncConsent:l}};var a=a||{};a.Cookie=function(e,t){function o(t){return t&&n.test(t)?decodeURIComponent(e.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null}function i(o,i,n){t.dnt||(e.cookie=o+"="+encodeURIComponent(i)+";path=/"+(n?";max-age="+n:""))}var n=new RegExp("^"+(t.cookiesNS||"VM_"));return{get:o,set:i}};var a=a||{};a.debugLog=function(e){function t(){return d}function o(e){r(e,a)}function i(e){r(e,s)}function n(e){r(e,c)}function r(e,o){if(t()){var i;switch(o){case a:i="color:green;";break;case s:i="color:orange;";break;case c:i="color:red;";break;default:i="color:green;"}console.log("%cVM: %c"+e,i,"color:black")}}var a=1,s=2,c=3,d=e.get("debugMode",0);return function(){if(t()){var o="IPID: "+e.ipid;o+=" PVU: "+e.pvu,o+=" PRODUCTS: "+e.partner.products,o+=" EXCLUDE ADPROVIDERS: "+e.partner.exAdProviders,r(o)}}(),{info:o,warn:i,error:n}};var a=a||{};a.Debug=function(e,t,o,i,n,r){if(o.debugHost){var a="//"+o.get("cdn.debugjs"),s="//"+o.get("cdn.debugcss");!function(){e.VM.DEBUG=e.VM.DEBUG||{},e.VM.DEBUG.api={config:o,dom:i,events:n,utils:r},i.appendStyleSheet(s),i.appendScript(a)}()}};var a=a||{};a.Dom=function(e,t,o,i){function n(){return"undefined"!=typeof e.innerWidth?e.innerWidth:t.documentElement.clientWidth}function r(){return"undefined"!=typeof e.innerHeight?e.innerHeight:t.documentElement.clientHeight}function s(){return"undefined"!=typeof e.pageXOffset?e.pageXOffset:t.documentElement.scrollLeft}function c(){return"undefined"!=typeof e.pageYOffset?e.pageYOffset:t.documentElement.scrollTop}function d(t,o){var i=+new Date,n=0;e.setTimeout(function r(){var a,s=+new Date,c=(s-i)/o;a=t>0?Math.min(t,n+c*t):Math.max(t,n+c*t);var d=Math.round(a-n);0!==d&&e.scrollBy(0,d),i=s,n=a,t>0?a<t&&e.setTimeout(r,q):a>t&&e.setTimeout(r,q)},q)}function l(){return new G({top:c(),left:s(),bottom:c()+r(),right:s()+n()})}function u(e,i){var n,r=t.createElement("iframe");return r.frameBorder=0,r.scrolling="no",r.marginWidth=0,r.marginHeight=0,r.hspace=0,r.vspace=0,r.style.position="static",e.width?(r.width=e.width,r.style.width=e.width+"px",e.fixMaxDimensions&&r.style.setProperty("max-width",e.width+"px","important")):(r.width="100%",r.style.width="100%"),e.height?(r.height=e.height,r.style.height=e.height+"px",e.fixMaxDimensions&&r.style.setProperty("max-height",e.height+"px","important")):(r.height="100%",r.style.height="100%"),i&&(n=o.bind(r,"load",function(){n(),i(null,r)})),r}function p(e,i,n){var r=t.createElement("iframe");return r.src=e,r.style.display="none",n=n||t.body,o.bind(r,"load",function(){i&&i(null,r)}),r=n.appendChild(r)}function h(e,i,n){var r=t.createElement("iframe");return r.src=e,r.style.display="none",n=n||t.body,o.bind(r,"load",function(){n.removeChild(r),i&&setTimeout(i)}),r=n.appendChild(r)}function g(e,i,n){var r=t.createElement("script");return r.type="text/javascript",r.async=!0,r.src=e,n=n||j,t.addEventListener?o.bind(r,"load",function(){i&&i()}):r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,i&&i())},n.appendChild(r),r}function v(e,o){var i=t.createElement("script");return i.type="text/javascript",i.async=!0,i.text=e,o=o||j,o.appendChild(i),i}function f(e,t,o){var i=g(e,function(){t&&t(),o=o||j;try{o.removeChild(i)}catch(e){}},o);return i}function m(e){var o=t.createElement("link");return o.rel="stylesheet",o.type="text/css",o.href=e,j.appendChild(o),o}function y(e){var o=t.createElement("style");return o.type="text/css",R(o,e),j.appendChild(o),o}function k(e,o){var i=t.createElement("img");return i.src=e,w(o)&&(i.style.setProperty("width","1px","important"),i.style.setProperty("height","1px","important"),o.appendChild(i)),i}function b(e,t){t===!0?b.sameWindow(e):b.newWindow(e)}function w(e){return e instanceof HTMLElement&&e.nodeType===a.Dom.ELEMENT_NODE}function C(e){return!!e&&e.constructor===t.createDocumentFragment().constructor}function E(e,o){var i,n=t.createElement("span");return o=o?o:t.body,R(n,e),n.style.position="absolute",n.style.visibility="hidden",n.style.top=J,n.style.left=J,n.style.width="auto",n.style.height="auto",n.style.whiteSpace="nowrap",o.appendChild(n),i=K(n),n.parentNode.removeChild(n),i}function I(e){var t;if(e&&e.getBoundingClientRect&&"function"==typeof e.getBoundingClientRect)return t=e.getBoundingClientRect(),"undefined"==typeof t.top||"undefined"==typeof t.right||"undefined"==typeof t.bottom||"undefined"==typeof t.left?void console.log("getPosition: invalid rect"):new G({top:t.top+c(),right:t.right+s(),bottom:t.bottom+c(),left:t.left+s()})}function x(e,t){var o=["top","left","bottom","right"];i.forEach(o,function(o){t.hasOwnProperty(o)&&(e.style[o]=t[o]+"px")})}function A(e){var t,o;if(w(e))return o=e.getBoundingClientRect(),t={width:o.right-o.left,height:o.bottom-o.top}}function D(e,o){if(!w(e))throw new Error("Not an element");o=o||0;var n=I(e),r=[],a=[[n.left+o,n.top+o],[n.right+o,n.top+o],[n.left+o,n.bottom+o],[n.right+o,n.bottom+o]];return i.forEach(a,function(e){r.push(t.elementFromPoint(e[0],e[1]))}),r}function O(e,t){function o(e){return i.some(t,function(t){return M(e,t)})}var n=!1;if(!w(e))throw new Error("Not an element");for(;e&&"BODY"!==e.tagName;){if(o(e)){n=!0;break}e=e.parentNode}return n}function S(t){return"function"==typeof e.getComputedStyle?e.getComputedStyle(t):t.currentStyle}function N(t){function i(){r(),n=void 0,t()}var n,r;r=o.bind(e,"scroll",function(){n&&e.clearTimeout(n),n=e.setTimeout(i,X)})}function T(e,t,o){function n(){var t=I(e);return!a.equals(t)&&(a=t,!0)}var r,a=I(e);return o=o||Y,r=i.poll(n,t,o)}function B(i){function n(){r&&r(),a&&a(),i()}var r,a;"interactive"===t.readyState||"complete"===t.readyState?n():(r=o.bind(e,"load",n),t.addEventListener?a=o.bind(t,"DOMContentLoaded",n):(t.onreadystatechange=function(){"interactive"!==t.readyState&&"complete"!==t.readyState||n()},a=function(){t.onreadystatechange=null}))}function P(e){var t;if(e.nodeType===a.Dom.ELEMENT_NODE)t=I(e);else{if(e.nodeType!==a.Dom.TEXT_NODE)throw new Error("Node type not supported: "+e.nodeType);t=K(e)}return!!t.getIntersection(l())}function L(e){var t;if(e.nodeType===a.Dom.ELEMENT_NODE)t=I(e);else{if(e.nodeType!==a.Dom.TEXT_NODE)throw new Error("Node type not supported: "+e.nodeType);t=K(e)}var o=l(),i=t.getIntersection(o);return i?Math.max(i.bottom-i.top,0):0}function H(e,t){function o(e){var t;return e=e.parentNode,null!==e&&e.nodeType===a.Dom.ELEMENT_NODE&&(t=S(e),"hidden"===t.overflow&&parseInt(t.opacity)>0&&!n.getIntersection(I(e))||o(e))}var i,n;return t=t||{},i=S(e),"none"!==i.display&&"hidden"!==i.visibility&&"0"!==i.opacity&&(!t.overflowCheck||(n=I(e),!o(e)))}function _(e){for(var t,o,i,n={height:e.height,width:e.width},r={y:e.offsetTop||0,x:e.offsetLeft||0,el:e.offsetParent};null!==(e=e.parentNode);)if(t=e&&e.tagName?S(e):null){var a=t&&("hidden"===t.overflow||"hidden"===t.overflowX),s=t&&("hidden"===t.overflow||"hidden"===t.overflowY);s&&(o=e.offsetHeight-r.y,e!==r.el&&(o+=e.offsetTop||0),o<n.height&&(o<0?n.height=0:n.height=o)),a&&(i=e.offsetWidth-r.x,e!==r.el&&(i+=e.offsetLeft||0),i<n.width&&(i<0?n.width=0:n.width=i))}return n}function V(e){for(var t;e.parentNode;)if(e=e.parentNode,t=e.nodeName.toLowerCase(),"p"===t||"div"===t)return e;return null}function U(e,t){return i.isArray(t)||(t=[t]),i.some(t,function(t){return e.querySelector(t)})}function R(e,t){i.isIE?e.innerText=t:e.textContent=t}function F(e){var t=e.nextElementSibling;if("undefined"==typeof t)for(e=e.nextSibling,t=null;null!==e;){if(e.nodeType===a.Dom.ELEMENT_NODE){t=e;break}e=e.nextSibling}return t}function M(e,o){return e.matches?e.matches(o):i.includes(t.querySelectorAll(o),e)}function W(e,t){e.style.webkitTransformOrigin=t,e.style.MozTransformOrigin=t,e.style.transformOrigin=t,e.style.msTransformOrigin=t,e.style.OTransformOrigin=t}function z(e,t,o){e.style.webkitTransform="scale("+t+","+o+")",e.style.MozTransform="scale("+t+","+o+")",e.style.transform="scale("+t+","+o+")",e.style.msTransform="scale("+t+","+o+")",e.style.OTransform="scale("+t+","+o+")"}function G(e){if(!(e&&"object"==typeof e&&i.isFiniteNumber(e.top)&&i.isFiniteNumber(e.left)&&i.isFiniteNumber(e.bottom)&&i.isFiniteNumber(e.right)))throw new Error("Coord: obj is not valid");this.top=e.top,this.left=e.left,this.bottom=e.bottom,this.right=e.right}var K,j=t.head||t.getElementsByTagName("head")[0],X=50,q=10,Y=2500,J="-1000px";return b.newWindow=function(t){e.open(t)},b.sameWindow=function(e){t.location.href=e},K=t.createRange&&Range.prototype.getBoundingClientRect?function(e){var o=t.createRange();return o.selectNodeContents(e),new G(o.getBoundingClientRect()).shiftX(s()).shiftY(c())}:function(e){var o=e.parentNode,i=t.createElement("span");o.replaceChild(i,e),i.appendChild(e);var n=i.getBoundingClientRect();return o.replaceChild(e,i),new G(n).shiftX(s()).shiftY(c())},G.prototype.equals=function(e){var t=e instanceof G?e:new G(e);return this.top===t.top&&this.left===t.left&&this.bottom===t.bottom&&this.right===t.right},G.prototype.clone=function(){return new G(this)},G.prototype.getIntersection=function(e){var t,o,i;return t=e instanceof G?e:new G(e),o=this,i=t,o.equals(i)?o.clone():o.bottom<=i.top||o.top>=i.bottom||o.right<=i.left||o.left>=i.right?void 0:new G({top:Math.max(o.top,i.top),left:Math.max(o.left,i.left),bottom:Math.min(o.bottom,i.bottom),right:Math.min(o.right,i.right)})},G.prototype.getCenter=function(){return{x:this.left+(this.right-this.left)/2,y:this.top+(this.bottom-this.top)/2}},G.prototype.setCenter=function(e){var t=this.getCenter();if(e&&"object"==typeof e&&i.isFiniteNumber(e.x)&&i.isFiniteNumber(e.y))return this.top+=e.y-t.y,this.left+=e.x-t.x,this.bottom+=e.y-t.y,this.right+=e.x-t.x,this},G.prototype.pixels=function(){return(this.right-this.left)*(this.bottom-this.top)},G.prototype.shiftX=function(e){if(i.isFiniteNumber(e))return this.left+=e,this.right+=e,this},G.prototype.shiftY=function(e){if(i.isFiniteNumber(e))return this.top+=e,this.bottom+=e,this},G.prototype.contains=function(e){var t=e instanceof G?e:new G(e),o=this.getIntersection(t);return!!o&&o.equals(t)},G.prototype.getWidth=function(){return this.right-this.left},G.prototype.getHeight=function(){return this.bottom-this.top},G.prototype.getArea=function(){return this.getWidth()*this.getHeight()},{appendIFrame:p,appendDisposableIFrame:h,appendScript:g,appendTextScript:v,appendDisposableScript:f,appendStyleSheet:m,appendInlineStyle:y,createIFrame:u,dropImage:k,findParentParagraph:V,elementHasNodes:U,getTextNodeBounds:K,getTextDimensions:E,isElement:w,isDocFragment:C,getPosition:I,setPosition:x,getDimension:A,elementsAtPoints:D,parentHasSelector:O,getStyle:S,getAbsoluteViewport:l,getWinWidth:n,getWinHeight:r,getScrollX:s,getScrollY:c,nextElementSibling:F,matchesSelector:M,onViewportChange:N,onPositionChange:T,openUrl:b,setTextContent:R,smoothScrollY:d,waitForReadyState:B,isInViewport:P,pixelHeightInViewport:L,isVisible:H,getVisibleRect:_,transformOrigin:W,transformScale:z,Coord:G}},a.Dom.ELEMENT_NODE=1,a.Dom.TEXT_NODE=3;var a=a||{};a.Events=function(e){function o(e){e.stopPropagation?e.stopPropagation():(e.cancelBubble=!0,e.returnValue=!1)}function i(){return this[s]={},this.connections=[],this}function n(e){this.data=e||{}}function r(e,t,o,i){return e.connect(t,o,i)}function a(e,t,o,i){return i=i||t,c(e,t,function(e){o.fire(i,e)})}var s="CustomEventsStore__",c=function(){return t.addEventListener?function(e,t,o){return e.addEventListener(t,o,!1),function(){e.removeEventListener(t,o,!1)}}:function(e,t,o){return t="on"+t,e.attachEvent(t,o),function(){e.detachEvent(t,o)}}}();return i.prototype.on=function(e,t,o,i){return this[s][e]||(this[s][e]=[]),i=i||[],this[s][e].push([t,o,i]),this},i.prototype.once=function(e,t,o,i){var n=this,r=!1,a=function(){n.unbind(a),r||(r=!0,t.apply(o,arguments))};return this.on(e,a,o,i)},i.prototype.fire=function(t,o){var i=this[s][t];if(i)return e.forEach(i.slice(),function(e){var t=e[0],i=e[1],r=e[2];t.apply(i,[new n(o)].concat(r))}),this},i.prototype.connect=function(e,t,o){o=o||e;var i=function(e){t.fire(o,e.data)};return this.connections.push({leftEvent:e,rightObservable:t,rightEvent:o,callback:i}),this.on(e,i)},i.prototype.disconnect=function(t,o,i){var n=[];e.forEach(this.connections,function(e,r){t===e.leftEvent&&o===e.rightObservable&&i===e.rightEvent&&(this.unbind(t,e.callback),n.push(r))},this),e.forEach(n,function(e){this.connections.splice(e,1)},this)},i.prototype.disconnectAll=function(t){var o=[];e.forEach(this.connections,function(e,i){t===e.rightObservable&&(this.unbind(e.leftEvent,e.callback),o.push(i))},this),e.forEach(o,function(e){this.connections.splice(e,1)},this)},i.prototype.unbind=function(t,o){var i=this[s][t];i&&e.some(i,function(e,t){if(e[0]===o)return i.splice(t,1),!0})},i.prototype.unbindAll=function(){this[s]={}},{bind:c,bindConnect:a,connect:r,stopPropagation:o,Observable:i,VMEvent:n}};var a=a||{};a.Log=function(e,t,o,i,n,r,s){function c(e,t,o){var n=o?p+e:h+e;return i.replaceUrlParams(n,i.extend({},f,t))}function d(e){return function(t){var i=c(m[e],t);o.dropImage(i),u(e,t.product)}}function l(e,t,o){e.setId||(e.setId=g[e.hookId]?g[e.hookId].setId:0);var i=c(m.behaviour,e,!0),s={action:encodeURIComponent(t)};n.log(i,function(t){r.fire(a.app.trigger.dmpBehaviourDrop,{action:o,setId:e.setId,behaviours:t})},s)}function u(e,t){s.info("Log Event: "+e+":"+t)}var p="/log/"+e.log,h="//"+t.apiHost+p,g={},v=t.get("articleHash",t.get("urlHash","")),f={ipid:t.ipid,urlHash:t.urlHash,pvu:t.pvu,postcode:t.geo&&t.geo.pc||"",contextKey:v},m={hookLoad:"/hl/{{ipid}}/{{product}}/{{hookIds}}/{{urlHash}}/{{pvu}}",hookFailure:"/hf/{{ipid}}/{{product}}/{{hookId}}/{{reason}}/{{urlHash}}/{{pvu}}",hookReplacement:"/hr/{{ipid}}/{{product}}/{{oldHookId}}/{{newHookId}}/{{oldAdProviderId}}/{{newAdProviderId}}/{{reason}}/{{pvu}}",adImpression:"/ai/{{ipid}}/{{product}}/{{hookId}}/{{source}}/{{urlHash}}/{{pvu}}/{{setId}}",clickThrough:"/ck/{{ipid}}/{{product}}/{{hookId}}/{{source}}/{{urlHash}}/{{pvu}}?url={{clickUrl}}",adChoiceClick:"/ac/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}",adClose:"/cl/{{ipid}}/{{product}}/{{hookId}}/{{source}}/{{urlHash}}/{{pvu}}",firstHook:"/mt/tfh/{{timestamp}}/{{ipid}}",auditError:"/adt/{{urlHash}}/{{ipid}}/{{pvu}}/{{timestamp}}/I/{{message}}",pageTracking:"/ptr/{{urlHash}}/{{ipid}}/{{pvu}}/{{referrer}}",videoEvent:"/ve/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}/{{event}}/{{position}}/{{duration}}/{{videoId}}/{{creativeId}}",cpeInteraction:"/cpei/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}/{{event}}/{{element}}/{{creativeId}}",cpeClickThrough:"/cpeck/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}/{{element}}/{{creativeId}}?url={{clickUrl}}",cpeClose:"/cpec/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}/{{dwell}}/{{creativeId}}",engagement:"/eng/{{ipid}}/{{product}}/{{hookId}}/{{source}}/{{urlHash}}/{{pvu}}/{{creativeId}}",progressBar:"/prg/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}/{{event}}/{{creativeId}}",headerBid:"/hdrb/{{ipid}}/{{pvu}}/{{geo}}?bids={{bids}}",noHeaderBid:"/nohdrb/{{ipid}}/{{pvu}}/{{geo}}/{{platform}}/{{bidderName}}",behaviour:"/beh/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}/{{setId}}/{{contextKey}}"},y=["clickThrough","cpeClickThrough","auditError","headerBid","adImpression","videoEvent","cpeInteraction","engagement"],k={};for(var b in m)m.hasOwnProperty(b)&&!i.includes(y,b)&&(k[b]=d(b));return k.adImpression=function(e){var t="Ad View";l(e,t,"adImpression");var i=c(m.adImpression,e);o.dropImage(i),g[e.hookId]||(g[e.hookId]=e),u("adImpression",e.product)},k.clickThrough=function(e,t){var n,r="Click";l(e,r,"clickThrough"),e.clickUrl&&e.clickUrl.length&&!t?(e.clickUrl=i.replaceUrlParams(e.clickUrl,i.extend({},f,e)),n=c(m.clickThrough,e),o.openUrl(n)):(delete e.clickUrl,n=c(m.clickThrough,e),o.dropImage(n)),u("clickThrough",e.product)},k.cpeClickThrough=function(e){var t="Click";e.clickUrl=i.replaceUrlParams(e.clickUrl,i.extend({},f,e)),l(e,t,"cpeClickThrough"),o.openUrl(c(m.cpeClickThrough,e)),u("cpeClickThrough",e.product)},k.cpeInteraction=function(e){var t="Interaction";l(e,t,"cpeInteraction");
var i=c(m.cpeInteraction,e);o.dropImage(i),u("cpeInteraction",e.product)},k.engagement=function(e){var t="Engagement";l(e,t,"engagement");var i=c(m.engagement,e);o.dropImage(i),u("engagement",e.product)},k.videoEvent=function(e){var t=c(m.videoEvent,e);o.dropImage(t),u("videoEvent",e.product)},k.headerBid=function(e){var n=t.geo&&t.geo.cc||"",r=JSON.stringify(e||{}),a=i.extend({},f,{bids:r,geo:n}),s=c(m.headerBid,a);o.dropImage(s)},k.noHeaderBid=function(e){var n=t.geo&&t.geo.cc||"",r=t.platform,a=i.extend({},f,{bidderName:e,geo:n,platform:r}),s=c(m.noHeaderBid,a);o.dropImage(s)},k.auditError=function(e){if(e.message)return e.timestamp=e.timestamp||+new Date,o.dropImage(c(m.auditError,e)),u("auditError",e.product),new Error(e.message)},k.getUrl=function(e,t){if(m[e])return t.clickUrl&&(t.clickUrl=i.replaceUrlParams(t.clickUrl,i.extend({},f,t))),c(m[e],t)},r.on(a.app.context.key,function(e){v=e.data.contextKey}),k.getParamsByHookId=function(e){if(e)return g[e]},k},a.Log.hookReason={TERM_NOT_FOUND:100,OVERLAPPING_TERM:101,OVERRIDE:102},a.Log.viewSource={LOAD:100,MOUSE_OVER:200,SCROLL:300},a.Log.clickSource={AD:100,HOOK:200},a.Log.closeSource={AD:100,AUTO:200,FORCE:300},a.Log.headerBid={SUCCESS:100,FAILURE:200};var a=a||{};a.Net=function(e,t,o,i,n){function r(t){var r,a,s=t.scope,c=t.id;return s?(f[s]=f[s]||{},m[s]=m[s]||{},h[s]=f[s],r=h[s]):(s=u,f[s]=f[s]||{},m[s]=m[s]||{},r=e,c=c||"vib_"+v++),a=n.replaceUrlParams(t.url,{callbackId:c,callbackScope:s,id:c}),f[s][c]?m[s][c]:(f[s][c]=n.once(function(e){r[c]=void 0,f[s][c]=void 0,m[s][c].fire("data",e),m[s][c]=void 0}),r[c]=f[s][c],m[s][c]=new i.Observable,o.appendDisposableScript(a),m[s][c])}function a(e){return m[p][e]?m[p][e]:(m[p][e]=new i.Observable,setTimeout(function(){o.appendScript(e+"",function(){m[p][e].fire("load"),m[p][e]=void 0})},1),m[p][e])}function s(t,o){function r(){if(t.headers)for(var e in t.headers)t.headers.hasOwnProperty(e)&&d.setRequestHeader(e,t.headers[e]);"POST"===t.method&&d.setRequestHeader("Content-Type","application/json"),d.withCredentials=!0}var a,s,c,d=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(!t.url)throw new Error("[Net] No URL was specified");t.async=t.async!==!1,t.method=t.method||"POST",a=n.once(function(){o(null,JSON.parse(d.responseText))}),s=n.once(function(){o(new Error("[Net] There was an error sending the request"))}),c=n.once(function(){o(new Error("[Net] Request timed out"))});try{try{i.bind(d,"load",a),i.bind(d,"error",s),i.bind(d,"timeout",c),d.open(t.method,t.url,t.async),r()}catch(l){e.XDomainRequest?(d=new XDomainRequest,d.onprogress=function(){},d.onload=onload,d.onerror=s,d.open(t.method,t.url,t.async),r()):o(new Error("[Net] CORS not supported: "+l))}t.data?d.send(JSON.stringify(t.data)):d.send()}catch(l){o(new Error("[Net] Unable to perform XHR: "+l))}return d.onreadystatechange=function(){4===d.readyState&&d.status>=200&&d.status<300?a():d.status>=400&&s()},d}function c(e,t,i,r){var a;if(!g[i])throw new Error("[Net] Wrong method was used to notify: "+i);return a="iframe"===i?o.appendIFrame(n.replaceUrlParams(e,t||{}),null,r):"script"===i?o.appendScript(n.replaceUrlParams(e,t||{}),null,r):o.dropImage(n.replaceUrlParams(e,t||{}),r),a.style.display="none",a.style.visibility="hidden",a.style.width="1px",a.style.height="1px",a.width=1,a.height=1,a}function d(e,t){return o.openUrl(n.replaceUrlParams(e,t||{}))}function l(e,t){return n.replaceUrlParams(e,t||{})}var u="__default_VM_jsonp__",p="__default_VM_scripts__",h=e[t],g={image:"image",script:"script",iframe:"iframe"},v=0,f={},m={};return m[p]={},{jsonp:r,loadScript:a,xhr:s,notify:c,openUrl:d,compileUrl:l}};var a=a||{},s=2;a.Page=function(e,t,o,i){function n(n,r,c){if("function"==typeof r&&(c=r,r={}),!n.length)return void i.fire(a.app.trigger.contextComplete,{});var d=!t.nodes||Math.abs(n.length-t.nodes.length)>s;d||(d=o.some(t.nodes,function(e,t){return!n[t]||n[t].getId()!==e})),d?e.contextualise(n,r,function(e){var t=e&&e.behaviours?e.behaviours:[];i.fire(a.app.trigger.contextComplete,{behaviours:t}),c(e)}):(e.logContext(t.get("articleHash",t.get("urlHash")),function(e){var t=e&&e.behaviours?e.behaviours:[];i.fire(a.app.trigger.contextComplete,{behaviours:t})}),c({articleHash:t.get("articleHash",null),pubXReached:!!t.pubXReached}))}return{contextualise:n}};var a=a||{};a.PubXBuilder=function(e){a.PubX=e.serviceVersion?a.PubXNEW:a.PubXOLD},a.PubXNEW=function(e){function t(e){i=parseInt(e,10)}function o(t){switch(i){case a.PubXNEW.ALLOW_ALL:case a.PubXNEW.BACKFILL_ONLY:return!0;case a.PubXNEW.BLOCK_ALL:return!1;case a.PubXNEW.BLOCK_IN_CONTENT:return t!==a.PubXNEW.IN_CONTENT;default:throw new e.auditError({message:"Unknown PubX action "+i})}}var i=a.PubXNEW.ALLOW_ALL;return{set:t,isAllowed:o}},a.PubXNEW.OTHER=0,a.PubXNEW.IN_CONTENT=1,a.PubXNEW.ALLOW_ALL=0,a.PubXNEW.BLOCK_ALL=1,a.PubXNEW.BLOCK_IN_CONTENT=2,a.PubXNEW.BACKFILL_ONLY=3,a.PubXOLD=function(e){function t(e){i=parseInt(e,10)}function o(t){switch(i){case a.PubXOLD.ALLOW_ALL:case a.PubXOLD.BACKFILL_ONLY:return!0;case a.PubXOLD.BLOCK_ALL:return!1;case a.PubXOLD.BLOCK_IN_CONTENT:return t!==a.PubXOLD.IN_CONTENT;default:throw new e.auditError({message:"Unknown PubX action "+i})}}var i=a.PubXOLD.ALLOW_ALL;return{set:t,isAllowed:o}},a.PubXOLD.OTHER=0,a.PubXOLD.IN_CONTENT=1,a.PubXOLD.ALLOW_ALL=1,a.PubXOLD.BLOCK_ALL=2,a.PubXOLD.BLOCK_IN_CONTENT=3,a.PubXOLD.BACKFILL_ONLY=4;var a=a||{};a.Tracking=function(e,t,o,i,n,r){function s(e){var t=!!e.getAd&&e.getAd().creative.diyValues;o.isObject(t)&&t.hasOwnProperty("bidder")&&e.on("impression",function(){n.fire(a.app.bid.impression,{bidder:t.bidder,zoneId:t.zoneId,product:e.product})})}function c(e,n,a){s(e),n&&n.length&&r.trackingAllowed()&&o.forEach(n,function(n){var r=d[n.trackerType],s=o.extend({timestamp:+new Date},l,n.params||{},a||{});if(!r)throw i.auditError({message:"[Tracking] Unrecognised tracker type: "+n.trackerType});e.on(n.onEvent,function(){t.notify(n.actionUrl,s,r,e.companion||e.outerBox)})})}var d={image:"image",script:"script",iframe:"iframe"},l={ipid:e.ipid,urlHash:e.urlHash,pvu:e.pvu,postcode:e.geo&&e.geo.pc||""};return{track:c}};var a=a||{};a.Utils=function(){function o(t,o,i){var n;return i=i||{},i.leading?function(){n?clearTimeout(n):t.apply(null,arguments),n=e.setTimeout(function(){n=void 0},o)}:function(){var i=arguments;n&&clearTimeout(n),n=e.setTimeout(function(){n=void 0,t.apply(null,i)},o)}}function i(e){return e.replace(N,"\\$&")}function n(e){for(var t=1,o=arguments.length;t<o;++t){var i=arguments[t];if("object"!=typeof i)break;for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}return e}function r(e,t,o){for(var i in e)e.hasOwnProperty(i)&&t.call(o,e[i],i)}function a(e){for(var t,o=0,i=0,n=e.length;i<n;++i)t=e.charCodeAt(i),o=(o<<5)-o+t,o|=0;return o}function s(e,t){var o=!0;return t=f(t)?t:[t],k(t,function(t){o&&(o=C(e,t))}),!!o}function c(e){if(Object.keys)return 0===Object.keys(e).length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function d(e){return"object"==typeof e&&null!==e&&!f(e)}function l(e,t){var o=!1;return function(){o||(o=!0,e.apply(t,arguments))}}function u(e,t){return e.replace(T,function(e,o){return t.hasOwnProperty(o)?encodeURIComponent(String(t[o])):""})}function p(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o+"="+encodeURIComponent(e[o]));return t.join("&")}function h(e){var t,o={params:{}};if(e.indexOf("?")!==-1)t=e.split("?"),o.url=t[0],e=t[1],e=e.replace(/&amp;/g,"&"),e=0!==e.indexOf("&")?"&"+e:e,k(e.split("&"),function(e){e&&(t=e.split("="),o.params[t[0]]=decodeURIComponent(t[1]))});else{for(var i=e;i.length&&"/"===i.slice(-1);)i=i.slice(0,-1);o.url=i}return o}function g(e,t){return e.length>t?e.substr(0,t-3)+"":e}function v(t){return"number"==typeof t&&e.isFinite(t)}function f(e){return"[object Array]"===Object.prototype.toString.call(e)}function m(t,o,i){function n(){a&&e.clearTimeout(a)}function r(){t()&&o(),a=e.setTimeout(r,i)}var a;return i=i||1e3,a=e.setTimeout(r,i),n}function y(e,t,o){var i=+new Date;i-e>=t&&o()}var k,b,w,C,E,I,x,A,D,O,S,N=/[.*+?^${}()|[\]\/\\]/g,T=/{{([A-Za-z]\w*)}}/g;k=Array.prototype.forEach?function(e,t,o){return e?void Array.prototype.forEach.call(e,t,o):void console.log("Utils forEach: null items")}:function(e,t,o){if(!e)return void console.log("Utils forEach: null items");for(var i=0,n=e.length;i<n;++i)t.call(o,e[i])},Array.prototype.find=null,Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],n=0;n<o;){var r=t[n];if(e.call(i,r,n,t))return r;n++}}}),b=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return r(e,function(e,o){t.push(o)}),t},w=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return r(e,function(o,i){t.push(e[i])}),t},C=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t)!==-1}:function(e,t){return I(e,function(e){return e===t})},E=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t)}:function(e,t){for(var o=[],i=0,n=e.length;i<n;++i)o.push(t(e[i]));return o},I=Array.prototype.some?function(e,t,o){return Array.prototype.some.call(e,t,o)}:function(e,t,o){for(var i=0,n=e.length;i<n;++i)if(t.call(o,e[i],i))return!0;return!1},x=Array.prototype.filter?function(e,t,o){return Array.prototype.filter.call(e,t,o)}:function(e,t,o){for(var i=[],n=0;n<e.length;n++)t.call(o,e[n],n,e)&&i.push(e[n]);return i},A=String.prototype.trim?function(e){return e.trim()}:function(e){return e=e.replace(/^\s+|\s+$/g,"")},D=function(){function e(e){return encodeURIComponent(t(e))}function t(e){for(var t,i,n,r,a,s,c,d="",l=0;l<e.length;)t=e.charCodeAt(l++),i=e.charCodeAt(l++),n=e.charCodeAt(l++),r=t>>2,a=(3&t)<<4|i>>4,s=(15&i)<<2|n>>6,c=63&n,isNaN(i)?(s=64,c=64):isNaN(n)&&(c=64),d+=o.charAt(r)+o.charAt(a)+o.charAt(s)+o.charAt(c);return d}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:t,encodeURI:e}}(),O=function(){var o,i,n,r=e.navigator.userAgent,a=r.indexOf("MSIE");if(a>-1){o=3,i=t.createElement("div"),n=i.all||[];do i.innerHTML="<!--[if gt IE "+ ++o+"]><br><![endif]-->";while(n[0]);return o>4&&o}return!1}(),S=function(e){return e?function(e){return e&&"number"==typeof e.length&&"undefined"!=typeof e.item&&"undefined"==typeof e.push&&"undefined"==typeof e.pop}:function(e){return e instanceof NodeList}}(!!O);var B=function(){var e=Date.now();this.elapsed=function(){return Date.now()-e},this.reset=function(){e=Date.now()}};return{debounce:o,escapeRegExp:i,extend:n,forEach:k,forOwn:r,keys:b,values:w,hashString:a,includes:C,includesAll:s,isEmpty:c,isObject:d,map:E,once:l,some:I,filter:x,replaceUrlParams:u,toQueryString:p,parseQueryString:h,trim:A,truncate:g,isFiniteNumber:v,isArray:f,poll:m,timeDeltaPassed:y,Base64:D,isIE:O,isNodeList:S,Timer:B}};var a=a||{};a.Waterfall=function(e,t,o,i,n){function r(i){var r,a,s=o.get("partner."+i+".runcheck",null);if(null===s)return!1;switch(r=s.get("type"),a=s.get("value"),r){case"css":return null!==t.querySelector(a);case"var":return e.hasOwnProperty(a);default:throw n.auditError({message:"[Waterfall] Unknown run check type: "+r})}}function a(t){if(i.isObject(e.VMNoAds)&&"function"==typeof e.VMNoAds[t])try{n.auditError({message:"[Waterfall] Failed loading product: "+t}),e.VMNoAds[t]()}catch(o){}}return{isBlocked:r,notifyFailure:a}};var c=c||{};c.Banner=function(e,t,o,i,n,r,s){function c(c){var d=c.template.params,l=c.getDiyValues().nohookclick||!1;if(c.getDiyValues().bidder&&c.getDiyValues().zoneId){var u=r.getBid(c.getDiyValues().bidder,c.getDiyValues().zoneId);if(!u)return void s.info("Header bidding: No valid impressions available for: Bidder: "+c.getDiyValues().bidder+"ZoneId: "+c.getDiyValues().zoneId);d.width=u.width,d.height=u.height;var p=c.getAd();p&&(p.creative.diyValues.iframe=u.scriptTag,p.creative.diyValues.zoneId=u.zoneId)}return e.create({width:parseInt(d.width,10),height:parseInt(d.height,10),load:function(){function e(e){function t(){o.clickThrough(i.extend(p,{source:e}))}var n;e===a.Log.clickSource.HOOK&&l||(n=c.getClickDelay(),i.timeDeltaPassed(c.openTime,n,t))}var r=c.getAd(),s=c.getAdConfig(),u=1,p={product:c.product,hookId:s.vibrantParameters.hookId,setId:s.vibrantParameters.setId,keyword:encodeURIComponent(s.term&&s.term.keyword||""),timestamp:+new Date,clickUrl:r.clickUrl},h=t.createIFrame({width:d.width,height:d.height,fixMaxDimensions:!0},function(e,o){var a=n.getBoolean("partner.image.scaletofit",!0);if("image"===c.product&&c.settings&&c.settings.container&&a){var s=c.settings.container.width,l=r.width;s&&l&&l>s&&(u=s/l)}1!==u&&(t.transformOrigin(o,"bottom left"),t.transformScale(o,u,u));var p=r.creative.diyValues.iframe;p=p?i.replaceUrlParams(p,d):"",o.contentWindow.contents=p,o.src="javascript:window['contents']"});r.clickUrl&&(c.on(c.EVENT_CLICK,function(){e(a.Log.clickSource.AD)}),c.on("delegate",function(t){"click"===t.data.triggerSource&&e(t.data.source)})),c.fire("loaded",h)}})}return{create:c}};var c=c||{};c.C2S=function(o,i){function n(t,o){var i=0;return function n(){e.setTimeout(function(){if(o.contentWindow&&o.contentWindow.pbCall)t.fire("close",a.Log.closeSource.FORCE);else if(o.contentDocument&&o.contentDocument.body&&o.contentDocument.body.childNodes.length>=s)return;++i<d?n():t.fire("close",a.Log.closeSource.FORCE)},c)}}function r(e){return o.create({width:parseInt(e.settings.ads[0].width,10),height:parseInt(e.settings.ads[0].height,10),load:function(){var o=t.createElement("script");o.type="text/javascript",o.src=e.template.id;var r=i.createIFrame({width:e.settings.ads[0].width,height:e.settings.ads[0].height},function(t,i){i.contentWindow.contents=o.outerHTML,i.src="javascript:window['contents']",setTimeout(n(e,i),1)});e.fire("loaded",r)}})}var s=3,c=500,d=3;return{create:r}};var c=c||{};c.CPE=function(e,t){function o(o){return e.create({load:function(){var e=this;t.load({adInstance:o,templateData:o.template},function(t){e.width=parseInt(t.width,10),e.height=parseInt(t.height,10),o.fire("loaded",t.element)})}})}return{create:o}};var c=c||{};c.Custom=function(e,t){function o(o){var i=o.template.params,n=i.scaleToWidth?!!parseInt(i.scaleToWidth,10):null;return"image"===o.product&&n!==!1||n?(i.width=o.settings.container&&o.settings.container.width||parseInt(i.width,10),i.scaleToHeight?i.height=o.settings.container&&o.settings.container.height||parseInt(i.height,10):i.height=parseInt(i.height,10)):(i.width=parseInt(i.width,10),i.height=parseInt(i.height,10)),e.create({load:function(){var e=this;t.load({adInstance:o,templateData:o.template},function(t){e.width=parseInt(t.width,10),e.height=parseInt(t.height,10),o.fire("loaded",t.element)})}})}return{create:o}};var c=c||{};c.Standard=function(e,o,i,n){function r(r){var c,d,l=r.template.params,u=l.scaleToWidth?!!parseInt(l.scaleToWidth,10):null,p=r.getDiyValues().nohookclick||!1;return"image"===r.product&&u!==!1||u?(c=r.settings.container&&r.settings.container.width||parseInt(l.width,10),d=l.scaleToHeight?r.settings.container&&r.settings.container.height||parseInt(l.height,10):parseInt(l.height,10)):(c=parseInt(l.width,10),d=parseInt(l.height,10)),e.create({width:c,height:d,load:function(){function e(e){function t(){i.clickThrough(n.extend(m,{source:e}))}var o;e===a.Log.clickSource.HOOK&&p||(o=r.getClickDelay(),n.timeDeltaPassed(r.openTime,o,t))}var u,h=r.getAd(),g=r.getAdConfig(),v=t.createElement("div"),f=r.isResponsive();r.mergedCreativeParams=n.extend({},h.creative.diyValues||{},h.creative.setValues||{},l);var m={product:r.product,hookId:g.vibrantParameters.hookId,setId:g.vibrantParameters.setId,keyword:encodeURIComponent(g.term&&g.term.keyword||""),timestamp:+new Date,clickUrl:h.clickUrl},y=n.extend({},m,r.mergedCreativeParams,{clickUrl:i.getUrl("clickThrough",n.extend(m,{source:a.Log.clickSource.AD}))});y.hasOwnProperty("description")&&y.description&&(y.description=n.truncate(y.description,s)),v.innerHTML=r.template.execute(y),v.firstChild.width=c,v.firstChild.height=d,v.firstChild.style&&(f?(v.firstChild.style.width="100%",v.firstChild.style.height="100%",v.firstChild.style["max-width"]="100%",v.firstChild.style["max-height"]="100%"):(v.firstChild.style.width=c+"px",v.firstChild.style.height=d+"px",v.firstChild.style["max-width"]=c+"px",v.firstChild.style["max-height"]=d+"px"),v.firstChild.style.margin="0px",v.firstChild.style.padding="0px"),u=v.firstChild,o.bind(u,"click",function(){e(a.Log.clickSource.AD)}),r.on(r.EVENT_CLICK,function(){e(a.Log.clickSource.HOOK)}),r.on("delegate",function(t){"click"===t.data.triggerSource&&e(t.data.source)}),r.fire("loaded",u)}})}var s=200;return{create:r}};var c=c||{};c.Video=function(e,t){function o(o){var i=o.getAd(),n=parseInt(o.template.params.width,10)||i.width,r=parseInt(o.template.params.height,10)||i.height;return e.create({width:n,height:r,load:function(){var e=o.settings.ads[0].creative.diyValues;o.template.params.vast=e.vpaid||e.VastAdTagUri||e.vast||o.template.params.vast,o.template.params.width=n,o.template.params.height=r,t.load({adInstance:o,templateData:o.template},function(e){o.fire("loaded",e.element)},"videoFrame")}})}return{create:o}};var c=c||{};c.Waterfall=function(e){function t(t,o,n){var r=t.getAd(),a=r.creative,s=a.diyValues||{},c=n,d=r.hook||{},l=a.creativeType,u=t.template.template?t.template.template.trim():"";return s.VastAdTagUri||s.vpaid||s.vast&&!u.length?{creative:e.video.create(t),decoration:c}:"c2s"===l||t.template.params.c2s?{creative:e.c2s.create(t),decoration:c}:t.template.params.isCPE?("inview"!==o&&(c=i),{creative:e.cpe.create(t),decoration:c}):t.template.params.isCustom?("adbar"===o&&(c="image"),{creative:e.custom.create(t),decoration:c}):s.iframe||s.bidder?{creative:e.banner.create(t),decoration:c}:(d&&d.isHibu&&(c="legacyadhesion"),"adbar"===o&&(c="image"),{creative:e.standard.create(t),decoration:c})}function o(e,t,o){return(n[t]||n.fallback)(e,t,o)}var i="cpeProgressBar",n={inline:t,daw:t,adhesion:t,image:t,inview:t,instory:t,tooltip:t,adbar:t,fallback:t};return{select:o,creatives:e}};var d=d||{};d.audience=function(e,o,i,n){function r(){if(y){var e=".crwdcntrl.net",o=!0,i=t.cookie.indexOf("_cc_domain");if(i>-1){var n=t.cookie.indexOf("=",i);if(n>0){o=!1,n++;var r=t.cookie.indexOf(";",n);r=r>0?r:t.cookie.length,e=t.cookie.slice(n,r)}}var a=!1;if(o){var s;if(i=t.cookie.indexOf("_cc_id"),i>-1){var c=t.cookie.indexOf("=",i);if(c>0){a=!0,c++;var d=t.cookie.indexOf(";",c);d=d>0?d:t.cookie.length,s=t.cookie.slice(c,d)}}}var l="//ad"+e;return"undefined"!=typeof portNumber&&null!=portNumber&&(l=l+":"+portNumber),l=l+"/5/c="+y+"/pe=y/callback="+k,a&&(l=l+"/pid="+s),l}}function a(){if(!v)return void(h="noconsent");if("pending"===h){c=Date.now(),h="inprogress";var t=r();if(!t)return void(h="urlerror");e[m]=function(t){t.Profile&&t.Profile.Audiences&&t.Profile.Audiences.Audience&&(g=t.Profile.Audiences.Audience.map(function(e){return parseInt(e.id,10)})),d=Date.now()-c,h="complete";try{delete e[m]}catch(o){e[m]=void 0}},o.appendScript(t)}}function s(e){function t(){if(f){var o="complete"===h?d:Date.now()-c;console.log("getAudienceDataInternal: Status: "+h+" time: "+o+" msecs")}return"noconsent"===h||"urlerror"===h?e(h,null):"complete"===h?e(null,g):Date.now()-c>l?(f&&console.log("getAudienceDataInternal: Timeout"),e(p,null)):void setTimeout(t,u)}setTimeout(t,0)}i=i||{};var c,d,l=2e3,u=100,p="audience_extraction_timeout",h="pending",g=[],v=n.lotameAudienceExtractionAllowed(),f=0,m="cc_auds",y=i.lotame?i.lotame.networkId:null,k=m;return{runAudienceExtraction:a,getAudienceData:s}};var d=d||{};d.collection=function(e,t,o,i,n,r,s,c,d){function l(e){function o(){e()}var i=t.createElement("script");i=t.createElement("script"),i.type="text/javascript",i.async=!0,i.src=f,i.setAttribute("id","LOTCC_"+y),i.addEventListener?i.addEventListener("load",o,!1):i.onreadystatechange=function(){"loaded"!==i.readyState&&"complete"!==i.readyState||o()},t.head.appendChild(i)}function u(t,o){t&&o&&(e[b]?(c.info("LOTAME: Sending: key:value "+t+" : "+o),e[b].add(t,o)):c.error("dmp.collection: script not loaded"))}function p(){e[b]?e[b].bcp():c.error("dmp.collection: script not loaded")}function h(){var e=!0;return f||(c.error("No advancedTagUrl"),e=!1),m||(c.error("No behaviourUrl"),e=!1),y||(c.error("No vibrantId"),e=!1),b||(c.error("No lotameObject"),e=!1),k||(c.error("No clientSpace"),e=!1),i.userId||(c.error("No userId"),e=!1),e}function g(t){h()&&d.lotameConsentApiAllowed()&&l(function(){var o={analytics:w,crossdevice:w,datasharing:w,targeting:w};e.LOTCC.setConsent(function(e){e.error&&c.warn("Lotame setConsent: error: "+e.error);var o=i.userId,n=i.ipid,a=i.geo?i.geo.cc:null;c.info("TP: "+k),c.info("TPID: "+o),c.info("IPID: "+n),c.info("COUNTRYCODE: "+a),u("tp",k),u("tpid",o),u("geo","country:"+a),p(),t&&t.length&&r.forEach(t,function(e){v(e)})},y,o)})}function v(e){if(!w)return void c.warn("Lotame dropBehaviour: Consent not granted");var o={BEHAVIOUR_ID:e,VIBRANT_ID:y};m.length&&s.notify(m,o,"image",t.body)}i=i||{};var f=i.lotame?i.lotame.advancedTagUrl:null,m=i.lotame?i.lotame.behaviourUrl:null,y=i.lotame?i.lotame.vibrantId:"",k=i.lotame?i.lotame.clientSpace:null,b=i.lotame?i.lotame.lotameObject:null,w=d.lotameCollectionAllowed();n.on(a.app.trigger.contextComplete,function(e){var t=e.data.behaviours||[];if(t.length){var o=t.reduce(function(e,t){return e+t+" "},"");c.info("dropping behaviours for contextComplete:"+o),g(t)}else c.warn("No behaviours for contextComplete:")},this),n.on(a.app.trigger.dmpBehaviourDrop,function(e){var t=e.data.behaviours||[];if(t.length){var o=t.reduce(function(e,t){return v(t),e+t+" "},"");c.info("dropping behaviours for "+e.data.action+" (setID "+e.data.setId+"): "+o)}else c.warn("No behaviours for "+e.data.action+" (setID "+e.data.setId+")")},this)};var l=l||{};l.consent=function(e,t,o,i){function n(){if(e.__cmp?i.info("CMP Framework loaded"):i.info("No CMP Framework loaded"),u.hasOwnProperty("consentStr"))for(var t in u)u.hasOwnProperty(t)&&"function"!=typeof u[t]&&i.info("Consent info: "+t+": "+u[t]);else i.error("Consent String not found")}function r(e){u=e}function a(){return!0}function s(){return u.vibrantConsent&&u.cookiesAllowed}function c(){return u.lotameConsent&&u.measurementAllowed}function d(){return u.lotameConsent&&u.personalisationAllowed}function l(){return!u.gdprApplies||u.consentStr&&u.consentStr.length}o=o||{};var u=o.get("consent",{});return{init:n,updateConsent:r,trackingAllowed:a,cookiesAllowed:s,lotameCollectionAllowed:c,lotameAudienceExtractionAllowed:d,lotameConsentApiAllowed:l}};var u=u||{},p=50;u.Hook=function(t,o,i,n,r,s,c){function d(t,d,l){var p,h=this,f=null,m=o.get("liveLookupWaterfall",[]),y={},k={};this.textNodeId=l,this.hookClickActive=!0,this.waterfallOverrideArray=m.slice(0),d.ads&&d.ads.length&&d.ads[0].creative&&(y=(((d.ads[0]||{}).creative||{}).payload||{}).params,k=r.extend({},d.ads[0].creative.diyValues||{},d.ads[0].creative.setValues||{},y),(k.liveLookupAdProvider||{}).length?(this.waterfallOverrideArray=[k.liveLookupAdProvider],this.hookClickActive=!1,this.liveLookupFailsShowUnderlyingAd=!1):this.liveLookupFailsShowUnderlyingAd=!0,!k.disableLiveLookup||1!==k.disableLiveLookup&&"1"!==k.disableLiveLookup||(this.waterfallOverrideArray=[])),d.product=s.hash[d.vibrantParameters.product];var b=k.clickUrl?k.clickUrl:"",w=(d.ads[0]||{}).clickUrl||b;this.hookClickable=!!w.length,this.createHookElement(d,k,t),this.adConfig=d,this.id=d.vibrantParameters.hookId,this.triggered=!1,this.hookCursorStyle=null,n.Observable.call(this),k.keywordOnly?(n.bind(this.domNode,"click",function(e){n.stopPropagation(e);var t=r.extend({},{source:(((a||{}).Log||{}).clickSource||{}).HOOK||"",hookId:(d.vibrantParameters||{}).hookId||"",setId:(d.vibrantParameters||{}).setId||"",keyword:(d.term||{}).keyword||"",clickUrl:d.clickUrl||"",product:d.product||"",timestamp:new Date,pvu:o.pvu,urlHash:o.urlHash,ipid:o.ipid},k||{}),s=c.getUrl("clickThrough",t),l=t.clickUrl.split("?"),u=2===l.length?l[0]+"?params="+btoa(JSON.stringify(t)):"",p=s.split("?");if(2===p.length){var h=p[0]+"?url="+encodeURIComponent(u);i.openUrl(h)}}),n.bind(this.domNode,"mouseenter",function(){h.hookCursorStyle&&h.domNode&&(h.domNode.style.cursor=h.hookCursorStyle)})):v?n.bind(this.domNode,"click",function(e){n.stopPropagation(e),h.hookClickable&&h.hookClickActive&&h.fire(u.Hook.EVENT_CLICK,{hook:h,event:e})}):(n.bind(this.domNode,"mouseenter",function(t){e.clearTimeout(f),f=e.setTimeout(function(){f=null,h.fire(u.Hook.EVENT_HOOKIN,{hook:h,event:t}),p||(p=n.bind(h.domNode,"click",function(e){n.stopPropagation(e),h.hookClickable&&h.hookClickActive&&h.fire(u.Hook.EVENT_CLICK,{hook:h,event:e})}))},g),h.hookCursorStyle&&h.domNode&&(h.domNode.style.cursor=h.hookCursorStyle)}),n.bind(this.domNode,"mouseleave",function(t){p&&(p(),p=null),f?(e.clearTimeout(f),f=null):h.fire(u.Hook.EVENT_HOOKOUT,{hook:h,event:t})}))}function l(e,o){function i(){return s.charAt(u.index)===c.charAt(0)?u.index:u.index+1}var n=e.getDomNode(),a=n.data;if(!a)return null;var s=a.toLowerCase(),c=r.escapeRegExp(o.term.keyword),l="(^|\\s|\\\"|\\')"+c.toLowerCase()+"(\\s|$|\\.|\\,|\\?|\\!|\\\"|\\')",u=new RegExp(l,"m").exec(s);if(!u||u.len<1)return null;if(!n.parentNode)return null;var p=i(),h=p+c.length,g=new d(a.substring(p,h),o,e.id),v=t.createDocumentFragment();return v.appendChild(t.createTextNode(a.substring(0,p))),v.appendChild(g.getDomNode()),v.appendChild(t.createTextNode(a.substring(h))),n.parentNode.replaceChild(v,n),e.addHook(g),e.updateDomNode(g.getDomNode()),f.push(g),g}function h(e){return r.filter(f,function(t){var o=i.isInViewport(t.getDomNode());return e?e===t.getAdConfig().product&&o:o})}var g=o.get("partner.intext.opendelay",p),v=o.get("mobile",!1),f=[];return d.prototype=new n.Observable,d.prototype.createHookElement=function(e,n,a){if(this.domNode=t.createElement("span"),this.domNode.className="vm-hook-outer",n.hookTooltipText){var s="";try{s=decodeURIComponent(r.replaceUrlParams(n.hookTooltipText,r.extend(e.vibrantParameters,n)))}catch(c){}this.domNode.title=s}var d=t.createElement("span");d.className="vm-hook",i.setTextContent(d,a),this.domNode.appendChild(d);var l=!0;if("instory"===e.product){var u=n.instoryShowHook,p=o.get("partner.instory.hook.show",null);l=null===p?!!u:!!p}var h=o.get("partner.hook.style.custom",null);if(l&&!h){var g=n["custom"+e.product.charAt(0).toUpperCase()+e.product.slice(1)+"HookStyle"],v=o.get("partner."+e.product+".hook.customstyle",null)||g;if(v&&v.length)d.style.cssText=v;else if(this.domNode.className+=" vm-hook-default",d.style.color="#009900",d.style.borderColor="transparent transparent #009900",this.hookClickable){var f=t.createElement("span");f.className="vm-hook-icon",f.style.display="inline-block",this.domNode.appendChild(f)}}else!l&&h&&(d.className+=" vm-hook-reset");n.hookCursorStyle?d.style.cursor=n.hookCursorStyle:d.style.cursor=this.hookClickable?"pointer":"text"},d.prototype.getId=function(){return this.id},d.prototype.getProduct=function(){return this.adConfig.product},d.prototype.getDomNode=function(){return this.domNode},d.prototype.getPosition=function(){return i.getPosition(this.domNode)},d.prototype.getAdConfig=function(){return this.adConfig},d.prototype.getCreativePayload=function(){var e;return this.adConfig&&this.adConfig.ads&&this.adConfig.ads.length&&this.adConfig.ads[0].creative&&(e=this.adConfig.ads[0].creative.payload),e},d.prototype.getWaterfallOverrideArray=function(){return this.waterfallOverrideArray},d.prototype.getWaterfallOverrideAllowed=function(){return this.waterfallOverrideArray.length>0},d.prototype.resetWaterfallOverrideAllowed=function(){this.waterfallOverrideArray.length=0},d.prototype.removeStyling=function(){this.domNode.classList.remove("vm-hook-default");var e=this.domNode.getElementsByClassName("vm-hook")[0];e&&e.removeAttribute("style");var t=this.domNode.getElementsByClassName("vm-hook-icon")[0];t&&t.removeAttribute("style")},d.prototype.setTriggered=function(){this.triggered=!0},d.prototype.hasBeenTriggered=function(){return this.triggered},d.prototype.isInViewport=function(){return i.getAbsoluteViewport().contains(this.getPosition())},d.prototype.isInViewportArea=function(e){var t=i.getAbsoluteViewport();return e=e||1,t.bottom=i.getWinHeight()*e+i.getScrollY(),t.contains(this.getPosition())},d.prototype.getParagraph=function(){return i.findParentParagraph(this.domNode)},d.prototype.getParagraphPosition=function(){return i.getPosition(this.getParagraph())},d.prototype.setCursorStyle=function(e){this.hookCursorStyle=e,this.hookCursorStyle&&this.domNode&&(this.domNode.style.cursor=this.hookCursorStyle)},{create:l,getVisibleHooks:h,Hook:d}},u.Hook.EVENT_CLICK="vm:hookclick",u.Hook.EVENT_HOOKIN="vm:hookin",u.Hook.EVENT_HOOKOUT="vm:hookout";var u=u||{};u.Image=function(e,o,i){function n(e){var t,i=this;this.id=c++,this.image=e,this.locked=!1,e.width>0&&e.height>0?this.allowed=s(e):(this.allowed=!1,e.complete||(t=o.bind(e,"load",function(){i.allowed=s(e),t()})))}function r(e){function o(e){e.nodeType===a.Dom.ELEMENT_NODE&&("IMG"===e.tagName.toUpperCase()?r.push(new n(e)):i.forEach(e.childNodes,o))}var r=[],s=e;return i.isNodeList(s)||(s=t.querySelectorAll(e)),i.forEach(s,o),r}function s(e){var t=e.width,o=e.height;return e.width>=d&&e.height>=l&&!u[t+"x"+o]}var c=1,d=200,l=150,u={"300x250":!0,"300x600":!0},p=.8;return n.prototype.getId=function(){return this.id},n.prototype.getDomNode=function(){return this.image},n.prototype.getWidth=function(){return this.image.width},n.prototype.getHeight=function(){return this.image.height},n.prototype.isAvailable=function(){return this.allowed&&!this.locked},n.prototype.lock=function(){this.locked=!0},n.prototype.setAdUnit=function(e){this.adUnit=e},n.prototype.hasAdUnit=function(){return!!this.adUnit},n.prototype.getPosition=function(){return e.getPosition(this.image)},n.prototype.getArea=function(){return this.getPosition().getArea()},n.prototype.isInViewport=function(){var t,o;return this.adUnit&&this.adUnit.isReady()?this.adUnit.isInViewport():(t=this.getPosition(),o=this.getHeight(),t.top=t.top+o*p,!!e.getAbsoluteViewport().contains(t))},n.prototype.isVisible=function(){return e.isVisible(this.image,{overflowCheck:!0})},{ImageNode:n,findImages:r}};var u=u||{};u.Paragraph=function(e,o){function i(e){this.id=c++,this.domNode=e,this.available=!0}function n(e){var t=e.textContent;return"undefined"==typeof t&&(t=e.nodeType===a.Dom.TEXT_NODE?e.data:e.innerText),t.replace(/\s+/,"").length}function r(e){return o.some(e.childNodes,function(e){return e.nodeType===a.Dom.TEXT_NODE&&n(e)>0})}function s(a){var s=t.querySelectorAll(a.selectors),c=[];return o.forEach(s,function(t){var s=t.querySelectorAll(a.paragraphselectors);o.forEach(s,function(t){var o,s=e.getPosition(t);!s||s.getWidth()<a.adwidth||r(t)&&(n(t)<a.mincontentlength.above||(o=e.nextElementSibling(t),null===o||n(o)<a.mincontentlength.below||c.push(new i(t))))})}),c}var c=1;return i.prototype.getId=function(){return this.id},i.prototype.getDomNode=function(){return this.domNode},i.prototype.getWidth=function(){return e.getPosition(this.domNode).getWidth()},i.prototype.isBelowWaterline=function(){return e.getPosition(this.domNode).bottom>=e.getAbsoluteViewport().bottom},i.prototype.isAvailable=function(){return this.available},i.prototype.lock=function(){this.available=!1},{findParagraphs:s,Paragraph:i}};var u=u||{};u.SimpleElement=function(e,o){function i(e){this.id=r++,this.domNode=e,this.available=!0}function n(e){var n=t.querySelectorAll(e.selectors),r=[];return o.forEach(n,function(e){r.push(new i(e))}),r}var r=1;return i.prototype.getId=function(){return this.id},i.prototype.getDomNode=function(){return this.domNode},i.prototype.getWidth=function(){return e.getPosition(this.domNode).getWidth()},i.prototype.isBelowWaterline=function(){return!1},i.prototype.isAvailable=function(){return this.available},i.prototype.lock=function(){
this.available=!1},{findElements:n,SimpleElementNode:i}};var u=u||{};u.TextNode=function(e,t){function o(e,i,n){this.id=t.hashString(i),this.domNode=e,this.textContent=i,this.hyperlink=n,this.status=o.AVAILABLE,this.hooks=[]}function i(i){function s(e,i){var d,l;if(e.nodeType===a.Dom.TEXT_NODE)d=t.trim(e.data),d.length>0&&c.push(new o(e,d,i));else if(e.nodeType===a.Dom.ELEMENT_NODE){if(l=e.tagName.toUpperCase(),n[l]||e.className&&e.className.toLowerCase&&t.includes(e.className.toLowerCase().split(/\s+/),r)||e.id&&e.id.toLowerCase&&e.id.toLowerCase()===r)return;t.forEach(e.childNodes,function(e){s(e,i||"A"===l)})}}var c=[],d=i;return t.isNodeList(d)||(d=e.querySelectorAll(i)),t.forEach(d,function(e){s(e,!1)}),c}var n={SCRIPT:!0,NOSCRIPT:!0,CANVAS:!0,CODE:!0,OBJECT:!0,PROGRESS:!0,SOURCE:!0,VIDEO:!0,STYLE:!0},r="nointellitxt";return o.AVAILABLE=0,o.IN_FLIGHT=1,o.LOCKED=2,o.prototype.getId=function(){return this.id},o.prototype.getDomNode=function(){return this.domNode},o.prototype.updateDomNode=function(e){this.domNode=e},o.prototype.isHyperlink=function(){return this.hyperlink},o.prototype.getTextContent=function(){return this.textContent},o.prototype.getStatus=function(){return this.status},o.prototype.setStatus=function(e){this.status=e},o.prototype.getHooks=function(){return this.hooks},o.prototype.addHook=function(e){this.hooks.push(e)},{TextNode:o,findTextNodes:i}};var h=h||{};h.desktop=function(e,t,o,i,n,r){function s(){var s={};return s.daw=function(){var o=new i.Scroll,n=new i.Adhesion(t.get("partner.daw",{})),r=new e.Daw;o.initialise(),n.once("trigger",function(e){r.invoke(e.data)}),n.initialise(o)},o.isAllowed(a.PubX.IN_CONTENT)?(s.image=function(o){var n=new i.Image(t.get("partner.image",{})),r=i.Gallery.load(t.get("partner.gallery",{})),a=new e.Image;n.on("trigger",function(e){a.invoke(e.data)}),function(){var t;r&&(t=new e.Gallery({api:r.api}),r.on("trigger",function(e){a.invoke(e.data)}),a.on("galleryBehaviour",function(e){t.invoke(e.data)}))}(),n.initialise(o)},s.inline=function(o){var n,r=t.get("partner.inline",{});n=r.usesimpleelement?new i.SimpleElement(r):new i.ParagraphBreak(r);var a=new e.Inline;n.on("trigger",function(e){a.invoke(e.data)}),n.initialise(o)},function(){var o=t.getBoolean("partner.inview.mobileonly",!1),c=new i.TextNode,d=new e.Wordflip,l=new e.VibrantView,u=e.ScriptsLoader,p=r.once(function(e){c.initialise(e)});s.intext=function(t,o){function i(e){d.invoke(e),l.invoke(e),u.invoke(e)}function n(e){a.invoke(e)}function r(e){a.invoke(e)}var a=new e.Tooltip,s=new e.Hook({product:o,fetchFormat:"{{id}}",eventCallbacks:{newHooks:i,hover:n,click:r}});c.on("trigger",function(e){s.invoke(e.data)}),l.on("trigger",function(e){o===e.data.hook.getProduct()&&a.invoke(e.data)}),p(t)},s.inview=function(t,i){function r(t){e.AutoReveal.autoOpen(v,t)}function s(e){d.invoke(e),l.invoke(e),u.invoke(e),r(e)}function h(e){v.invoke(e)}function g(e){v.invoke(e)}if(!o){var v=new e.InView,f=new e.Hook({product:i,fetchFormat:"{{id}}:{{width}}:"+i,callback:v.processNode,eventCallbacks:{newHooks:s,hover:h,click:g}});c.on("trigger",function(e){f.invoke(e.data)}),l.on("trigger",function(e){i===e.data.hook.getProduct()&&v.invoke(e.data)}),t.on(a.app.trigger.scroll,function(){r({hooks:n.getVisibleHooks(i),viewSource:a.Log.viewSource.SCROLL})}),p(t)}},s.instory=function(t,o){function i(t){e.AutoReveal.autoOpen(g,t)}function r(e){d.invoke(e),l.invoke(e),u.invoke(e),e.hooks.forEach(function(e){g.invoke({hook:e,viewSource:300})})}function s(){}function h(){}var g=new e.InStory,v=new e.Hook({product:o,fetchFormat:"{{id}}:{{width}}:"+o,callback:g.processNode,prefilterNodes:g.prefilterNodes,eventCallbacks:{newHooks:r,hover:s,click:h}});c.on("trigger",function(e){v.invoke(e.data)}),l.on("trigger",function(e){o===e.data.hook.getProduct()&&g.invoke(e.data)}),t.on(a.app.trigger.scroll,function(){i({hooks:n.getVisibleHooks(o),viewSource:a.Log.viewSource.SCROLL})}),p(t)},s.adbar=function(){var o=new i.Scroll,n=new i.Adhesion(t.get("partner.adbar",{})),r=new e.AdBar;o.initialise(),n.once("trigger",function(e){r.invoke(e.data)}),n.initialise(o)},s.adbarlegacy=function(){e.AdBarLegacy()}}(),s):s}return{initialise:s}};var h=h||{};h.mobile=function(e,t,o,i,n,r,s){function c(){var c={};if(o.isAllowed(a.PubX.IN_CONTENT)){var d=new i.Resize,l=new i.Scroll,u=new i.Gesture;return d.initialise(),l.initialise(),u.initialise(),c.image=function(o){var n=new i.Image(t.get("partner.image",{})),r=i.Gallery.load(t.get("partner.gallery",{})),a=new e.Image;n.on("trigger",function(e){a.invoke(e.data)}),function(){var t;r&&(t=new e.Gallery({api:r.api}),r.on("trigger",function(e){a.invoke(e.data)}),a.on("galleryBehaviour",function(e){t.invoke(e.data)}))}(),n.initialise(o)},c.inline=function(o){var n,r=t.get("partner.inline",{});n=r.usesimpleelement?new i.SimpleElement(r):new i.ParagraphBreak(r);var a=new e.Inline;n.on("trigger",function(e){a.invoke(e.data)}),n.initialise(o)},c.adhesion=function(){var o=new i.Adhesion(t.get("partner.adhesion",{})),n=new e.AdhesionBackfill({fetchFormat:"{{id}}:320:80"}),r=new e.AdhesionPlacement;d.connect("trigger",r,"resize"),l.connect("trigger",r,"scroll"),u.connect("zoom",r,"zoom"),n.on("adsReady",function(e){r.invoke(e.data)}),r.on("fetchAd",function(e){n.invoke(e.data)}),o.once("trigger",function(e){n.invoke(e.data)}),o.initialise(l)},function(){var o=t.getBoolean("partner.inview.desktoponly",!1),p=new i.TextNode,h=new e.VibrantView,g=new e.Wordflip,v=e.ScriptsLoader,f=r.once(function(e){p.initialise(e)});d.connect("trigger",g,"resize"),l.connect("trigger",g,"scroll"),u.connect("zoom",g,"zoom"),u.connect("touchstart",g,"touchstart"),u.connect("touchend",g,"touchend"),d.connect("trigger",h,"resize"),l.connect("trigger",h,"scroll"),u.connect("zoom",h,"zoom"),u.connect("touchstart",h,"touchstart"),u.connect("touchend",h,"touchend"),c.intext=function(o,i){function n(e){var o,i="adhesion";if(e&&e.hook&&(o=e.hook.getAdConfig())){var n={cdnUrl:"//"+t.cdn.internal,id:o.ads[0].creative.value};s.template.load(n,o,function(t,o){!t&&o&&(o.params.isCPE||(i="inview"),w[i].invoke(e))})}}function a(e){n(e)}function c(e){g.invoke(e),h.invoke(e),v.invoke(e)}var m,y=i+":",k={newHooks:c,click:a},b=t.getBoolean("partner.intext.adhesion",!1);m=b?new e.Hook({product:i,placement:"hooked-adhesion",fetchFormat:"{{id}}:320:80",eventCallbacks:k}):new e.Hook({product:i,placement:"dropin",fetchFormat:"{{id}}:1:1",eventCallbacks:k});var w={};w.adhesion=new e.AdhesionPlacement,w.inview=new e.InView,w.dropin=new e.DropInPlacement,r.forEach(w,function(e){d.connect("trigger",e,"resize"),l.connect("trigger",e,"scroll"),u.connect("zoom",e,"zoom"),u.connect("touchstart",e,"touchstart"),u.connect("touchend",e,"touchend")}),g.on(y+"highlight",function(e){n(e.data)}),p.on("trigger",function(e){m.invoke(e.data)}),f(o)},c.inview=function(t,i){function r(e){d.invoke(e)}function s(t){e.AutoReveal.autoOpen(d,t)}function c(e){g.invoke(e),h.invoke(e),v.invoke(e),s(e)}if(!o){var d=new e.InView,l=new e.Hook({product:i,fetchFormat:"{{id}}:{{width}}:"+i,callback:d.processNode,eventCallbacks:{newHooks:c,click:r}});p.on("trigger",function(e){l.invoke(e.data)}),h.on("trigger",function(e){i===e.data.hook.getProduct()&&d.invoke(e.data)}),t.on(a.app.trigger.scroll,function(){s({hooks:n.getVisibleHooks(i),viewSource:a.Log.viewSource.SCROLL})}),f(t)}},c.instory=function(t,o){function i(e){c.invoke(e)}function r(e){for(var t=0;t<e.hooks.length;t++)e.hooks[t].getAdConfig()&&!e.hooks[t].autoOpened&&(c.invoke({hook:e.hooks[t],viewSource:e.viewSource}),e.hooks[t].autoOpened=!0)}function s(e){h.invoke(e),v.invoke(e),r(e)}var c=new e.InStory,d=new e.Hook({product:o,fetchFormat:"{{id}}:{{width}}:"+o,callback:c.processNode,prefilterNodes:c.prefilterNodes,eventCallbacks:{newHooks:s,click:i}});p.on("trigger",function(e){d.invoke(e.data)}),h.on("trigger",function(e){o===e.data.hook.getProduct()&&c.invoke(e.data)}),t.on(a.app.trigger.scroll,function(){r({hooks:n.getVisibleHooks(o),viewSource:a.Log.viewSource.SCROLL})}),f(t)}}(),c}}return{initialise:c}};var h=h||{};h.tablet=function(e,t,o,i,n,r){function s(){var s={};if(o.isAllowed(a.PubX.IN_CONTENT)){var c=new i.Resize,d=new i.Scroll,l=new i.Gesture;return c.initialise(),d.initialise(),l.initialise(),s.image=function(o){var n=new i.Image(t.get("partner.image",{})),r=i.Gallery.load(t.get("partner.gallery",{})),a=new e.Image;n.on("trigger",function(e){a.invoke(e.data)}),function(){var t;r&&(t=new e.Gallery({api:r.api}),r.on("trigger",function(e){a.invoke(e.data)}),a.on("galleryBehaviour",function(e){t.invoke(e.data)}))}(),n.initialise(o)},s.inline=function(o){var n,r=t.get("partner.inline",{});n=r.usesimpleelement?new i.SimpleElement(r):new i.ParagraphBreak(r);var a=new e.Inline;n.on("trigger",function(e){a.invoke(e.data)}),n.initialise(o)},s.adhesion=function(){var o=new i.Adhesion(t.get("partner.adhesion",{})),n=new e.AdhesionBackfill({fetchFormat:"{{id}}:728:90"}),r=new e.AdhesionPlacement;c.connect("trigger",r,"resize"),d.connect("trigger",r,"scroll"),l.connect("zoom",r,"zoom"),n.on("adsReady",function(e){r.invoke(e.data)}),r.on("fetchAd",function(e){n.invoke(e.data)}),o.once("trigger",function(e){n.invoke(e.data)}),o.initialise(d)},function(){var o=t.getBoolean("partner.inview.desktoponly",!1),u=new i.TextNode,p=new e.VibrantView,h=new e.Wordflip,g=e.ScriptsLoader,v=r.once(function(e){u.initialise(e)});c.connect("trigger",h,"resize"),d.connect("trigger",h,"scroll"),l.connect("zoom",h,"zoom"),l.connect("touchstart",h,"touchstart"),l.connect("touchend",h,"touchend"),c.connect("trigger",p,"resize"),d.connect("trigger",p,"scroll"),l.connect("zoom",p,"zoom"),l.connect("touchstart",p,"touchstart"),l.connect("touchend",p,"touchend"),s.intext=function(o,i){function n(e){a.invoke(e)}function r(e){h.invoke(e),p.invoke(e),g.invoke(e)}var a,s,f=i+":",m=t.getBoolean("partner.intext.adhesion",!1),y={newHooks:r,click:n};m?(a=new e.AdhesionPlacement,s=new e.Hook({product:i,placement:"hooked-adhesion",fetchFormat:"{{id}}:728:90",eventCallbacks:y}),h.on(f+"highlight",function(e){a.invoke(e.data)}),c.connect("trigger",a,"resize"),d.connect("trigger",a,"scroll"),l.connect("zoom",a,"zoom"),l.connect("touchstart",a,"touchstart"),l.connect("touchend",a,"touchend")):(a=new e.DropInPlacement,s=new e.Hook({product:i,placement:"dropin",fetchFormat:"{{id}}:1:1",eventCallbacks:y})),u.on("trigger",function(e){s.invoke(e.data)}),v(o)},s.inview=function(t,i){function r(e){d.invoke(e)}function s(t){e.AutoReveal.autoOpen(d,t)}function c(e){h.invoke(e),p.invoke(e),g.invoke(e),s(e)}if(!o){var d=new e.InView,l=new e.Hook({product:i,fetchFormat:"{{id}}:{{width}}:"+i,callback:d.processNode,eventCallbacks:{newHooks:c,click:r}});u.on("trigger",function(e){l.invoke(e.data)}),p.on("trigger",function(e){i===e.data.hook.getProduct()&&d.invoke(e.data)}),t.on(a.app.trigger.scroll,function(){s({hooks:n.getVisibleHooks(i),viewSource:a.Log.viewSource.SCROLL})}),v(t)}},s.instory=function(t,i){function r(e){d.invoke(e)}function s(e){for(var t=0;t<e.hooks.length;t++)d.invoke({hook:e.hooks[t],viewSource:e.viewSource})}function c(e){p.invoke(e),g.invoke(e),s(e)}if(!o){var d=new e.InStory,l=new e.Hook({product:i,fetchFormat:"{{id}}:{{width}}:"+i,callback:d.processNode,prefilterNodes:d.prefilterNodes,eventCallbacks:{newHooks:c,click:r}});u.on("trigger",function(e){l.invoke(e.data)}),p.on("trigger",function(e){i===e.data.hook.getProduct()&&d.invoke(e.data)}),t.on(a.app.trigger.scroll,function(){s({hooks:n.getVisibleHooks(i),viewSource:a.Log.viewSource.SCROLL})}),v(t)}}}(),s}}return{initialise:s}};var g=g||{};g.Adhesion=function(e){function t(t){e.Observable.call(this),this.minScroll=t.getInteger("minscroll",0),this.triggered=!1}var o={TRIGGER:"trigger"};return t.prototype=new e.Observable,t.prototype.initialise=function(e){var t=this;e.on(o.TRIGGER,function(e){var i=e.data,n=i.scroll||0;!t.triggered&&n>=t.minScroll&&t.fire(o.TRIGGER,{viewSource:i.viewSource||a.Log.viewSource.SCROLL,scroll:n})})},t};var g=g||{};g.Gallery=function(e,o,i,n,r,s,c){function d(e){var t=this;i.Observable.call(this),this.selectors=e.selectors,this.script=e.script,this.gallery=e.gallery,this.api={channel:new i.Observable,config:o,dom:r,events:i,utils:n,selectors:this.selectors,gallery:this.gallery},this.api.channel.on("newImage",function(e){var o=new s.ImageNode(e.data.image);t.fire(u.TRIGGER,{hooks:[o],maxAds:1,viewSource:a.Log.viewSource.LOAD,gallery:!0}),o.isInViewport()&&c.forceFlush()}),this.loadScript()}function l(e){var o,i=e.getArray("selectors",!1),n=e.get("script",!1);return!(!i&&!n)&&(o=t.querySelector(i),!!o&&new d({selectors:i,script:n,gallery:o}))}var u={TRIGGER:"trigger"};return d.prototype=new i.Observable,d.prototype.loadScript=function(){var t=this;e.VM.gallery=e.VM.gallery||{},e.VM.gallery.initialise=function(e){e(t.api)},r.appendScript(this.script)},{GalleryTrigger:d,load:l}};var g=g||{};g.Gesture=function(t,o,i,n){function r(){o.Observable.call(this),this.connect(a.app.trigger.zoom,t)}function s(t){o.bind(e,"touchstart",n.debounce(function(e){t.fire(a.app.trigger.touchstart,e)},c,{leading:!0})),o.bind(e,"touchend",n.debounce(function(e){t.fire(a.app.trigger.touchend,e)},c,{leading:!0}))}var c=150;return r.prototype=new o.Observable,r.prototype.initialise=function(){s(this)},r};var g=g||{};g.Image=function(e,t){function o(t){e.Observable.call(this),this.config=t,this.images=[]}function i(e,o){var i=[],r=e.config.getInteger("maxhooks",1);t.forEach(e.images,function(e){e.isInViewport()&&(e.isAvailable()?(e.lock(),e.isVisible()&&i.push(e)):e.hasAdUnit()?--r:e.lock())}),r<1||0===i.length||(i.sort(function(e,t){return t.getArea()-e.getArea()}),e.fire(n.TRIGGER,{hooks:i,maxAds:r,viewSource:o}))}var n={TRIGGER:"trigger"};return o.prototype=new e.Observable,o.prototype.initialise=function(e){e.on(a.app.trigger.newContent,function(e){this.images.push.apply(this.images,e.data.images)},this),e.on(a.app.trigger.load,function(){i(this,a.Log.viewSource.LOAD)},this),e.on(a.app.trigger.scroll,function(){i(this,a.Log.viewSource.SCROLL)},this)},o};var g=g||{};g.ParagraphBreak=function(e,t,o){function i(e){t.Observable.call(this),this.config=e}var n={TRIGGER:"trigger"};return i.prototype=new t.Observable,i.prototype.initialise=function(t){t.on(a.app.trigger.load,function(){var t=e.findParagraphs(this.config);if(this.config.getBoolean("nowaterline"))this.hook=t[0];else for(var i=0,n=t.length;i<n;++i)if(t[i].isBelowWaterline()){this.hook=t[i];break}this.hook||o.notifyFailure("inline")},this),t.on(a.app.trigger.scroll,function(){this.hook&&this.hook.isAvailable()&&!this.hook.isBelowWaterline()&&(this.hook.lock(),this.fire(n.TRIGGER,{hook:this.hook,viewSource:a.Log.viewSource.SCROLL}))},this)},i};var g=g||{};g.Resize=function(t,o,i){function n(){o.Observable.call(this)}var r={TRIGGER:"trigger"},s=250;return n.prototype=new o.Observable,n.prototype.initialise=function(){var n=this;o.bind(e,"resize",i.debounce(function(){t.fire(a.app.trigger.resize),n.fire(r.TRIGGER)},s))},n};var g=g||{};g.Scroll=function(e,t,o){function i(){var e=this;o.Observable.call(this),this.lastScrollY=0,this._isUnderAnimation=!1,this.onAnimationStart=function(){e._isUnderAnimation=!0},this.onAnimationEnd=function(){e._isUnderAnimation=!1}}var n={TRIGGER:"trigger"};return i.prototype=new o.Observable,i.prototype.initialise=function(){e.on(a.app.inview.animationStart,this.onAnimationStart),e.on(a.app.inline.animationStart,this.onAnimationStart),e.on(a.app.inview.animationEnd,this.onAnimationEnd),e.on(a.app.inline.animationEnd,this.onAnimationEnd),e.on(a.app.trigger.load,function(){this.lastScrollY=0,this.fire(n.TRIGGER,{viewSource:a.Log.viewSource.LOAD,scroll:0,direction:0})},this),e.on(a.app.trigger.scroll,function(){var e=t.getScrollY(),o=e-this.lastScrollY;this.lastScrollY=e,this._isUnderAnimation||this.fire(n.TRIGGER,{viewSource:a.Log.viewSource.SCROLL,scroll:e,direction:o})},this)},i};var g=g||{};g.SimpleElement=function(e,t,o){function i(e){t.Observable.call(this),this.config=e}var n={TRIGGER:"trigger"};return i.prototype=new t.Observable,i.prototype.initialise=function(t){t.on(a.app.trigger.load,function(){var t=e.findElements(this.config);if(this.config.getBoolean("nowaterline"),0){for(var i=0,r=t.length;i<r;++i)if(t[i].isBelowWaterline()){this.hook=t[i];break}}else this.hook=t[0];this.hook||o.notifyFailure("inline"),this.hook&&this.hook.isAvailable()&&!this.hook.isBelowWaterline()&&(this.hook.lock(),this.fire(n.TRIGGER,{hook:this.hook,viewSource:a.Log.viewSource.SCROLL}))},this)},i};var g=g||{};g.TextNode=function(e,t,o,i){function n(){o.Observable.call(this)}var r={TRIGGER:"trigger"},s=40,c=e.getInteger("partner.intext.extendviewport",0);return n.prototype=new o.Observable,n.prototype.initialise=function(e){function o(e,t){var o=i.filter(n,function(e){return d(e.getDomNode())});n.length>0&&e.fire(r.TRIGGER,{nodes:o,viewSource:t})}var n=[],d=function(){return c?function(e){var o=t.getAbsoluteViewport();return o.bottom+=c,!!t.getTextNodeBounds(e).getIntersection(o)}:function(e){return t.isInViewport(e)}}();e.on(a.app.trigger.newContent,function(e){i.forEach(e.data.textNodes,function(e){e.getTextContent().length>=s&&!e.isHyperlink()&&n.push(e)},this)},this),e.on(a.app.trigger.load,function(){o(this,a.Log.viewSource.LOAD)},this),e.on(a.app.trigger.scroll,function(){o(this,a.Log.viewSource.SCROLL)},this)},n};var i=i||{};i.hook=i.hook||{},i.hook.AdAssign=function(e,t,o,i,n,r){function s(t){var s=[],d=t.ads,l=t.candidateNodes,p=t.viewSource,h=t.product;e.forEach(l,function(e){var t,c=e.getId(),l=d[c]?d[c][0]:null;r.setNodeStatus(h,c,n.TextNode.LOCKED),l&&r.hookAllowed()&&(r.countHook(),t=i.create(e,d[c][0],h),t?s.push(t):o.hookFailure({product:h||"intext",hookId:l.vibrantParameters.hookId,reason:a.Log.hookReason.TERM_NOT_FOUND}))}),e.forEach(s,function(e){e.on(u.Hook.EVENT_HOOKIN,function(){e.setTriggered(),r.executeCallback(h,c.HOVER,{hook:e,viewSource:a.Log.viewSource.MOUSE_OVER,triggerSource:c.HOVER})}),e.on(u.Hook.EVENT_CLICK,function(){e.setTriggered(),r.executeCallback(h,c.CLICK,{hook:e,viewSource:a.Log.viewSource.MOUSE_OVER,triggerSource:c.CLICK})})}),s.length>0&&(o.hookLoad({product:h,hookIds:e.map(s,function(e){return e.getId()}).join(",")}),r.executeCallback(h,c.NEW_HOOKS,{hooks:s,viewSource:p}))}var c={NEW_HOOKS:"newHooks",HOVER:"hover",CLICK:"click"};return s};var i=i||{};i.hook=i.hook||{},i.hook.HookAdFetcher=function(e,t,o,i,n,r,a){function s(){this.waitList={}}var c={IDLE:1,FETCHING:2},d={nodes:[],candidateNodes:[],viewSource:null,count:0,ready:!1,state:c.IDLE},l=["intext","inview"];return s.prototype.designate=function(e){this.waitList.hasOwnProperty(e)||(this.waitList[e]=o.extend({},d))},s.prototype.resolveFalse=function(e,t){this.waitList.hasOwnProperty(e)&&this.dataToFetch(e,[],[],0,t)},s.prototype.goFetch=function(e){this.waitList.hasOwnProperty(e.product)&&this.dataToFetch(e.product,e.nodes,e.candidateNodes,e.count,e.viewSource)},s.prototype.isFetching=function(e){return this.waitList[e].state===c.FETCHING},s.prototype.activeProducts=function(){return o.keys(this.waitList)},s.prototype.dataToFetch=function(e,t,o,i,n){var r=this.waitList[e];this.isFetching(e)||(r.nodes=r.nodes.concat(t),r.candidateNodes=r.candidateNodes.concat(o),r.viewSource=n,r.count=i,r.ready=!0,r.state=c.FETCHING),this.attemptFetch()},s.prototype.resetWaitList=function(){o.forOwn(this.waitList,function(e){o.extend(e,d)})},s.prototype.attemptFetch=function(){var e=this,t=!o.some(e.activeProducts(),function(t){return e.waitList[t].ready===!1});t&&this.fetch()},s.prototype.fetch=function(){var t,s=[],c={},d=[];if(o.forOwn(this.waitList,function(e,o){s=s.concat(e.nodes),c[o]=e.candidateNodes.slice(0),d.push(e.count),t=e.viewSource}),this.resetWaitList(),s.length){var u=!1;r.getVisibleHooks()&&(u=o.some(r.getVisibleHooks(),function(e){var t=e.getAdConfig();return"internal"===t.ads[0].creative.creativeType&&o.includes(l,t.product)})),e.request("intext",{ids:s,count:Math.max.apply(null,d),internal:u,autoreveal:c.hasOwnProperty("inview")&&a.revealsAllowed()},function(e){var r={};o.forOwn(e,function(e,t){var o=i.hash[e[0].vibrantParameters.product];r.hasOwnProperty(o)||(r[o]={}),r[o][t]=e}),o.forOwn(r,function(e,o){n({ads:e,candidateNodes:c[o],viewSource:t,product:o})})})}},new s};var i=i||{};i.hook=i.hook||{},i.hook.Behaviour=function(e,t,o,i,n,r,a){function s(t){this.product=t.product,this.selector=e.get("partner."+this.product+".selectors",l),"instory"===this.product?(this.maxHooks=e.get("partner.instory.maxhooks",c.instory),this.maxHooksPerPage=e.get("partner.instory.pagemaxhooks",d.instory)):(this.maxHooks=e.get("partner.intext.maxhooks",c.intext),this.maxHooksPerPage=e.get("partner.intext.pagemaxhooks",d.intext)),this.fetchFormat=t.fetchFormat,this.callback=t.callback||!1,this.prefilterNodes=t.prefilterNodes||!1,r.registerProduct(this.product,t.eventCallbacks),n.designate(this.product),this.discoveredNodes=[]}var c={instory:1,intext:3},d={instory:5,intext:5},l=e.get("partner.intext.selectors","BODY");return s.prototype.invoke=function(e){var s=this,c=this.maxHooks,d=[],l=[];this.viewSource=e.viewSource;var u=0;if(t.forEach(this.discoveredNodes,function(e){var t=e.node.getHooks();u+=t?t.length:0}),!r.hookAllowed()||u>=this.maxHooksPerPage)return n.resolveFalse(s.product,this.viewSource);t.forEach(e.nodes,function(e){var t,o;for(t=0;t<s.discoveredNodes.length;t++)if(e.id===s.discoveredNodes[t].node.id){o=!0;break}if(!o&&e.domNode){var i=a.getTextNodeBounds(e.domNode);s.discoveredNodes.push({node:e,bottomPos:i.bottom,status:"pending"})}}),s.discoveredNodes.sort(function(e,t){return e.bottomPos>t.bottomPos});var p=i.getHookableTags(e.nodes,this.selector,this.prefilterNodes,this.discoveredNodes);return t.forEach(p,function(e){switch(r.getNodeStatus(s.product,e.getId())){case o.TextNode.IN_FLIGHT:--c;break;case o.TextNode.LOCKED:t.forEach(e.getHooks(),function(e){e.isInViewport()&&--c});break;default:l.push(e)}}),c<=0||0===l.length?n.resolveFalse(s.product,this.viewSource):(t.forEach(l,function(e){function i(e){d.push(t.replaceUrlParams(s.fetchFormat,e))}var n=e.getId();r.setNodeStatus(s.product,n,o.TextNode.IN_FLIGHT),s.callback?s.callback(e,n,i):i({node:e,id:n})}),void n.goFetch({product:s.product,nodes:d,count:c,viewSource:s.viewSource,candidateNodes:l}))},s};var i=i||{};i.hook=i.hook||{},i.hook.NodeFilter=function(e,o,i){function n(e,n,c,d){function l(e){var t=e.parentNode;return t&&i.isElement(t)?a[t.tagName]?{hookable:!1,discard:!0}:s&&(i.matchesSelector(t,s)||i.parentHasSelector(t,s))?{hookable:!1,discard:!0}:o.includes(n,t)?{hookable:!0,discard:!1}:l(t):{hookable:!1,discard:!1}}n=t.querySelectorAll(n);var u=o.filter(e,function(e){var t;return!r[e.id]&&(t=l(e.domNode),t.discard&&(r[e.id]=!0),t.hookable)});return c?c(u,d):u}var r={},a={H1:!0,H2:!0,H3:!0},s=e.getArray("partner.intext.nohooknodes",!1);return{getHookableTags:n}};var i=i||{};i.hook=i.hook||{},i.hook.Mediator=function(e,t){function o(){this.nodeStatus={},this.productEventCallbacks={},this.maxPageHooks=i}var i=e.getInteger("partner.intext.pagemaxhooks",0),n=!!i;return o.prototype.getNodeStatus=function(e,t){return this.nodeStatus[e][t]},o.prototype.setNodeStatus=function(e,t,o){this.nodeStatus[e][t]=o},o.prototype.hookAllowed=function(){return!n||this.maxPageHooks>0},o.prototype.countHook=function(){n&&--this.maxPageHooks},o.prototype.registerProduct=function(e,o){this.nodeStatus[e]||(this.nodeStatus[e]={}),this.productEventCallbacks[e]||(this.productEventCallbacks[e]={}),t.extend(this.productEventCallbacks[e],o)},o.prototype.executeCallback=function(e,t,o){this.productEventCallbacks[e]&&this.productEventCallbacks[e][t]&&this.productEventCallbacks[e][t](o)},new o};var i=i||{};i.image=i.image||{};var v=3;i.image.Behaviour=function(e,t,o,i,n,r,s,c,d,l,u){function p(){var e=o.get("partner.image",{});switch(e.get("caption.strategy",null)){case"bruteForce":this.captionStrategy=new d.BruteForce(e.getInteger("caption.maxdepth",v));break;case"cssSelector":this.captionStrategy=new d.CssSelector(e.get("caption.selector"));break;default:this.captionStrategy=null}}var h=o.getInteger("partner.image.pagemaxhooks",0),g=!!h;return p.prototype=new r.Observable,p.prototype.invoke=function(r){function p(e,t,o){s.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||a.Log.closeSource.AUTO}),o()}function v(e,o,i){e=t.decoration.decorate(e,{decorationType:b}),s.adImpression({product:e.product,hookId:e.settings.vibrantParameters.hookId,setId:e.settings.vibrantParameters.setId,source:o}),i()}var f=r.hooks,m=this,y=o.getBoolean("partner.image.scaletofit",!0),k=y?1.5:1,b="image",w=l.map(f,function(e){var t=Math.floor(e.getWidth()*k),o=Math.floor(e.getHeight()*k);return e.getId()+":"+t+":"+o});g&&h<1||e.request("image",{ids:w,count:r.maxAds},function(e){var y=[];l.forEach(f,function(s){function l(e,o){e.position=new t.position.Absolute(function(){return d.findPositionWithinImage(s.getDomNode(),k,m.captionStrategy)}),o(null,e)}var f,k,w,C=s.getId();if(e.hasOwnProperty(C)){if(g){if(h<1)return;--h}f=e[C][0],f.container={width:s.getWidth(),height:s.getHeight()},k=t.adunit.create({product:"image",settings:f,templateSettings:{cdnUrl:"//"+o.cdn.internal,id:f.ads[0].creative.value},creativeLoad:function(e){var t=i.waterfall.select(e,"image",b);return b=t.decoration,t.creative},render:l,open:v,close:p}),n.onPositionChange(s.getDomNode(),function(){k.fire("domChange"),w||(!s.isVisible()&&k.isOpen()&&k.fire("hide"),s.isVisible()&&!k.isOpen()&&k.fire("show"))}),u.on(a.app.inview.animationStart,function(){w=!0,k.fire("hide")}),u.on(a.app.inview.animationEnd,function(){k.fire("domChange"),k.fire("show"),w=!1}),r.gallery&&m.fire("galleryBehaviour",{adUnit:k}),s.setAdUnit(k),c.track(k,f.trackers,f.term),k.connect("opened",k,"impression"),k.connect(k.EVENT_CLICK,k,"click"),k.fire("open",r.viewSource),y.push(f.vibrantParameters.hookId)}}),y.length>0&&s.hookLoad({product:"image",hookIds:y.join(",")})})},p};var i=i||{};i.image=i.image||{},i.image.Deviations=function(e,t){function o(e,o){return t.forEach(r,function(t){t.value&&(o=t.func(e,o,t.value))}),o}function i(e,o,i){return t.forOwn(o,function(e,t){i.hasOwnProperty(t)&&(o[t]+=parseInt(i[t],10)||0)}),o}var n=e.get("partner.image",{}),r=[{func:i,value:n.get("pos",!1)}];return{applyRules:o}};var i=i||{};i.image=i.image||{},i.image.Gallery=function(e){function t(t){e.Observable.call(this),this.channel=t.api.channel}return t.prototype=new e.Observable,t.prototype.invoke=function(e){e.adUnit&&this.channel.fire("newAd",{ad:e.adUnit})},t};var i=i||{};i.image=i.image||{},i.image.Position=function(e,t,o,i){function n(e){this.maxDepth=e}function r(e){this.selector=e}function s(e,o,n){var r,a,s,c,d,l=t.getPosition(e),u=l.right-l.left,p=o.width||o.getWidth(),h=o.height||o.getHeight();if(c=l.bottom-h,d=l.bottom,u-p>0)a=l.left+(u-p)/2,s=l.right-(u-p)/2;else{var g=o.body.parentElement;g&&(g.style.width=u+"px"),a=l.left,s=l.right}var v=new t.Coord({top:c,left:a,bottom:d,right:s}),f=t.getVisibleRect(e);return o.visibleRect=f,e.height>f.height&&v.shiftY(f.height-e.height),n&&(r=n.findCaptionTop(e,v),r&&v.shiftY(r-l.bottom)),i.applyRules(e,v)}return n.prototype.findCaptionTop=function(e,i){function n(e){if(e.nodeType===a.Dom.ELEMENT_NODE&&"vm-adunit-outer"!==e.className&&t.isVisible(e)){var r=t.getPosition(e);r.top<s&&i.getIntersection(r)&&(s=r.top),o.forEach(e.childNodes,n)}}for(var r=0,s=1/0;r<this.maxDepth;){var c=e.parentNode;if(!c)break;for(var d=c.childNodes,l=0,u=d.length;l<u;++l)d[l]!==e&&n(d[l]);e=c,++r}return isFinite(s)?s:null},r.prototype.findCaptionTop=function(i,n){var r=e.querySelectorAll(this.selector),a=1/0;return o.forEach(r,function(e){var o=t.getPosition(e);t.isVisible(e)&&o.getIntersection(n)&&(a=o.top)}),isFinite(a)?a:null},{findPositionWithinImage:s,BruteForce:n,CssSelector:r}};var i=i||{};i.inview=i.inview||{},i.inview.Filter=function(e,t,o){function i(e){var t,i,l,p={allowed:!1,width:null};if(!o.isElement(e))return p;if(t=o.getTextNodeBounds(e),i=t.getWidth(),i<r)return p;if(o.elementHasNodes(e,s))return p;if(u&&o.parentHasSelector(e,u.split(",")))return p;if(d&&n(e))return p;if(l=o.nextElementSibling(e)){if(l.className.indexOf(a)!==-1)return p;if(c&&o.matchesSelector(l,c))return p}return{allowed:!0,width:i}}function n(e){var i=o.elementsAtPoints(e,l),n="IMG";return t.some(i,function(e){return!!o.isElement(e)&&e.tagName===n})}var r="mobile"===e.platform?250:400,a="tt-wrapper",s=e.getArray("partner.inview.blockednodes",["img","div","iframe"]),c=e.get("partner.inview.avoid",null),d=e.getBoolean("partner.inview.collisiondetect",!0),l=e.getInteger("partner.inview.collisionoffset",10),u=e.get("partner.inview.blockbyparent",null);return i};var i=i||{};i.inview=i.inview||{},i.inview.Behaviour=function(e,t,o,i,n,r,s,c,d,l,p,h,g){function v(){var e=this;this.activeHook=null,this.activeUnit=null,b&&p.on(a.app.intext.tooltipClose,function(){e.closeOpenUnits()})}var f,m=100,y=1e3,k=1.2,b=o.getBoolean("partner.inview.closeonopen",!1);return v.prototype=new s.Observable,v.prototype.processNode=function(e,t,i){var n=r.findParentParagraph(e.getDomNode()),a=h(n),s=a.width,c=o.getBoolean("partner.inview.scaletofit",!0);c&&(s*=k),a.allowed&&i({node:e,id:t,width:Math.floor(s)})},v.prototype.closeOpenUnits=function(){this.activeUnit&&(f=this.activeUnit.getPosition(),this.activeUnit.fire("close",a.Log.closeSource.AUTO))},v.prototype.invoke=function(e){function n(e,t,o){v.disconnectAll(C),c.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||a.Log.closeSource.AUTO}),o()}function s(e,o){e.position=new t.position.Inview(v),o(null,e)}function l(e,i,n){var a,s=r.getAbsoluteViewport(),d=function(){var t=0;return f?f.top>e.position.hook.getPosition().bottom?t:(t=f.getHeight(),f=null,t):t}();e=t.decoration.decorate(e,{decorationType:w}),p(e),c.adImpression({product:e.product,hookId:e.settings.vibrantParameters.hookId,setId:e.settings.vibrantParameters.setId,source:i}),o.getBoolean("mobile",!1)?a=C.getPosition().top+C.getHeight()/2-(s.top+s.bottom)/2-d:(a=C.getPosition().top+C.getHeight()+m-s.bottom,a=Math.max(0,a),a+=-d),0!==a&&r.smoothScrollY(a,y),n()}function p(e){if(e){var t=e.getTemplateParams(),o=e.getTemplateHookParams()||{},i=e.outerBox.querySelector(".vm-adunit-content");t&&(t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor),v&&o.cursorStyle&&v.setCursorStyle(o.cursorStyle));var n=((v.adConfig||{}).container||{}).width;n&&e.scaleToFit(n)}}var h=this,v=e.hook,k=v.getAdConfig();if(v!==this.activeHook||!this.activeUnit.isOpen()){var b=o.getInteger("programmaticOverride",0);if(b&&v.getWaterfallOverrideAllowed())return void g.getAdForHook(v,function(t){if(t){var o=v.id,i=k.vibrantParameters.adProviderId,n=t.vibrantParameters.hookId,r=t.vibrantParameters.adProviderId;c.hookReplacement({product:"inview",oldHookId:o,newHookId:n,oldAdProviderId:i||-1,newAdProviderId:r||-1,reason:a.Log.hookReason.OVERRIDE}),v.adConfig=t,v.id=n,e.adConfig=t}(t||v.liveLookupFailsShowUnderlyingAd)&&(v.resetWaterfallOverrideAllowed(),h.invoke(e),v.hookClickActive=!0)});var w="inview";k.container={width:v.getParagraphPosition().getWidth()};var C=t.adunit.create({product:"inview",settings:k,templateSettings:{cdnUrl:"//"+o.cdn.internal,id:k.ads[0].creative.value},creativeLoad:function(e){var t=i.waterfall.select(e,"inview",w);return w=t.decoration,t.creative},render:s,open:l,close:n});d.track(C,k.trackers,k.term),C.connect("opened",C,"impression"),C.connect(C.EVENT_CLICK,C,"click"),v.connect(u.Hook.EVENT_HOOKIN,C,C.EVENT_MOUSEIN),v.connect(u.Hook.EVENT_HOOKOUT,C,C.EVENT_MOUSEOUT),v.connect(u.Hook.EVENT_CLICK,C,C.EVENT_CLICK),!o.mobile&&e.triggerSource&&C.once("opened",function(){C.fire("delegate",{triggerSource:e.triggerSource,source:a.Log.clickSource.HOOK})}),this.closeOpenUnits(),C.fire("open",e.viewSource),this.activeHook=v,this.activeUnit=C}},v};var i=i||{};i.instory=i.instory||{},i.instory.PrefilterNodes=function(e,t,o){function i(e){return t.filter(e,function(e){if(e.domNode&&e.domNode.parentNode){var t=o.getPosition(e.domNode.parentNode);
if(t)return t.bottom>h}return!1})}function n(e,o){var i,n=[];return t.forEach(e,function(e){var t=o.filter(function(t){return t.node.id===e.id||"allowed"===t.status}),r=-1;for(i=0;i<t.length;i++)if(t[i].node.id===e.id){r=i;break}if(r!==-1){if("pending"===t[r].status){var a=0===r||t[r].bottomPos-t[r-1].bottomPos>g,s=r>=t.length-1||t[r+1].bottomPos-t[r].bottomPos>g;t[r].status=a&&s?"allowed":"disallowed","allowed"===t[r].status&&n.push(e)}}else console.log("failed to find node in nodelist")}),n}function r(e,t){return[i,n].reduce(function(e,o){return o(e,t)},e)}var a=e.get("platform",""),s=700,c=500,d=300,l=800,u=800,p=800,h=0,g=0;switch(a){case"desktop":h=s,g=l;break;case"tablet":h=c,g=u;break;case"mobile":h=d,g=p}return r},i.instory.Filter=function(e,t,o){function i(e){var t,i,l,p={allowed:!1,width:null};if(!o.isElement(e))return p;if(t=o.getTextNodeBounds(e),i=t.getWidth(),i<r)return p;if(o.elementHasNodes(e,s))return p;if(u&&o.parentHasSelector(e,u.split(",")))return p;if(d&&n(e))return p;if(l=o.nextElementSibling(e)){if(l.className.indexOf(a)!==-1)return p;if(c&&o.matchesSelector(l,c))return p}return{allowed:!0,width:i}}function n(e){var i=o.elementsAtPoints(e,l),n="IMG";return t.some(i,function(e){return!!o.isElement(e)&&e.tagName===n})}var r="mobile"===e.platform?250:400,a="tt-wrapper",s=e.getArray("partner.instory.blockednodes",["img","div","iframe"]),c=e.get("partner.instory.avoid",null),d=e.getBoolean("partner.instory.collisiondetect",!0),l=e.getInteger("partner.instory.collisionoffset",10),u=e.get("partner.instory.blockbyparent",null);return i};var i=i||{};i.instory=i.instory||{},i.instory.Behaviour=function(e,t,o,i,n,r,s,c,d,l,p,h,g){function v(){this.activeHook=null,this.activeUnit=null,this.allowNewUnits=!0}var f,m=1.2;return v.prototype=new s.Observable,v.prototype.prefilterNodes=function(e,t){return g(e,t)},v.prototype.processNode=function(e,t,i){var n=r.findParentParagraph(e.getDomNode()),a=h(n),s=a.width,c=o.getBoolean("partner.instory.scaletofit",!0);c&&(s*=m),a.allowed&&i({node:e,id:t,width:Math.floor(s)})},v.prototype.invoke=function(e){function n(e,t,o){t===a.Log.closeSource.AD&&g.allowNewUnits===!0&&(g.allowNewUnits=!1,p.fire("instoryClose")),v.disconnectAll(k),v.removeStyling(),c.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||a.Log.closeSource.AUTO}),o()}function s(e,o){e.position=new t.position.Instory(v),o(null,e)}function l(e,o,i){r.getAbsoluteViewport(),function(){var t=0;return f?f.top>e.position.hook.getPosition().bottom?t:(t=f.getHeight(),f=null,t):t}();e=t.decoration.decorate(e,{decorationType:y}),h(e),i()}function h(e){if(e){var t=e.template.params,o=e.outerBox.querySelector(".vm-adunit-content");t.backgroundColor&&(o.style.backgroundColor=t.backgroundColor);var i=((v.adConfig||{}).container||{}).width;if(i&&(e.scaleToFit(i),e.fire("resize")),e.position){var n=e.position.hook;n&&n.domNode&&n.domNode.setAttribute("style","cursor:text")}}}var g=this;if(this.allowNewUnits){var v=e.hook,m=v.getAdConfig();if(v!==this.activeHook||!this.activeUnit.isOpen()){var y="instory";m.container={width:v.getParagraphPosition().getWidth()};var k=t.adunit.create({product:"instory",settings:m,templateSettings:{cdnUrl:"//"+o.cdn.internal,id:m.ads[0].creative.value},creativeLoad:function(e){var t=i.waterfall.select(e,"instory",y);return y=t.decoration,t.creative},render:s,open:l,close:n});d.track(k,m.trackers,m.term),k.connect("slidingopened",k,"impression"),k.connect(k.EVENT_CLICK,k,"click"),k.on("slidingopened",function(){c.adImpression({product:k.product,hookId:k.settings.vibrantParameters.hookId,setId:k.settings.vibrantParameters.setId,source:e.viewSource})}),v.connect(u.Hook.EVENT_HOOKIN,k,k.EVENT_MOUSEIN),v.connect(u.Hook.EVENT_HOOKOUT,k,k.EVENT_MOUSEOUT),v.connect(u.Hook.EVENT_CLICK,k,k.EVENT_CLICK),!o.mobile&&e.triggerSource&&k.once("opened",function(){k.fire("delegate",{triggerSource:e.triggerSource,source:a.Log.clickSource.HOOK})}),k.fire("open",e.viewSource),this.activeHook=v,this.activeUnit=k,p.on("instoryClose",function(){k.fire("close")})}}},v};var f=function(){this.bids=[],this.options={},this.name="bidderbase",this.status="pending"};f.prototype.formatBid=function(e,t,o,i,n,r,a,s){var c={bidderName:e,bidId:t,zoneId:o,product:i,width:n,height:r,scriptUrl:a,scriptTag:'<script src="'+a+'"></script>',cpm:s,impressions:0,impressionCap:1};return c},f.prototype.getName=function(){return this.name},f.prototype.getBids=function(){return this.bids},f.prototype.getOptions=function(){return this.options||{}},f.prototype.getStatus=function(){return this.status},f.prototype.load=function(){throw"BidderBase.prototype.load must be overridden"},f.prototype.getBidByZoneId=function(e){return this.bids.find(function(t){return t.zoneId===e})};var m=function(e,t){this.scriptUrl="https://static.criteo.net/js/ld/publishertag.js",this.criteo=null,this.bidTimeoutMs=2e3,this.name="criteo",this.supportedProducts=e,this.ipid=t||0;var o=this;this.adUnits={placements:[{slotid:"div-gpt-ad-0000000000000-0",zoneid:898770},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1232818},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1191579},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1191578},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1191580},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1175979},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1229156},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1191581},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1191582},{slotid:"div-gpt-ad-0000000000000-0",zoneid:898775},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1232819},{slotid:"div-gpt-ad-0000000000000-0",zoneid:898777},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1232820},{slotid:"div-gpt-ad-0000000000000-0",zoneid:898778},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1232821},{slotid:"div-gpt-ad-0000000000000-0",zoneid:898779},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1232824},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1232825},{slotid:"div-gpt-ad-0000000000000-0",zoneid:898772}]},this.productMap={},this.productMap[898770]={products:["intext"],size:"300x250"},this.productMap[1232818]={products:["intext"],size:"300x250"},this.productMap[1191579]={products:["inview"],size:"300x250"},this.productMap[1191578]={products:["inview"],size:"480x320"},this.productMap[1191580]={products:["inview"],size:"640x360"},this.productMap[1175979]={products:["instory"],size:"300x250"},this.productMap[1229156]={products:["instory"],size:"300x250"},this.productMap[1191581]={products:["instory"],size:"480x320"},this.productMap[1191582]={products:["instory"],size:"640x360"},this.productMap[898778]={products:["image","adbar"],size:"320x50"},this.productMap[1232821]={products:["image","adbar"],size:"320x50"},this.productMap[898775]={products:["image","adbar"],size:"468x60"},this.productMap[1232819]={products:["image","adbar"],size:"468x60"},this.productMap[898777]={products:["image","adbar"],size:"728x90"},this.productMap[1232820]={products:["image","adbar"],size:"728x90"},this.productMap[898779]={products:["adhesion"],size:"300x50"},this.productMap[1232824]={products:["adhesion"],size:"300x50"},this.productMap[1232825]={products:["adhesion"],size:"300x50"},this.productMap[898772]={products:["daw"],size:"300x250"},this.adUnits.placements=this.adUnits.placements.filter(function(t){var i=o.productMap[t.zoneid];if(i){var n=e.filter(function(e){return i.products.indexOf(e)>-1});return n.length>0}return!1});for(var i=0;i<this.adUnits.placements.length;i++)this.adUnits.placements[i].publishersubid=this.ipid.toString()};m.prototype=new f,m.prototype.load=function(e,t){var o=this;t.appendScript(this.scriptUrl,function(){o.criteo=e.Criteo,o.status="loaded",o.criteo.events.push(function(){o.criteo.SetLineItemRanges("0..30:0.01"),o.criteo.RequestBids(o.adUnits,o.bidCallback.bind(o),o.bidTimeoutMs)})})},m.prototype.bidCallback=function(e){for(var t=this,o=0;o<(e||[]).length;o++){var i=e[o],n=t.productMap[i.zoneId];if(n)for(var r=0;r<(n.products||[]).length;r++){var a=this.formatBid(this.getName(),i.id,i.zoneId,n.products[r],i.width,i.height,i.displayUrl,i.cpm);t.bids.push(a)}}this.status="completed"};var y=function(e){this.supportedProducts=e,this.name="freewheel"};y.prototype=new f,y.prototype.load=function(){this.bidCallback([])},y.prototype.bidCallback=function(e){this.bids=[],this.status="completed";for(var t=0;t<e.length;t++){var o=e[t],i=this.formatBid(this.getName(),o.id,o.zoneId,o.product,o.width,o.height,o.url,o.cpm);this.bids.push(i)}};var k=k||"VM";e[k]=e[k]||{},e[k].initialise=function(s){var p=a.Utils(),v=r.ProductMap(),f=r.CompatibilityRules(p);s=a.Config(s,p,f);var m=s.apiVersions;a.PubXBuilder(s);var y=a.debugLog(s),b=a.Events(p),w=a.AppChannel(b),C=a.AdsMonitor(w),E=a.Dom(e,t,b,p),I=l.consent(e,E,s,y),x=a.Cookie(t,s),A=d.audience(e,E,s,I),D=n.Mediator(e,t,s,p,E,w,v,y),O=a.Api(e,m,s,E,b,p,C,D,A),S=a.Log(m,s,E,p,O,w,y),N=a.CookieSync(m,s,E,p,S,O,I),T=a.AdFetcher(O,w,p,s,v,E),B=a.PubX(S),P=a.Page(O,s,p,w),L=a.Net(e,k,E,b,p),H=a.Tracking(s,L,p,S,w,I),_=a.Waterfall(e,t,s,p,S),V=d.collection(e,t,O,s,w,p,L,y,I);a.CmdMessenger(O,w,p,s,v,E,S,y);var U=function(){var i=o.Template(L,p);return{template:i,creative:o.Creative(b,p),position:o.Position(e,t,E,b,p,w),adunit:o.AdUnit(e,E,b,i,S,p,y,s),videounit:o.VideoUnit(e,t,s,E,b,S,p),cpeunit:o.CPEUnit(e,s,E,b,S,p,o.VideoUnit),customunit:o.CustomUnit(e,s,E,b,S,p,o.VideoUnit),decoration:o.Decoration(e,t,s,b,E,p,S)}}(),R=function(){var e=c.Waterfall({standard:c.Standard(U.creative,b,S,p),c2s:c.C2S(U.creative,E,b,S),banner:c.Banner(U.creative,E,S,p,s,D,y),video:c.Video(U.creative,U.videounit,b,S),cpe:c.CPE(U.creative,U.cpeunit,b,S),custom:c.Custom(U.creative,U.customunit,b,S)});return{waterfall:e}}(),F=function(){var e=u.Hook(t,s,E,b,p,v,S),o=u.Image(E,b,p),i=u.Paragraph(E,p),n=u.SimpleElement(E,p),r=u.TextNode(t,p);return{hook:e,image:o,paragraph:i,simpleElement:n,textNode:r}}(),M=a.ContentMonitor(T,s,E,F.image,S,P,F.textNode,p,V),W={Adhesion:g.Adhesion(b),Image:g.Image(b,p),Gallery:g.Gallery(e,s,b,p,E,F.image,T),ParagraphBreak:g.ParagraphBreak(F.paragraph,b,_),SimpleElement:g.SimpleElement(F.simpleElement,b,_),TextNode:g.TextNode(s,E,b,p),Scroll:g.Scroll(w,E,b),Resize:g.Resize(w,b,p),Gesture:g.Gesture(w,b,E,p)},z=function(){var o=i.AutoReveal(s,p,x,w,I);return{AdhesionPlacement:i.AdhesionPlacement(U,s,R,E,b,S,H,p),AdhesionBackfill:i.AdhesionBackfill(T,E,b,p,s),AdBarLegacy:i.AdBarLegacy(e,s,E),AdBar:i.AdBar(T,U,s,R,b,S,H),AutoReveal:o,ScriptsLoader:i.ScriptsLoader(s,p),DropInPlacement:i.DropInPlacement(U,s,R,b,S,H),InView:function(){var t=i.inview.Filter(s,p,E);return i.inview.Behaviour(e,U,s,R,x,E,b,S,H,p,w,t,T)}(),InStory:function(){var t=i.instory.Filter(s,p,E),o=i.instory.PrefilterNodes(s,p,E);return i.instory.Behaviour(e,U,s,R,x,E,b,S,H,p,w,t,o)}(),Daw:i.Daw(T,U,s,R,b,S,H),Image:function(){var e=i.image.Deviations(s,p),o=i.image.Position(t,E,p,e);return i.image.Behaviour(T,U,s,R,E,b,S,H,o,p,w)}(),Gallery:i.image.Gallery(b),Inline:i.Inline(T,U,s,R,b,S,H,_),Tooltip:i.Tooltip(e,U,s,R,E,b,S,p,H,w,T),Hook:function(){var e=i.hook.Mediator(s,p),t=i.hook.AdAssign(p,b,S,F.hook,F.textNode,e),n=i.hook.HookAdFetcher(T,b,p,v,t,F.hook,o),r=i.hook.NodeFilter(s,p,E);return i.hook.Behaviour(s,p,F.textNode,r,n,e,E)}(),VibrantView:i.VibrantView(s,x,b,p),Wordflip:i.Wordflip(e,t,s,p,E,b,F.hook,w)}}();w.once(a.app.main.initialise,function(e){var t,o,i=e.data.pubXReached;i&&B.set(s.getInteger("partner.pubx.action",a.PubX.ALLOW_ALL)),t=h[s.get("platform")],o=t(z,s,B,W,F.hook,p,U).initialise(),p.forEach(s.getArray("partner.products"),function(e){o&&o.hasOwnProperty(e)&&!_.isBlocked(e)&&o[e](w,e)})}),function(){function o(){E.waitForReadyState(function(){M.run(w),S.pageTracking({referrer:p.Base64.encodeURI(t.referrer)})})}I.init();var i=s.get("partner.rundelay",0),n=s.get("partner.hook.style.custom",null);D.init(S),A.runAudienceExtraction(),N.sync(),N.syncConsent(),E.appendStyleSheet("//"+s.cdn.kormorantcss.replace("{{version}}",s.version)),n&&E.appendInlineStyle(n),i>0?e.setTimeout(o,i):o()}()}}(window,document);
//# sourceMappingURL=http://localhost/maps/kormorant-1.27.99.min.js.map
