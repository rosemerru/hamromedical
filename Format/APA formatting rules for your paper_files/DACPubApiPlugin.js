
/* DAC.js 2.9.4 Copyright 2016 AOL Advertising. */
try{!function(){"use strict";function a(a){b(a.modules)}function b(a){function b(a){return 100*Math.round(a/100)}function c(a){return 100*Math.ceil(a/100)}function e(a){return 100*Math.floor(a/100)}function f(a){return r(a,50)}function g(a){return s(a,50)}function h(a){return t(a,50)}function i(a){return r(a,25)}function j(a){return s(a,25)}function k(a){return t(a,25)}function l(a){return 10*Math.floor(a/10)}function m(a){return 10*Math.ceil(a/10)}function n(a){return 10*Math.round(a/10)}function o(a){return r(a,5)}function p(a){return s(a,5)}function q(a){return t(a,5)}function r(a,b){var c=a%b;return c>=b/2?a+(b-c):a-c}function s(a,b){return a-a%b}function t(a,b){var c=a%b;return a+(c?b-c:0)}function u(a,b){return y(a)&&""!==a?a:b}function v(a){var b="aolbid",c=function(){},d={from:-1,to:-1,roundFunction:C},e={};if(!A(a))throw new Error("Invalid Pub Api Plugin configuration. No config object available!");if(e={defaultKey:u(a.defaultKey,b),roundingConfig:[]},x.isArray(a.roundingConfig)&&x.each(a.roundingConfig,function(a){if(!(z(a.from)&&z(a.to)&&(y(a.roundFunction)||B(a.roundFunction))&&!a.hasOwnProperty("roundValue")||z(a.roundValue)&&!a.hasOwnProperty("roundFunction")))throw new Error("Pub Api Plugin config.roundingConfig is invalid.");e.roundingConfig.push(a)}),0===e.roundingConfig.length&&e.roundingConfig.push(d),!a.pubApiOK||!x.isFunc(a.pubApiOK))throw new Error("Invalid Pub Api Plugin configuration. No callback function available (pubApiOK) available!");return e.pubApiOK=a.pubApiOK,e.pubApiER=x.isFunc(a.pubApiER)?a.pubApiER:c,(x.isFunc(a.defaultRound)||y(a.defaultRound))&&(e.defaultRound=a.defaultRound),z(a.padLeftZeros)&&a.padLeftZeros>0&&(e.padLeftZeros=a.padLeftZeros),e.protocol=a.protocol,a.hasOwnProperty("pixelsDivId")&&a.pixelsDivId&&(e.pixelsDivId=a.pixelsDivId),e}var w="PubApi",x=a.Utils,y=x.isString,z=x.isNumber,A=x.isObject,B=x.isFunc,C="getCPMInCents",D=function(a){this.config=v(a)},E=function(){return this.data.seatbid[0]?this.data.seatbid[0].bid[0]:void 0},F=function(){return this.data.id},G=function(){return this.data.nbr},H=function(){var a=Number.NaN;return this.data.seatbid.length>0&&(a=this.data.seatbid[0].bid[0].w),a},I=function(){var a=Number.NaN;return this.data.seatbid.length>0&&(a=this.data.seatbid[0].bid[0].h),a},J=function(){var a=Number.NaN;return this.data.seatbid.length>0&&(a=this.data.seatbid[0].bid[0].crid),a},K=function(){var a;return this.data.seatbid.length>0&&(a=this.data.seatbid[0].bid[0].impid),a},L=function(){return this.data.cur},M=function(){var a=this.getRoundedCPM(),b=0,c=isNaN(a)?"":""+a;if(this.config.padLeftZeros&&c)for(b=c.length;b<this.config.padLeftZeros;b++)c="0"+c;return c},N=function(){var a;return this.data.seatbid.length>0&&(a=this.data.seatbid[0].bid[0].adm),a},O=function(){var a=Number.NaN;return this.data.seatbid.length>0&&(a=this.data.seatbid[0].bid[0].price),a},P=function(){return Math.round(100*this.getCPM())},Q=function(){var a,b=this.data.seatbid[0];return b&&b.bid[0]&&(a=b.bid[0].ext),a},R=function(){var b,c,d=this.getCPMInCents(),e=0,f=-1;if(this.config.roundingConfig&&!isNaN(d))for(e=0;e<this.config.roundingConfig.length;e++)if(b=this.config.roundingConfig[e],-1==b.from&&(d<=b.to||-1==b.to)||-1==b.to&&d>=b.from||d>=b.from&&d<=b.to){c=b;break}return c&&("roundValue"in c?f=c.roundValue:c.roundFunction&&(f=a.Utils.isString(c.roundFunction)&&this[c.roundFunction]?this[c.roundFunction].call(this,d):c.roundFunction.call(this,d)),this.currentRoundingRange=c),-1==f&&(f=d,this.config.defaultRound&&(a.Utils.isString(this.config.defaultRound)?this[this.config.defaultRound]&&(f=this[this.config.defaultRound].call(this,d)):f=this.config.defaultRound.call(this,d),this.currentRoundingRange={})),f},S=function(){var a,b=this.getFormattedCPM();return b&&(a=(this.currentRoundingRange&&this.currentRoundingRange.key?this.currentRoundingRange.key:this.config.defaultKey)+"="+b),a},T=function(){var a=this.getFormattedCPM(),b={},c=this.currentRoundingRange&&this.currentRoundingRange.key?this.currentRoundingRange.key:this.config.defaultKey;return a&&(b[c]=a),b},U=function(){return this.data&&this.data.ext&&this.data.ext.pixels?this.data.ext.pixels:void 0},V=function(){var a;return this.data&&this.data.ext&&(a=this.data.ext),a},W=function(){return this.data},X=function(r,s){if(!this.config||!this.config.pubApiOK)throw new Error("No configuration or callback function available to Pub Api Plugin. Check the configuration object.");var t=this.config,u={data:r,config:this.config,getId:F,getBidObj:E,getAdWidth:H,getAdHeight:I,getCurrency:L,getCPM:O,getCPMInCents:P,getRoundedCPM:R,getFormattedCPM:M,getBidKeyValue:S,getBidKeyValueObj:T,getExt:V,getBidExt:Q,getPixels:U,getCreative:N,getCreativeId:J,getResponse:W,getNbr:G,getImpId:K,hundredRound:b,hundredFloor:e,hundredCeil:c,fiftyRound:f,fiftyFloor:g,fiftyCeil:h,tenCentsFloor:l,tenCentsCeil:m,tenCentsRound:n,fiveCentsCeil:q,fiveCentsRound:o,fiveCentsFloor:p,twentyFiveCeil:k,twentyFiveRound:i,twentyFiveFloor:j};if(u.getPixels()&&document.getElementById(t.pixelsDivId)){var v=a.ResourceLoader.buildUrl(this.config,"postscribe.js");a.ResourceLoader.loadScript(v,"postscribe",!0,function(a){if(!a)throw new Error("DACPubApiPlugin# renderPixels.  Postscribe lib failed to load");d.postscribe(document.getElementById(t.pixelsDivId),u.getPixels())})}this.config.pubApiOK(u,s),d.debugMode&&console&&console.log("Pub API JSON response: "+JSON.stringify(r,null,2))};a[w]={setConfig:D,handleResponse:X}}var c=window,d=c.ADTECH;d.registerPlugin(a)}()}catch(e){if(window.ADTECH&&window.ADTECH.debugMode)throw e}